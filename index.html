<!doctype html><html lang="en">
 <head>
  <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
  <title>OML Tutorials</title>
  <meta content="width=device-width, initial-scale=1, shrink-to-fit=no" name="viewport">
<style data-fill-with="stylesheet">/******************************************************************************
 *                   Style sheet for the W3C specifications                   *
 *
 * Special classes handled by this style sheet include:
 *
 * Indices
 *   - .toc for the Table of Contents (<ol class="toc">)
 *     + <span class="secno"> for the section numbers
 *   - #toc for the Table of Contents (<nav id="toc">)
 *   - ul.index for Indices (<a href="#ref">term</a><span>, in § N.M</span>)
 *   - table.index for Index Tables (e.g. for properties or elements)
 *
 * Structural Markup
 *   - table.data for general data tables
 *     -> use 'scope' attribute, <colgroup>, <thead>, and <tbody> for best results !
 *     -> use <table class='complex data'> for extra-complex tables
 *     -> use <td class='long'> for paragraph-length cell content
 *     -> use <td class='pre'> when manual line breaks/indentation would help readability
 *   - dl.switch for switch statements
 *   - ol.algorithm for algorithms (helps to visualize nesting)
 *   - .figure and .caption (HTML4) and figure and figcaption (HTML5)
 *     -> .sidefigure for right-floated figures
 *   - ins/del
 *     -> ins/del.c### for candidate and proposed changes (amendments)
 *
 * Code
 *   - pre and code
 *
 * Special Sections
 *   - .note       for informative notes             (div, p, span, aside, details)
 *   - .example    for informative examples          (div, p, pre, span)
 *   - .issue      for issues                        (div, p, span)
 *   - .advisement for loud normative statements     (div, p, strong)
 *   - .annoying-warning for spec obsoletion notices (div, aside, details)
 *   - .correction for "candidate corrections"       (div, aside, details, section)
 *   - .addition   for "candidate additions"         (div, aside, details, section)
 *   - .correction.proposed for "proposed corrections" (div, aside, details, section)
 *   - .addition.proposed   for "proposed additions"   (div, aside, details, section)
 *
 * Definition Boxes
 *   - pre.def   for WebIDL definitions
 *   - table.def for tables that define other entities (e.g. CSS properties)
 *   - dl.def    for definition lists that define other entitles (e.g. HTML elements)
 *
 * Numbering
 *   - .secno for section numbers in .toc and headings (<span class='secno'>3.2</span>)
 *   - .marker for source-inserted example/figure/issue numbers (<span class='marker'>Issue 4</span>)
 *   - ::before styled for CSS-generated issue/example/figure numbers:
 *     -> Documents wishing to use this only need to add
 *        figcaption::before,
 *        .caption::before { content: "Figure "  counter(figure) " ";  }
 *        .example::before { content: "Example " counter(example) " "; }
 *        .issue::before   { content: "Issue "   counter(issue) " ";   }
 *
 * Header Stuff (ignore, just don't conflict with these classes)
 *   - .head for the header
 *   - .copyright for the copyright
 *
 * Outdated warning for old specs
 *
 * Miscellaneous
 *   - .overlarge for things that should be as wide as possible, even if
 *     that overflows the body text area. This can be used on an item or
 *     on its container, depending on the effect desired.
 *     Note that this styling basically doesn't help at all when printing,
 *     since A4 paper isn't much wider than the max-width here.
 *     It's better to design things to fit into a narrower measure if possible.
 *
 *   - js-added ToC jump links (see fixup.js)
 *
 ******************************************************************************/

/* color variables included separately for reliability */

/******************************************************************************/
/*                                    Body                                    */
/******************************************************************************/

	html {
	}

	body {
		counter-reset: example figure issue;

		/* Layout */
		max-width: 50em;			  /* limit line length to 50em for readability   */
		margin: 0 auto;				/* center text within page                    */
		padding: 1.6em 1.5em 2em 50px; /* assume 16px font size for downlevel clients */
		padding: 1.6em 1.5em 2em calc(26px + 1.5em); /* leave space for status flag    */

		/* Typography */
		line-height: 1.5;
		font-family: sans-serif;
		widows: 2;
		orphans: 2;
		word-wrap: break-word;
		overflow-wrap: break-word;
		hyphens: auto;

		color: black;
		color: var(--text);
		background: white top left fixed no-repeat;
		background: var(--bg) top left fixed no-repeat;
		background-size: 25px auto;
	}


/******************************************************************************/
/*                         Front Matter & Navigation                          */
/******************************************************************************/

/** Header ********************************************************************/

	div.head { margin-bottom: 1em; }
	div.head hr { border-style: solid; }

	div.head h1 {
		font-weight: bold;
		margin: 0 0 .1em;
		font-size: 220%;
	}

	div.head h2 { margin-bottom: 1.5em;}

/** W3C Logo ******************************************************************/

	.head .logo {
		float: right;
		margin: 0.4rem 0 0.2rem .4rem;
	}

	.head img[src*="logos/W3C"] {
		display: block;
		border: solid #1a5e9a;
		border: solid var(--logo-bg);
		border-width: .65rem .7rem .6rem;
		border-radius: .4rem;
		background: #1a5e9a;
		background: var(--logo-bg);
		color: white;
		color: var(--logo-text);
		font-weight: bold;
	}

	.head a:hover > img[src*="logos/W3C"],
	.head a:focus > img[src*="logos/W3C"] {
		opacity: .8;
	}

	.head a:active > img[src*="logos/W3C"] {
		background: #c00;
		background: var(--logo-active-bg);
		border-color: #c00;
		border-color: var(--logo-active-bg);
	}

	/* see also additional rules in Link Styling section */

/** Copyright *****************************************************************/

	p.copyright,
	p.copyright small { font-size: small; }

/** Back to Top / ToC Toggle **************************************************/

	@media print {
		#toc-nav {
			display: none;
		}
	}
	@media not print {
		#toc-nav {
			position: fixed;
			z-index: 3;
			bottom: 0; left: 0;
			margin: 0;
			min-width: 1.33em;
			border-top-right-radius: 2rem;
			box-shadow: 0 0 2px;
			font-size: 1.5em;
		}
		#toc-nav > a {
			display: block;
			white-space: nowrap;

			height: 1.33em;
			padding: .1em 0.3em;
			margin: 0;

			box-shadow: 0 0 2px;
			border: none;
			border-top-right-radius: 1.33em;

			color: #707070;
			color: var(--tocnav-normal-text);
			background: white;
			background: var(--tocnav-normal-bg);
		}
		#toc-nav > a:hover,
		#toc-nav > a:focus {
			color: black;
			color: var(--tocnav-hover-text);
			background: #f8f8f8;
			background: var(--tocnav-hover-bg);
		}
		#toc-nav > a:active {
			color: #c00;
			color: var(--tocnav-active-text);
			background: white;
			background: var(--tocnav-active-bg);
		}

		#toc-nav > #toc-jump {
			padding-bottom: 2em;
			margin-bottom: -1.9em;
		}

		/* statusbar gets in the way on keyboard focus; remove once browsers fix */
		#toc-nav > a[href="#toc"]:not(:hover):focus:last-child {
			padding-bottom: 1.5rem;
		}

		#toc-nav:not(:hover) > a:not(:focus) > span + span {
			/* Ideally this uses :focus-within on #toc-nav */
			display: none;
		}
		#toc-nav > a > span + span {
			padding-right: 0.2em;
		}
	}

/** ToC Sidebar ***************************************************************/

	/* Floating sidebar */
	@media screen {
		body.toc-sidebar #toc {
			position: fixed;
			top: 0; bottom: 0;
			left: 0;
			width: 23.5em;
			max-width: 80%;
			max-width: calc(100% - 2em - 26px);
			overflow: auto;
			padding: 0 1em;
			padding-left: 42px;
			padding-left: calc(1em + 26px);
			color: black;
			color: var(--tocsidebar-text);
			background: inherit;
			background-color: #f7f8f9;
			background-color: var(--tocsidebar-bg);
			z-index: 1;
			box-shadow: -.1em 0 .25em rgba(0,0,0,.1) inset;
			box-shadow: -.1em 0 .25em var(--tocsidebar-shadow) inset;
		}
		body.toc-sidebar #toc h2 {
			margin-top: .8rem;
			font-variant: small-caps;
			font-variant: all-small-caps;
			text-transform: lowercase;
			font-weight: bold;
			color: gray;
			color: hsla(203,20%,40%,.7);
			color: var(--tocsidebar-heading-text);
		}
		body.toc-sidebar #toc-jump:not(:focus) {
			width: 0;
			height: 0;
			padding: 0;
			position: absolute;
			overflow: hidden;
		}
	}
	/* Hide main scroller when only the ToC is visible anyway */
	@media screen and (max-width: 28em) {
		body.toc-sidebar {
			overflow: hidden;
		}
	}

	/* Sidebar with its own space */
	@media screen and (min-width: 78em) {
		body:not(.toc-inline) #toc {
			position: fixed;
			top: 0; bottom: 0;
			left: 0;
			width: 23.5em;
			overflow: auto;
			padding: 0 1em;
			padding-left: 42px;
			padding-left: calc(1em + 26px);
			color: black;
			color: var(--tocsidebar-text);
			background: inherit;
			background-color: #f7f8f9;
			background-color: var(--tocsidebar-bg);
			z-index: 1;
			box-shadow: -.1em 0 .25em rgba(0,0,0,.1) inset;
			box-shadow: -.1em 0 .25em var(--tocsidebar-shadow) inset;
		}
		body:not(.toc-inline) #toc h2 {
			margin-top: .8rem;
			font-variant: small-caps;
			font-variant: all-small-caps;
			text-transform: lowercase;
			font-weight: bold;
			color: gray;
			color: hsla(203,20%,40%,.7);
			color: var(--tocsidebar-heading-text);
		}

		body:not(.toc-inline) {
			padding-left: 29em;
		}
		/* See also Overflow section at the bottom */

		body:not(.toc-inline) #toc-jump:not(:focus) {
			width: 0;
			height: 0;
			padding: 0;
			position: absolute;
			overflow: hidden;
		}
	}
	@media screen and (min-width: 90em) {
		body:not(.toc-inline) {
			margin: 0 4em;
		}
	}

/******************************************************************************/
/*                                Sectioning                                  */
/******************************************************************************/

/** Headings ******************************************************************/

	h1, h2, h3, h4, h5, h6, dt {
		page-break-after: avoid;
		page-break-inside: avoid;
		font: 100% sans-serif;   /* Reset all font styling to clear out UA styles */
		font-family: inherit;	/* Inherit the font family. */
		line-height: 1.2;		/* Keep wrapped headings compact */
		hyphens: manual;		/* Hyphenated headings look weird */
	}

	h2, h3, h4, h5, h6 {
		margin-top: 3rem;
	}

	h1, h2, h3 {
		color: #005A9C;
		color: var(--heading-text);
	}

	h1 { font-size: 170%; }
	h2 { font-size: 140%; }
	h3 { font-size: 120%; }
	h4 { font-weight: bold; }
	h5 { font-style: italic; }
	h6 { font-variant: small-caps; }
	dt { font-weight: bold; }

/** Subheadings ***************************************************************/

	h1 + h2,
	#profile-and-date {
		/* #profile-and-date is a subtitle in an H2 under the H1 */
		margin-top: 0;
	}
	h2 + h3,
	h3 + h4,
	h4 + h5,
	h5 + h6 {
		margin-top: 1.2em; /* = 1 x line-height */
	}

/** Section divider ***********************************************************/

	:not(.head) > :not(.head) + hr {
		font-size: 1.5em;
		text-align: center;
		margin: 1em auto;
		height: auto;
		color: black;
		color: var(--hr-text);
		border: transparent solid 0;
		background: transparent;
	}
	:not(.head) > hr::before {
		content: "\2727\2003\2003\2727\2003\2003\2727";
	}

/******************************************************************************/
/*                            Paragraphs and Lists                            */
/******************************************************************************/

	p {
		margin: 1em 0;
	}

	dd > p:first-child,
	li > p:first-child {
		margin-top: 0;
	}

	ul, ol {
		margin-left: 0;
		padding-left: 2em;
	}

	li {
		margin: 0.25em 0 0.5em;
		padding: 0;
	}

	dl dd {
		margin: 0 0 .5em 2em;
	}

	.head dd + dd { /* compact for header */
		margin-top: -.5em;
	}

	/* Style for algorithms */
	ol.algorithm ol:not(.algorithm),
	.algorithm > ol ol:not(.algorithm) {
	border-left: 0.5em solid #DEF;
	border-left: 0.5em solid var(--algo-border);
	}

	/* Put nice boxes around each algorithm. */
	[data-algorithm]:not(.heading) {
	 padding: .5em;
	 border: thin solid #ddd;
	 border: thin solid var(--algo-border);
	 border-radius: .5em;
	 margin: .5em calc(-0.5em - 1px);
	}
	[data-algorithm]:not(.heading) > :first-child {
	 margin-top: 0;
	}
	[data-algorithm]:not(.heading) > :last-child {
	 margin-bottom: 0;
	}

	/* Style for switch/case <dl>s */
	dl.switch > dd > ol.only,
	dl.switch > dd > .only > ol {
	margin-left: 0;
	}
	dl.switch > dd > ol.algorithm,
	dl.switch > dd > .algorithm > ol {
	margin-left: -2em;
	}
	dl.switch {
	padding-left: 2em;
	}
	dl.switch > dt {
	text-indent: -1.5em;
	margin-top: 1em;
	}
	dl.switch > dt + dt {
	margin-top: 0;
	}
	dl.switch > dt::before {
	content: '\21AA';
	padding: 0 0.5em 0 0;
	display: inline-block;
	width: 1em;
	text-align: right;
	line-height: 0.5em;
	}

/** Terminology Markup ********************************************************/


/******************************************************************************/
/*                                 Inline Markup                              */
/******************************************************************************/

/** Terminology Markup ********************************************************/
	dfn   { /* Defining instance */
		font-weight: bolder;
	}
	a > i { /* Instance of term */
		font-style: normal;
	}
	dt dfn code, code.idl {
		font-size: inherit;
	}
	dfn var {
		font-style: normal;
	}

/** Change Marking ************************************************************/

	del {
		color: #aa0000;
		color: var(--del-text);
		background: transparent;
		background: var(--del-bg);
		text-decoration: line-through;
	}
	ins {
		color: #006100;
		color: var(--ins-text);
		background: transparent;
		background: var(--ins-bg);
		text-decoration: underline;
	}

	/* for amendments (candidate/proposed changes) */

	.amendment ins, .correction ins, .addition ins,
	ins[class^=c] {
		text-decoration-style: dotted;
	}
	.amendment del, .correction del, .addition del,
	del[class^=c] {
		text-decoration-style: dotted;
	}
	.amendment.proposed ins, .correction.proposed ins, .addition.proposed ins,
	ins[class^=c].proposed {
		text-decoration-style: double;
	}
	.amendment.proposed del, .correction.proposed del, .addition.proposed del,
	del[class^=c].proposed {
		text-decoration-style: double;
	}

/** Miscellaneous improvements to inline formatting ***************************/

	sup {
		vertical-align: super;
		font-size: 80%
	}

/******************************************************************************/
/*                                    Code                                    */
/******************************************************************************/

/** General monospace/pre rules ***********************************************/

	pre, code, samp {
		font-family: Menlo, Consolas, "DejaVu Sans Mono", Monaco, monospace;
		font-size: .9em;
		hyphens: none;
		text-transform: none;
		text-align: left;
		text-align: start;
		font-variant: normal;
		orphans: 3;
		widows: 3;
		page-break-before: avoid;
	}
	pre code,
	code code {
		font-size: 100%;
	}

	pre {
		margin-top: 1em;
		margin-bottom: 1em;
		overflow: auto;
	}

/** Inline Code fragments *****************************************************/

	/* Do something nice. */

/******************************************************************************/
/*                                    Links                                   */
/******************************************************************************/

/** General Hyperlinks ********************************************************/

	/* We hyperlink a lot, so make it less intrusive */
	a[href] {
		color: #034575;
		color: var(--a-normal-text);
		text-decoration: underline #707070;
		text-decoration: underline var(--a-normal-underline);
		text-decoration-skip-ink: none;
	}
	a:visited {
		color: #034575;
		color: var(--a-visited-text);
		text-decoration-color: #bbb;
		text-decoration-color: var(--a-visited-underline);
	}

	/* Indicate interaction with the link */
	a[href]:focus,
	a[href]:hover {
		text-decoration-thickness: 2px;
	}
	a[href]:active {
		color: #c00;
		color: var(--a-active-text);
		text-decoration-color: #c00;
		text-decoration-color: var(--a-active-underline);
	}

	/* Backout above styling for W3C logo */
	.head .logo,
	.head .logo a {
		border: none;
		text-decoration: none;
		background: transparent;
	}

/******************************************************************************/
/*                                    Images                                  */
/******************************************************************************/

	img {
		border-style: none;
	}

	img, svg {
		/* Intentionally not color-scheme aware. */
		background: white;
	}

	/* For autogen numbers, add
	  .caption::before, figcaption::before { content: "Figure " counter(figure) ". "; }
	*/

	figure, .figure, .sidefigure {
		page-break-inside: avoid;
		text-align: center;
		margin: 2.5em 0;
	}
	.figure img,	.sidefigure img,	figure img,
	.figure object, .sidefigure object, figure object {
		max-width: 100%;
		margin: auto;
		height: auto;
	}
	.figure pre, .sidefigure pre, figure pre {
		text-align: left;
		display: table;
		margin: 1em auto;
	}
	.figure table, figure table {
		margin: auto;
	}
	@media screen and (min-width: 20em) {
		.sidefigure {
			float: right;
			width: 50%;
			margin: 0 0 0.5em 0.5em;
		}
	}
	.caption, figcaption, caption {
		font-style: italic;
		font-size: 90%;
	}
	.caption::before, figcaption::before, figcaption > .marker {
		font-weight: bold;
	}
	.caption, figcaption {
		counter-increment: figure;
	}

	/* DL list is indented 2em, but figure inside it is not */
	dd > .figure, dd > figure { margin-left: -2em; }

/******************************************************************************/
/*                             Colored Boxes                                  */
/******************************************************************************/

	.issue, .note, .example, .assertion, .advisement, blockquote,
	.amendment, .correction, .addition {
		margin: 1em auto;
		padding: .5em;
		border: .5em;
		border-left-style: solid;
		page-break-inside: avoid;
	}
	span.issue, span.note {
		padding: .1em .5em .15em;
		border-right-style: solid;
	}

	blockquote > :first-child,
	.note  > p:first-child,
	.issue > p:first-child,
	.amendment > p:first-child,
	.correction > p:first-child,
	.addition > p:first-child {
		margin-top: 0;
	}
	blockquote > :last-child,
	.note  > p:last-child,
	.issue > p:last-child,
	.amendment > p:last-child,
	.correction > p:last-child,
	.addition > p:last-child {
		margin-bottom: 0;
	}


	.issue::before, .issue > .marker,
	.example::before, .example > .marker,
	.note::before, .note > .marker,
	details.note > summary > .marker,
	.amendment::before, .amendment > .marker,
	details.amendment > summary > .marker,
	.addition::before, .addition > .marker,
	addition.amendment > summary > .marker,
	.correction::before, .correction > .marker,
	correction.amendment > summary > .marker
	{
		text-transform: uppercase;
		padding-right: 1em;
	}

	.example::before, .example > .marker {
		display: block;
		padding-right: 0em;
	}

/** Blockquotes ***************************************************************/

	blockquote {
		border-color: silver;
		border-color: var(--blockquote-border);
		background: transparent;
		background: var(--blockquote-bg);
		color: currentcolor;
		color: var(--blockquote-text);
	}

/** Open issue ****************************************************************/

	.issue {
		border-color: #e05252;
		border-color: var(--issue-border);
		background: #fbe9e9;
		background: var(--issue-bg);
		color: black;
		color: var(--issue-text);
		counter-increment: issue;
		overflow: auto;
	}
	.issue::before, .issue > .marker {
		color: #831616;
		color: var(--issueheading-text);
	}
	/* Add .issue::before { content: "Issue " counter(issue) " "; } for autogen numbers,
	  or use class="marker" to mark up the issue number in source. */

/** Example *******************************************************************/

	.example {
		border-color: #e0cb52;
		border-color: var(--example-border);
		background: #fcfaee;
		background: var(--example-bg);
		color: black;
		color: var(--example-text);
		counter-increment: example;
		overflow: auto;
		clear: both;
	}
	.example::before, .example > .marker {
		color: #574b0f;
		color: var(--exampleheading-text);
	}
	/* Add .example::before { content: "Example " counter(example) " "; } for autogen numbers,
	  or use class="marker" to mark up the example number in source. */

/** Non-normative Note ********************************************************/

	.note {
		border-color: #52e052;
		border-color: var(--note-border);
		background: #e9fbe9;
		background: var(--note-bg);
		color: black;
		color: var(--note-text);
		overflow: auto;
	}

	.note::before, .note > .marker,
	details.note > summary {
		color: hsl(120, 70%, 30%);
		color: var(--noteheading-text);
	}
	/* Add .note::before { content: "Note "; } for autogen label,
	  or use class="marker" to mark up the label in source. */

	details.note[open] > summary {
		border-bottom: 1px silver solid;
		border-bottom: 1px var(--notesummary-underline) solid;
	}

/** Assertion Box *************************************************************/
	/*  for assertions in algorithms */

	.assertion {
		border-color: #AAA;
		border-color: var(--assertion-border);
		background: #EEE;
		background: var(--assertion-bg);
		color: black;
		color: var(--assertion-text);
	}

/** Advisement Box ************************************************************/
	/*  for attention-grabbing normative statements */

	.advisement {
		border-color: orange;
		border-color: var(--advisement-border);
		border-style: none solid;
		background: #fec;
		background: var(--advisement-bg);
		color: black;
		color: var(--advisement-text);
	}
	strong.advisement {
		display: block;
		text-align: center;
	}
	.advisement::before, .advisement > .marker {
		color: #b35f00;
		color: var(--advisementheading-text);
	}

/** Amendment Box *************************************************************/

	.amendment, .correction, .addition {
		border-color: #330099;
		border-color: var(--amendment-border);
		background: #F5F0FF;
		background: var(--amendment-bg);
		color: black;
		color: var(--amendment-text);
	}
	.amendment.proposed, .correction.proposed, .addition.proposed {
		border-style: solid;
		border-block-width: 0.25em;
	}
	.amendment::before, .amendment > .marker,
	details.amendment > summary::before, details.amendment > summary > .marker,
	.correction::before, .correction > .marker,
	details.correction > summary::before, details.correction > summary > .marker,
	.addition::before, .addition > .marker,
	details.addition > summary::before, details.addition > summary > .marker {
		color: #220066;
		color: var(--amendmentheading-text);
	}
	.amendment.proposed::before, .amendment.proposed > .marker,
	details.amendment.proposed > summary::before, details.amendment.proposed > summary > .marker,
	.correction.proposed::before, .correction.proposed > .marker,
	details.correction.proposed > summary::before, details.correction.proposed > summary > .marker,
	.addition.proposed::before, .addition.proposed > .marker,
	details.addition.proposed > summary::before, details.addition.proposed > summary > .marker {
		font-weight: bold;
	}

/** Spec Obsoletion Notice ****************************************************/
	/* obnoxious obsoletion notice for older/abandoned specs. */

	details {
		display: block;
	}
	summary {
		font-weight: bolder;
	}

	.annoying-warning:not(details),
	details.annoying-warning:not([open]) > summary,
	details.annoying-warning[open] {
		background: hsla(40,100%,50%,0.95);
		background: var(--warning-bg);
		color: black;
		color: var(--warning-text);
		padding: .75em 1em;
		border: red;
		border: var(--warning-border);
		border-style: solid none;
		box-shadow: 0 2px 8px black;
		text-align: center;
	}
	.annoying-warning :last-child {
		margin-bottom: 0;
	}

@media not print {
	details.annoying-warning[open] {
		position: fixed;
		left: 0;
		right: 0;
		bottom: 2em;
		z-index: 1000;
	}
}

	details.annoying-warning:not([open]) > summary {
		text-align: center;
	}

/** Entity Definition Boxes ***************************************************/

	.def {
		padding: .5em 1em;
		background: #def;
		background: var(--def-bg);
		margin: 1.2em 0;
		border-left: 0.5em solid #8ccbf2;
		border-left: 0.5em solid var(--def-border);
		color: black;
		color: var(--def-text);
	}

/******************************************************************************/
/*                                    Tables                                  */
/******************************************************************************/

	th, td {
		text-align: left;
		text-align: start;
	}

/** Property/Descriptor Definition Tables *************************************/

	table.def {
		/* inherits .def box styling, see above */
		width: 100%;
		border-spacing: 0;
	}

	table.def td,
	table.def th {
		padding: 0.5em;
		vertical-align: baseline;
		border-bottom: 1px solid #bbd7e9;
		border-bottom: 1px solid var(--defrow-border);
	}

	table.def > tbody > tr:last-child th,
	table.def > tbody > tr:last-child td {
		border-bottom: 0;
	}

	table.def th {
		font-style: italic;
		font-weight: normal;
		padding-left: 1em;
		width: 3em;
	}

	/* For when values are extra-complex and need formatting for readability */
	table td.pre {
		white-space: pre-wrap;
	}

	/* A footnote at the bottom of a def table */
	table.def td.footnote {
		padding-top: 0.6em;
	}
	table.def td.footnote::before {
		content: " ";
		display: block;
		height: 0.6em;
		width: 4em;
		border-top: thin solid;
	}

/** Data tables (and properly marked-up index tables) *************************/
	/*
		<table class="data"> highlights structural relationships in a table
		when correct markup is used (e.g. thead/tbody, th vs. td, scope attribute)

		Use class="complex data" for particularly complicated tables --
		(This will draw more lines: busier, but clearer.)

		Use class="long" on table cells with paragraph-like contents
		(This will adjust text alignment accordingly.)
		Alternately use class="longlastcol" on tables, to have the last column assume "long".
	*/

	table {
		word-wrap: normal;
		overflow-wrap: normal;
		hyphens: manual;
	}

	table.data,
	table.index {
		margin: 1em auto;
		border-collapse: collapse;
		border: hidden;
		width: 100%;
	}
	table.data caption,
	table.index caption {
		max-width: 50em;
		margin: 0 auto 1em;
	}

	table.data td,  table.data th,
	table.index td, table.index th {
		padding: 0.5em 1em;
		border-width: 1px;
		border-color: silver;
		border-color: var(--datacell-border);
		border-top-style: solid;
	}

	table.data thead td:empty {
		padding: 0;
		border: 0;
	}

	table.data  thead,
	table.index thead,
	table.data  tbody,
	table.index tbody {
		border-bottom: 2px solid;
	}

	table.data colgroup,
	table.index colgroup {
		border-left: 2px solid;
	}

	table.data  tbody th:first-child,
	table.index tbody th:first-child  {
		border-right: 2px solid;
		border-top: 1px solid silver;
		border-top: 1px solid var(--datacell-border);
		padding-right: 1em;
	}

	table.data th[colspan],
	table.data td[colspan] {
		text-align: center;
	}

	table.complex.data th,
	table.complex.data td {
		border: 1px solid silver;
		border: 1px solid var(--datacell-border);
		text-align: center;
	}

	table.data.longlastcol td:last-child,
	table.data td.long {
		vertical-align: baseline;
		text-align: left;
	}

	table.data img {
		vertical-align: middle;
	}


/*
Alternate table alignment rules

	table.data,
	table.index {
		text-align: center;
	}

	table.data  thead th[scope="row"],
	table.index thead th[scope="row"] {
		text-align: right;
	}

	table.data  tbody th:first-child,
	table.index tbody th:first-child  {
		text-align: right;
	}

Possible extra rowspan handling

	table.data  tbody th[rowspan]:not([rowspan='1']),
	table.index tbody th[rowspan]:not([rowspan='1']),
	table.data  tbody td[rowspan]:not([rowspan='1']),
	table.index tbody td[rowspan]:not([rowspan='1']) {
		border-left: 1px solid silver;
	}

	table.data  tbody th[rowspan]:first-child,
	table.index tbody th[rowspan]:first-child,
	table.data  tbody td[rowspan]:first-child,
	table.index tbody td[rowspan]:first-child{
		border-left: 0;
		border-right: 1px solid silver;
	}
*/

/******************************************************************************/
/*                                  Indices                                   */
/******************************************************************************/


/** Table of Contents *********************************************************/

	.toc a {
		/* More spacing; use padding to make it part of the click target. */
		padding: 0.1rem 1px 0;
		/* Larger, more consistently-sized click target */
		display: block;
		/* Switch to using border-bottom for underlines */
		text-decoration: none;
		border-bottom: 1px solid;
		/* Reverse color scheme */
		color: black;
		color: var(--toclink-text);
		border-color: #3980b5;
		border-color: var(--toclink-underline);
	}
	.toc a:visited {
		color: black;
		color: var(--toclink-visited-text);
		border-color: #054572;
		border-color: var(--toclink-visited-underline);
	}
	.toc a:focus,
	.toc a:hover {
		background: rgba(75%, 75%, 75%, .25);
		background: var(--a-hover-bg);
		border-bottom-width: 3px;
		margin-bottom: -2px;
	}
	.toc a:not(:focus):not(:hover) {
		/* Allow colors to cascade through from link styling */
		border-bottom-color: transparent;
	}

	.toc, .toc ol, .toc ul, .toc li {
		list-style: none; /* Numbers must be inlined into source */
		/* because generated content isn't search/selectable and markers can't do multilevel yet */
		margin:  0;
		padding: 0;
	}
	.toc {
		line-height: 1.1em;
	}

	/* ToC not indented until third level, but font style & margins show hierarchy */
	.toc > li			{ font-weight: bold;   }
	.toc > li li		 { font-weight: normal; }
	.toc > li li li	  { font-size:   95%;	}
	.toc > li li li li	{ font-size:   90%;	}
	.toc > li li li li li { font-size:   85%;	}

	/* @supports not (display:grid) { */
		.toc > li			{ margin: 1.5rem 0;	}
		.toc > li li		 { margin: 0.3rem 0;	}
		.toc > li li li	  { margin-left: 2rem;   }

		/* Section numbers in a column of their own */
		.toc .secno {
			float: left;
			width: 4rem;
			white-space: nowrap;
		}
		.toc > li li li li .secno { font-size: 85%; }
		.toc > li li li li li .secno { font-size: 100%; }

		.toc li {
			clear: both;
		}

		:not(li) > .toc			 { margin-left:  5rem; }
		.toc .secno				 { margin-left: -5rem; }
		.toc > li li li .secno	  { margin-left: -7rem; }
		.toc > li li li li .secno	{ margin-left: -9rem; }
		.toc > li li li li li .secno { margin-left: -11rem; }

		/* Tighten up indentation in narrow ToCs */
		@media (max-width: 30em) {
			:not(li) > .toc			 { margin-left:  4rem; }
			.toc .secno				 { margin-left: -4rem; }
			.toc > li li li			 { margin-left:  1rem; }
			.toc > li li li .secno	  { margin-left: -5rem; }
			.toc > li li li li .secno	{ margin-left: -6rem; }
			.toc > li li li li li .secno { margin-left: -7rem; }
		}
		/* Loosen it on wide screens */
		@media screen and (min-width: 78em) {
			body:not(.toc-inline) :not(li) > .toc			 { margin-left:  4rem; }
			body:not(.toc-inline) .toc .secno				 { margin-left: -4rem; }
			body:not(.toc-inline) .toc > li li li			 { margin-left:  1rem; }
			body:not(.toc-inline) .toc > li li li .secno	  { margin-left: -5rem; }
			body:not(.toc-inline) .toc > li li li li .secno	{ margin-left: -6rem; }
			body:not(.toc-inline) .toc > li li li li li .secno { margin-left: -7rem; }
	}
	/* } */

	@supports (display:grid) and (display:contents) {
		/* Use #toc over .toc to override non-@supports rules. */
		#toc {
			display: grid;
			align-content: start;
			grid-template-columns: auto 1fr;
			grid-column-gap: 1rem;
			column-gap: 1rem;
			grid-row-gap: .6rem;
			row-gap: .6rem;
		}
		#toc h2 {
			grid-column: 1 / -1;
			margin-bottom: 0;
		}
		#toc ol,
		#toc li,
		#toc a {
			display: contents;
			/* Switch <a> to subgrid when supported */
		}
		#toc span {
			margin: 0;
		}
		#toc > .toc > li > a > span {
			/* The spans of the top-level list,
			  comprising the first items of each top-level section. */
			margin-top: 1.1rem;
		}
		#toc#toc .secno { /* Ugh, need more specificity to override base.css */
			grid-column: 1;
			width: auto;
			margin-left: 0;
		}
		#toc .content {
			grid-column: 2;
			width: auto;
			margin-right: 1rem;
			border-bottom: 3px solid transparent;
			margin-bottom: -3px;
		}
		#toc .content:hover,
		#toc .content:focus {
			background: rgba(75%, 75%, 75%, .25);
			background: var(--a-hover-bg);
			border-bottom-color: #054572;
			border-bottom-color: var(--toclink-underline);
		}
		#toc li li li .content {
			margin-left: 1rem;
		}
		#toc li li li li .content {
			margin-left: 2rem;
		}
	}


/** Index *********************************************************************/

	/* Index Lists: Layout */
	ul.index	  { margin-left: 0; columns: 15em; text-indent: 1em hanging; }
	ul.index li	{ margin-left: 0; list-style: none; break-inside: avoid; }
	ul.index li li { margin-left: 1em; }
	ul.index dl	{ margin-top: 0; }
	ul.index dt	{ margin: .2em 0 .2em 20px;}
	ul.index dd	{ margin: .2em 0 .2em 40px;}
	/* Index Lists: Typography */
	ul.index ul,
	ul.index dl { font-size: smaller; }
	@media not print {
		ul.index li a + span {
			white-space: nowrap;
			color: transparent; }
		ul.index li a:hover + span,
		ul.index li a:focus + span {
			color: #707070;
			color: var(--indexinfo-text);
		}
	}

/** Index Tables *****************************************************/
	/* See also the data table styling section, which this effectively subclasses */

	table.index {
		font-size: small;
		border-collapse: collapse;
		border-spacing: 0;
		text-align: left;
		margin: 1em 0;
	}

	table.index td,
	table.index th {
		padding: 0.4em;
	}

	table.index tr:hover td:not([rowspan]),
	table.index tr:hover th:not([rowspan]) {
		color: black;
		color: var(--indextable-hover-text);
		background: #f7f8f9;
		background: var(--indextable-hover-bg);
	}

	/* The link in the first column in the property table (formerly a TD) */
	table.index th:first-child a {
		font-weight: bold;
	}

/** Outdated warning **********************************************************/

.outdated-spec {
	color: black;
	color: var(--outdatedspec-text);
	background-color: rgba(0,0,0,0.5);
	background-color: var(--outdatedspec-bg);
}

.outdated-warning {
	position: fixed;
	bottom: 50%;
	left: 0;
	right: 0;
	margin: 0 auto;
	width: 50%;
	background: maroon;
	background: var(--outdated-bg);
	color: white;
	color: var(--outdated-text);
	border-radius: 1em;
	box-shadow: 0 0 1em red;
	box-shadow: 0 0 1em var(--outdated-shadow);
	padding: 2em;
	text-align: center;
	z-index: 2;
}

.outdated-warning a {
	color: currentcolor;
	background: transparent;
}

.edited-rec-warning {
	background: darkorange;
	background: var(--editedrec-bg);
	box-shadow: 0 0 1em;
}

.outdated-warning button {
	color: var(--outdated-text);
	border-radius: 1em;
	box-shadow: 0 0 1em red;
	box-shadow: 0 0 1em var(--outdated-shadow);
	padding: 2em;
	text-align: center;
	z-index: 2;
}

.outdated-warning a {
	color: currentcolor;
	background: transparent;
}

.edited-rec-warning {
	background: darkorange;
	background: var(--editedrec-bg);
	box-shadow: 0 0 1em;
}

.outdated-warning button {
	position: absolute;
	top: 0;
	right:0;
	margin: 0;
	border: 0;
	padding: 0.25em 0.5em;
	background: transparent;
	color: white;
	color: var(--outdated-text);
	font:1em sans-serif;
	text-align:center;
}

.outdated-warning span {
	display: block;
}

.outdated-collapsed {
	bottom: 0;
	border-radius: 0;
	width: 100%;
	padding: 0;
}

/******************************************************************************/
/*                                    Print                                   */
/******************************************************************************/

	@media print {
		/* Pages have their own margins. */
		html {
			margin: 0;
		}
		/* Serif for print. */
		body {
			font-family: serif;
		}

		.outdated-warning {
			position: absolute;
			border-style: solid;
			border-color: red;
		}

		.outdated-warning input {
			display: none;
		}
	}
	@page {
		margin: 1.5cm 1.1cm;
	}



/******************************************************************************/
/*                             Overflow Control                               */
/******************************************************************************/

	.figure .caption, .sidefigure .caption, figcaption {
		/* in case figure is overlarge, limit caption to 50em */
		max-width: 50rem;
		margin-left: auto;
		margin-right: auto;
	}
	.overlarge {
		/* Magic to create good item positioning:
		  "content column" is 50ems wide at max; less on smaller screens.
		  Extra space (after ToC + content) is empty on the right.

		  1. When item < content column, centers item in column.
		  2. When content < item < available, left-aligns.
		  3. When item > available, fills available + scroll bar.
		*/
		display: grid;
		grid-template-columns: minmax(0, 50em);
	}
	.overlarge > table {
		/* limit preferred width of table */
		max-width: 50em;
		margin-left: auto;
		margin-right: auto;
	}

	@media (min-width: 55em) {
		.overlarge {
			margin-right: calc(13px + 26.5rem - 50vw);
			max-width: none;
		}
	}
	@media screen and (min-width: 78em) {
		body:not(.toc-inline) .overlarge {
			/* 30.5em body padding 50em content area */
			margin-right: calc(40em - 50vw) !important;
		}
	}
	@media screen and (min-width: 90em) {
		body:not(.toc-inline) .overlarge {
			/* 4em html margin 30.5em body padding 50em content area */
			margin-right: calc(84.5em - 100vw) !important;
		}
	}

	@media not print {
		.overlarge {
			overflow-x: auto;
			/* See Lea Verou's explanation background-attachment:
			* http://lea.verou.me/2012/04/background-attachment-local/
			*
			background: top left  / 4em 100% linear-gradient(to right,  #ffffff, rgba(255, 255, 255, 0)) local,
						top right / 4em 100% linear-gradient(to left, #ffffff, rgba(255, 255, 255, 0)) local,
						top left  / 1em 100% linear-gradient(to right,  #c3c3c5, rgba(195, 195, 197, 0)) scroll,
						top right / 1em 100% linear-gradient(to left, #c3c3c5, rgba(195, 195, 197, 0)) scroll,
						white;
			background-repeat: no-repeat;
			*/
		}
	}
</style>
  <meta content="Bikeshed version 742f3d674, updated Mon Nov 4 14:56:54 2024 -0800" name="generator">
  <link href="http://www.opencaesar.io/oml-tutorials/" rel="canonical">
  <meta content="0fafb3d1989cc40041a3073a8cd7123115249335" name="revision">
  <meta content="dark light" name="color-scheme">
<style>
#table1 {
  font-family: Arial, Helvetica, sans-serif;
  border-collapse: collapse;
  border: 1px solid;
  padding: 10px;
  box-shadow: 5px 10px 18px #888888;
}

#table1 td, #table th {
  border: 1px solid #ddd;
  padding: 8px;
}

#table1 tr:nth-child(even){background-color: #f2f2f2;}

#table1 tr:hover {background-color: #ddd;}

#table1 th {
  padding-top: 12px;
  padding-bottom: 12px;
  text-align: left;
  padding: 8px;
  background-color: #04AA6D;
  color: white;
}
</style>
<style>
.node circle {
fill: #fff;
stroke: steelblue;
stroke-width: 3px;
}
.node text {
font: 12px sans-serif;
}
.link {
fill: none;
stroke: #ccc;
stroke-width: 1px;
}
</style>
<style>
.node {
		cursor: pointer;
	}

.node circle {
  fill: #fff;
  stroke: steelblue;
  stroke-width: 3px;
}

.node text {
  font: 12px sans-serif;
}

.link {
  fill: none;
  stroke: #ccc;
  stroke-width: 2px;
}

#table3 {
  font-family: Arial, Helvetica, sans-serif;
  border-collapse: collapse;
  border: 1px solid;
  padding: 10px;
  box-shadow: 5px 10px 18px #888888;
}

#table3 td, #table th {
  border: 1px solid #ddd;
  padding: 8px;
}

#table3 tr:nth-child(even){background-color: #f2f2f2;}

#table3 tr:hover {background-color: #ddd;}

#table3 th {
  padding-top: 12px;
  padding-bottom: 12px;
  text-align: left;
  padding: 8px;
  background-color: #04AA6D;
  color: white;
}
</style>
<style>
a[data-link-type=biblio] {
	white-space: pre-wrap;
}
table.def th {
	white-space: nowrap;
}
table.def ul {
	padding-left: 1em;
}
table.def dfn code {
	font-family: sans-serif;
	color: #005A9C;
}
code {
  color:red; 
}
</style>
<style>/* Boilerplate: style-autolinks */
.css.css, .property.property, .descriptor.descriptor {
    color: var(--a-normal-text);
    font-size: inherit;
    font-family: inherit;
}
.css::before, .property::before, .descriptor::before {
    content: "‘";
}
.css::after, .property::after, .descriptor::after {
    content: "’";
}
.property, .descriptor {
    /* Don't wrap property and descriptor names */
    white-space: nowrap;
}
.type { /* CSS value <type> */
    font-style: italic;
}
pre .property::before, pre .property::after {
    content: "";
}
[data-link-type="property"]::before,
[data-link-type="propdesc"]::before,
[data-link-type="descriptor"]::before,
[data-link-type="value"]::before,
[data-link-type="function"]::before,
[data-link-type="at-rule"]::before,
[data-link-type="selector"]::before,
[data-link-type="maybe"]::before {
    content: "‘";
}
[data-link-type="property"]::after,
[data-link-type="propdesc"]::after,
[data-link-type="descriptor"]::after,
[data-link-type="value"]::after,
[data-link-type="function"]::after,
[data-link-type="at-rule"]::after,
[data-link-type="selector"]::after,
[data-link-type="maybe"]::after {
    content: "’";
}

[data-link-type].production::before,
[data-link-type].production::after,
.prod [data-link-type]::before,
.prod [data-link-type]::after {
    content: "";
}

[data-link-type=element],
[data-link-type=element-attr] {
    font-family: Menlo, Consolas, "DejaVu Sans Mono", monospace;
    font-size: .9em;
}
[data-link-type=element]::before { content: "<" }
[data-link-type=element]::after  { content: ">" }

[data-link-type=biblio] {
    white-space: pre;
}

@media (prefers-color-scheme: dark) {
    :root {
        --selflink-text: black;
        --selflink-bg: silver;
        --selflink-hover-text: white;
    }
}
</style>
<style>/* Boilerplate: style-colors */
/* Any --*-text not paired with a --*-bg is assumed to have a transparent bg */
:root {
    color-scheme: light dark;

    --text: black;
    --bg: white;

    --unofficial-watermark: url(https://www.w3.org/StyleSheets/TR/2016/logos/UD-watermark);

    --logo-bg: #1a5e9a;
    --logo-active-bg: #c00;
    --logo-text: white;

    --tocnav-normal-text: #707070;
    --tocnav-normal-bg: var(--bg);
    --tocnav-hover-text: var(--tocnav-normal-text);
    --tocnav-hover-bg: #f8f8f8;
    --tocnav-active-text: #c00;
    --tocnav-active-bg: var(--tocnav-normal-bg);

    --tocsidebar-text: var(--text);
    --tocsidebar-bg: #f7f8f9;
    --tocsidebar-shadow: rgba(0,0,0,.1);
    --tocsidebar-heading-text: hsla(203,20%,40%,.7);

    --toclink-text: var(--text);
    --toclink-underline: #3980b5;
    --toclink-visited-text: var(--toclink-text);
    --toclink-visited-underline: #054572;

    --heading-text: #005a9c;

    --hr-text: var(--text);

    --algo-border: #def;

    --del-text: red;
    --del-bg: transparent;
    --ins-text: #080;
    --ins-bg: transparent;

    --a-normal-text: #034575;
    --a-normal-underline: #bbb;
    --a-visited-text: var(--a-normal-text);
    --a-visited-underline: #707070;
    --a-hover-bg: rgba(75%, 75%, 75%, .25);
    --a-active-text: #c00;
    --a-active-underline: #c00;

    --blockquote-border: silver;
    --blockquote-bg: transparent;
    --blockquote-text: currentcolor;

    --issue-border: #e05252;
    --issue-bg: #fbe9e9;
    --issue-text: var(--text);
    --issueheading-text: #831616;

    --example-border: #e0cb52;
    --example-bg: #fcfaee;
    --example-text: var(--text);
    --exampleheading-text: #574b0f;

    --note-border: #52e052;
    --note-bg: #e9fbe9;
    --note-text: var(--text);
    --noteheading-text: hsl(120, 70%, 30%);
    --notesummary-underline: silver;

    --assertion-border: #aaa;
    --assertion-bg: #eee;
    --assertion-text: black;

    --advisement-border: orange;
    --advisement-bg: #fec;
    --advisement-text: var(--text);
    --advisementheading-text: #b35f00;

    --warning-border: red;
    --warning-bg: hsla(40,100%,50%,0.95);
    --warning-text: var(--text);

    --amendment-border: #330099;
    --amendment-bg: #F5F0FF;
    --amendment-text: var(--text);
    --amendmentheading-text: #220066;

    --def-border: #8ccbf2;
    --def-bg: #def;
    --def-text: var(--text);
    --defrow-border: #bbd7e9;

    --datacell-border: silver;

    --indexinfo-text: #707070;

    --indextable-hover-text: black;
    --indextable-hover-bg: #f7f8f9;

    --outdatedspec-bg: rgba(0, 0, 0, .5);
    --outdatedspec-text: black;
    --outdated-bg: maroon;
    --outdated-text: white;
    --outdated-shadow: red;

    --editedrec-bg: darkorange;
}

@media (prefers-color-scheme: dark) {
    :root {
        --text: #ddd;
        --bg: black;

        --unofficial-watermark: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='400' height='400'%3E%3Cg fill='%23100808' transform='translate(200 200) rotate(-45) translate(-200 -200)' stroke='%23100808' stroke-width='3'%3E%3Ctext x='50%25' y='220' style='font: bold 70px sans-serif; text-anchor: middle; letter-spacing: 6px;'%3EUNOFFICIAL%3C/text%3E%3Ctext x='50%25' y='305' style='font: bold 70px sans-serif; text-anchor: middle; letter-spacing: 6px;'%3EDRAFT%3C/text%3E%3C/g%3E%3C/svg%3E");

        --logo-bg: #1a5e9a;
        --logo-active-bg: #c00;
        --logo-text: white;

        --tocnav-normal-text: #999;
        --tocnav-normal-bg: var(--bg);
        --tocnav-hover-text: var(--tocnav-normal-text);
        --tocnav-hover-bg: #080808;
        --tocnav-active-text: #f44;
        --tocnav-active-bg: var(--tocnav-normal-bg);

        --tocsidebar-text: var(--text);
        --tocsidebar-bg: #080808;
        --tocsidebar-shadow: rgba(255,255,255,.1);
        --tocsidebar-heading-text: hsla(203,20%,40%,.7);

        --toclink-text: var(--text);
        --toclink-underline: #6af;
        --toclink-visited-text: var(--toclink-text);
        --toclink-visited-underline: #054572;

        --heading-text: #8af;

        --hr-text: var(--text);

        --algo-border: #456;

        --del-text: #f44;
        --del-bg: transparent;
        --ins-text: #4a4;
        --ins-bg: transparent;

        --a-normal-text: #6af;
        --a-normal-underline: #555;
        --a-visited-text: var(--a-normal-text);
        --a-visited-underline: var(--a-normal-underline);
        --a-hover-bg: rgba(25%, 25%, 25%, .2);
        --a-active-text: #f44;
        --a-active-underline: var(--a-active-text);

        --borderedblock-bg: rgba(255, 255, 255, .05);

        --blockquote-border: silver;
        --blockquote-bg: var(--borderedblock-bg);
        --blockquote-text: currentcolor;

        --issue-border: #e05252;
        --issue-bg: var(--borderedblock-bg);
        --issue-text: var(--text);
        --issueheading-text: hsl(0deg, 70%, 70%);

        --example-border: hsl(50deg, 90%, 60%);
        --example-bg: var(--borderedblock-bg);
        --example-text: var(--text);
        --exampleheading-text: hsl(50deg, 70%, 70%);

        --note-border: hsl(120deg, 100%, 35%);
        --note-bg: var(--borderedblock-bg);
        --note-text: var(--text);
        --noteheading-text: hsl(120, 70%, 70%);
        --notesummary-underline: silver;

        --assertion-border: #444;
        --assertion-bg: var(--borderedblock-bg);
        --assertion-text: var(--text);

        --advisement-border: orange;
        --advisement-bg: #222218;
        --advisement-text: var(--text);
        --advisementheading-text: #f84;

        --warning-border: red;
        --warning-bg: hsla(40,100%,20%,0.95);
        --warning-text: var(--text);

        --amendment-border: #330099;
        --amendment-bg: #080010;
        --amendment-text: var(--text);
        --amendmentheading-text: #cc00ff;

        --def-border: #8ccbf2;
        --def-bg: #080818;
        --def-text: var(--text);
        --defrow-border: #136;

        --datacell-border: silver;

        --indexinfo-text: #aaa;

        --indextable-hover-text: var(--text);
        --indextable-hover-bg: #181818;

        --outdatedspec-bg: rgba(255, 255, 255, .5);
        --outdatedspec-text: black;
        --outdated-bg: maroon;
        --outdated-text: white;
        --outdated-shadow: red;

        --editedrec-bg: darkorange;
    }
    /* In case a transparent-bg image doesn't expect to be on a dark bg,
       which is quite common in practice... */
    img { background: white; }
}
</style>
<style>/* Boilerplate: style-counters */
body {
    counter-reset: example figure issue;
}
.issue {
    counter-increment: issue;
}
.issue:not(.no-marker)::before {
    content: "Issue " counter(issue);
}

.example {
    counter-increment: example;
}
.example:not(.no-marker)::before {
    content: "Example " counter(example);
}
.invalid.example:not(.no-marker)::before,
.illegal.example:not(.no-marker)::before {
    content: "Invalid Example" counter(example);
}

figcaption {
    counter-increment: figure;
}
figcaption:not(.no-marker)::before {
    content: "Figure " counter(figure) " ";
}
</style>
<style>/* Boilerplate: style-dfn-panel */
:root {
    --dfnpanel-bg: #ddd;
    --dfnpanel-text: var(--text);
    --dfnpanel-target-bg: #ffc;
    --dfnpanel-target-outline: orange;
}
@media (prefers-color-scheme: dark) {
    :root {
        --dfnpanel-bg: #222;
        --dfnpanel-text: var(--text);
        --dfnpanel-target-bg: #333;
        --dfnpanel-target-outline: silver;
    }
}
.dfn-panel {
    position: absolute;
    z-index: 35;
    width: 20em;
    width: 300px;
    height: auto;
    max-height: 500px;
    overflow: auto;
    padding: 0.5em 0.75em;
    font: small Helvetica Neue, sans-serif, Droid Sans Fallback;
    background: var(--dfnpanel-bg);
    color: var(--dfnpanel-text);
    border: outset 0.2em;
    white-space: normal; /* in case it's moved into a pre */
}
.dfn-panel:not(.on) { display: none; }
.dfn-panel * { margin: 0; padding: 0; text-indent: 0; }
.dfn-panel > b { display: block; }
.dfn-panel a { color: var(--dfnpanel-text); }
.dfn-panel a:not(:hover) { text-decoration: none !important; border-bottom: none !important; }
.dfn-panel a:focus {
    outline: 5px auto Highlight;
    outline: 5px auto -webkit-focus-ring-color;
}
.dfn-panel > b + b { margin-top: 0.25em; }
.dfn-panel ul { padding: 0 0 0 1em; list-style: none; }
.dfn-panel li a {
    max-width: calc(300px - 1.5em - 1em);
    overflow: hidden;
    text-overflow: ellipsis;
}

.dfn-panel.activated {
    display: inline-block;
    position: fixed;
    left: 8px;
    bottom: 2em;
    margin: 0 auto;
    max-width: calc(100vw - 1.5em - .4em - .5em);
    max-height: 30vh;
    transition: left 1s ease-out, bottom 1s ease-out;
}

.dfn-panel .link-item:hover {
    text-decoration: underline;
}
.dfn-panel .link-item .copy-icon {
    opacity: 0;
}
.dfn-panel .link-item:hover .copy-icon,
.dfn-panel .link-item .copy-icon:focus {
    opacity: 1;
}

.dfn-panel .copy-icon {
    display: inline-block;
    margin-right: 0.5em;
    width: 0.85em;
    height: 1em;
    border-radius: 3px;
    background-color: #ccc;
    cursor: pointer;
}

.dfn-panel .copy-icon .icon {
    width: 100%;
    height: 100%;
    background-color: #fff;
    display: flex;
    justify-content: center;
    align-items: center;
    position: relative;
}

.dfn-panel .copy-icon .icon::before {
    content: "";
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    border: 1px solid black;
    background-color: #ccc;
    opacity: 0.25;
    transform: translate(3px, -3px);
}

.dfn-panel .copy-icon:active .icon::before {
    opacity: 1;
}

.dfn-paneled[role="button"] { cursor: help; }

.highlighted {
    animation: target-fade 3s;
}

@keyframes target-fade {
    from {
        background-color: var(--dfnpanel-target-bg);
        outline: 5px solid var(--dfnpanel-target-outline);
    }
    to {
        color: var(--a-normal-text);
        background-color: transparent;
        outline: transparent;
    }
}
</style>
<style>/* Boilerplate: style-issues */
a[href].issue-return {
    float: right;
    float: inline-end;
    color: var(--issueheading-text);
    font-weight: bold;
    text-decoration: none;
}
</style>
<style>/* Boilerplate: style-line-highlighting */
:root {
    --highlight-hover-bg: rgba(0, 0, 0, .05);
}
.line-numbered {
    display: grid !important;
    grid-template-columns: min-content 1fr;
    grid-auto-flow: rows;
}
.line-numbered > *,
.line-numbered::before,
.line-numbered::after {
    grid-column: 1/-1;
}
.line-no {
    grid-column: 1;
    color: gray;
}
.line {
    grid-column: 2;
}
.line.highlight-line {
    background: var(--highlight-hover-bg);
}
.line-no.highlight-line {
    background: var(--highlight-hover-bg);
    color: #444;
    font-weight: bold;
}
.line-no.highlight-line[data-line]::before {
    padding: 0 .5em 0 .1em;
    content: attr(data-line);
}
.line-no.highlight-line[data-line-end]::after {
    padding: 0 .5em 0 .1em;
    content: attr(data-line-end);
}

@media (prefers-color-scheme: dark) {
    :root {
        --highlight-hover-bg: rgba(255, 255, 255, .05);
    }
}
</style>
<style>/* Boilerplate: style-md-lists */
/* This is a weird hack for me not yet following the commonmark spec
   regarding paragraph and lists. */
[data-md] > :first-child {
    margin-top: 0;
}
[data-md] > :last-child {
    margin-bottom: 0;
}
</style>
<style>/* Boilerplate: style-ref-hints */
:root {
    --ref-hint-bg: #ddd;
    --ref-hint-text: var(--text);
}
@media (prefers-color-scheme: dark) {
    :root {
        --ref-hint-bg: #222;
        --ref-hint-text: var(--text);
    }
}

.ref-hint {
    display: inline-block;
    position: absolute;
    z-index: 35;
    width: 20em;
    width: 300px;
    height: auto;
    max-height: 500px;
    overflow: auto;
    padding: 0.5em 0.5em;
    font: small Helvetica Neue, sans-serif, Droid Sans Fallback;
    background: var(--ref-hint-bg);
    color: var(--ref-hint-text);
    border: outset 0.2em;
    white-space: normal; /* in case it's moved into a pre */
}

.ref-hint * { margin: 0; padding: 0; text-indent: 0; }

.ref-hint ul { padding: 0 0 0 1em; list-style: none; }
</style>
<style>/* Boilerplate: style-selflinks */
:root {
    --selflink-text: white;
    --selflink-bg: gray;
    --selflink-hover-text: black;
}
.heading, .issue, .note, .example, li, dt {
    position: relative;
}
a.self-link {
    position: absolute;
    top: 0;
    left: calc(-1 * (3.5rem - 26px));
    width: calc(3.5rem - 26px);
    height: 2em;
    text-align: center;
    border: none;
    transition: opacity .2s;
    opacity: .5;
}
a.self-link:hover {
    opacity: 1;
}
.heading > a.self-link {
    font-size: 83%;
}
.example > a.self-link,
.note > a.self-link,
.issue > a.self-link {
    /* These blocks are overflow:auto, so positioning outside
       doesn't work. */
    left: auto;
    right: 0;
}
li > a.self-link {
    left: calc(-1 * (3.5rem - 26px) - 2em);
}
dfn > a.self-link {
    top: auto;
    left: auto;
    opacity: 0;
    width: 1.5em;
    height: 1.5em;
    background: var(--selflink-bg);
    color: var(--selflink-text);
    font-style: normal;
    transition: opacity .2s, background-color .2s, color .2s;
}
dfn:hover > a.self-link {
    opacity: 1;
}
dfn > a.self-link:hover {
    color: var(--selflink-hover-text);
}

a.self-link::before            { content: "¶"; }
.heading > a.self-link::before { content: "§"; }
dfn > a.self-link::before      { content: "#"; }
</style>
<style>/* Boilerplate: style-syntax-highlighting */
code.highlight { padding: .1em; border-radius: .3em; }
pre.highlight, pre > code.highlight { display: block; padding: 1em; margin: .5em 0; overflow: auto; border-radius: 0; }

.highlight:not(.idl) { background: rgba(0, 0, 0, .03); }
c-[a] { color: #990055 } /* Keyword.Declaration */
c-[b] { color: #990055 } /* Keyword.Type */
c-[c] { color: #708090 } /* Comment */
c-[d] { color: #708090 } /* Comment.Multiline */
c-[e] { color: #0077aa } /* Name.Attribute */
c-[f] { color: #669900 } /* Name.Tag */
c-[g] { color: #222222 } /* Name.Variable */
c-[k] { color: #990055 } /* Keyword */
c-[l] { color: #000000 } /* Literal */
c-[m] { color: #000000 } /* Literal.Number */
c-[n] { color: #0077aa } /* Name */
c-[o] { color: #999999 } /* Operator */
c-[p] { color: #999999 } /* Punctuation */
c-[s] { color: #a67f59 } /* Literal.String */
c-[t] { color: #a67f59 } /* Literal.String.Single */
c-[u] { color: #a67f59 } /* Literal.String.Double */
c-[cp] { color: #708090 } /* Comment.Preproc */
c-[c1] { color: #708090 } /* Comment.Single */
c-[cs] { color: #708090 } /* Comment.Special */
c-[kc] { color: #990055 } /* Keyword.Constant */
c-[kn] { color: #990055 } /* Keyword.Namespace */
c-[kp] { color: #990055 } /* Keyword.Pseudo */
c-[kr] { color: #990055 } /* Keyword.Reserved */
c-[ld] { color: #000000 } /* Literal.Date */
c-[nc] { color: #0077aa } /* Name.Class */
c-[no] { color: #0077aa } /* Name.Constant */
c-[nd] { color: #0077aa } /* Name.Decorator */
c-[ni] { color: #0077aa } /* Name.Entity */
c-[ne] { color: #0077aa } /* Name.Exception */
c-[nf] { color: #0077aa } /* Name.Function */
c-[nl] { color: #0077aa } /* Name.Label */
c-[nn] { color: #0077aa } /* Name.Namespace */
c-[py] { color: #0077aa } /* Name.Property */
c-[ow] { color: #999999 } /* Operator.Word */
c-[mb] { color: #000000 } /* Literal.Number.Bin */
c-[mf] { color: #000000 } /* Literal.Number.Float */
c-[mh] { color: #000000 } /* Literal.Number.Hex */
c-[mi] { color: #000000 } /* Literal.Number.Integer */
c-[mo] { color: #000000 } /* Literal.Number.Oct */
c-[sb] { color: #a67f59 } /* Literal.String.Backtick */
c-[sc] { color: #a67f59 } /* Literal.String.Char */
c-[sd] { color: #a67f59 } /* Literal.String.Doc */
c-[se] { color: #a67f59 } /* Literal.String.Escape */
c-[sh] { color: #a67f59 } /* Literal.String.Heredoc */
c-[si] { color: #a67f59 } /* Literal.String.Interpol */
c-[sx] { color: #a67f59 } /* Literal.String.Other */
c-[sr] { color: #a67f59 } /* Literal.String.Regex */
c-[ss] { color: #a67f59 } /* Literal.String.Symbol */
c-[vc] { color: #0077aa } /* Name.Variable.Class */
c-[vg] { color: #0077aa } /* Name.Variable.Global */
c-[vi] { color: #0077aa } /* Name.Variable.Instance */
c-[il] { color: #000000 } /* Literal.Number.Integer.Long */

@media (prefers-color-scheme: dark) {
    .highlight:not(.idl) { background: rgba(255, 255, 255, .05); }

    c-[a] { color: #d33682 } /* Keyword.Declaration */
    c-[b] { color: #d33682 } /* Keyword.Type */
    c-[c] { color: #2aa198 } /* Comment */
    c-[d] { color: #2aa198 } /* Comment.Multiline */
    c-[e] { color: #268bd2 } /* Name.Attribute */
    c-[f] { color: #b58900 } /* Name.Tag */
    c-[g] { color: #cb4b16 } /* Name.Variable */
    c-[k] { color: #d33682 } /* Keyword */
    c-[l] { color: #657b83 } /* Literal */
    c-[m] { color: #657b83 } /* Literal.Number */
    c-[n] { color: #268bd2 } /* Name */
    c-[o] { color: #657b83 } /* Operator */
    c-[p] { color: #657b83 } /* Punctuation */
    c-[s] { color: #6c71c4 } /* Literal.String */
    c-[t] { color: #6c71c4 } /* Literal.String.Single */
    c-[u] { color: #6c71c4 } /* Literal.String.Double */
    c-[ch] { color: #2aa198 } /* Comment.Hashbang */
    c-[cp] { color: #2aa198 } /* Comment.Preproc */
    c-[cpf] { color: #2aa198 } /* Comment.PreprocFile */
    c-[c1] { color: #2aa198 } /* Comment.Single */
    c-[cs] { color: #2aa198 } /* Comment.Special */
    c-[kc] { color: #d33682 } /* Keyword.Constant */
    c-[kn] { color: #d33682 } /* Keyword.Namespace */
    c-[kp] { color: #d33682 } /* Keyword.Pseudo */
    c-[kr] { color: #d33682 } /* Keyword.Reserved */
    c-[ld] { color: #657b83 } /* Literal.Date */
    c-[nc] { color: #268bd2 } /* Name.Class */
    c-[no] { color: #268bd2 } /* Name.Constant */
    c-[nd] { color: #268bd2 } /* Name.Decorator */
    c-[ni] { color: #268bd2 } /* Name.Entity */
    c-[ne] { color: #268bd2 } /* Name.Exception */
    c-[nf] { color: #268bd2 } /* Name.Function */
    c-[nl] { color: #268bd2 } /* Name.Label */
    c-[nn] { color: #268bd2 } /* Name.Namespace */
    c-[py] { color: #268bd2 } /* Name.Property */
    c-[ow] { color: #657b83 } /* Operator.Word */
    c-[mb] { color: #657b83 } /* Literal.Number.Bin */
    c-[mf] { color: #657b83 } /* Literal.Number.Float */
    c-[mh] { color: #657b83 } /* Literal.Number.Hex */
    c-[mi] { color: #657b83 } /* Literal.Number.Integer */
    c-[mo] { color: #657b83 } /* Literal.Number.Oct */
    c-[sa] { color: #6c71c4 } /* Literal.String.Affix */
    c-[sb] { color: #6c71c4 } /* Literal.String.Backtick */
    c-[sc] { color: #6c71c4 } /* Literal.String.Char */
    c-[dl] { color: #6c71c4 } /* Literal.String.Delimiter */
    c-[sd] { color: #6c71c4 } /* Literal.String.Doc */
    c-[se] { color: #6c71c4 } /* Literal.String.Escape */
    c-[sh] { color: #6c71c4 } /* Literal.String.Heredoc */
    c-[si] { color: #6c71c4 } /* Literal.String.Interpol */
    c-[sx] { color: #6c71c4 } /* Literal.String.Other */
    c-[sr] { color: #6c71c4 } /* Literal.String.Regex */
    c-[ss] { color: #6c71c4 } /* Literal.String.Symbol */
    c-[fm] { color: #268bd2 } /* Name.Function.Magic */
    c-[vc] { color: #cb4b16 } /* Name.Variable.Class */
    c-[vg] { color: #cb4b16 } /* Name.Variable.Global */
    c-[vi] { color: #cb4b16 } /* Name.Variable.Instance */
    c-[vm] { color: #cb4b16 } /* Name.Variable.Magic */
    c-[il] { color: #657b83 } /* Literal.Number.Integer.Long */
}
</style>
 <body class="h-entry">
  <div class="head">
   <p data-fill-with="logo"><a class="logo" href="http://www.opencaesar.io/oml/"><img alt="OML Specification" height="48" src="https://opencaesar.github.io/oml/images/oml.svg"></a></p>
   <h1 class="p-name no-ref" id="title">OML Tutorials</h1>
   <h2 class="no-num no-toc no-ref heading settled" id="profile-and-date"><span class="content">Living Document, <time class="dt-updated" datetime="2025-03-27">27 March 2025</time></span></h2>
   <div data-fill-with="spec-metadata">
    <dl>
     <dt>This version:
     <dd><a class="u-url" href="http://www.opencaesar.io/oml-tutorials/">http://www.opencaesar.io/oml-tutorials/</a>
     <dt>Previous Versions:
     <dd><a href="https://www.opencaesar.io/oml-tutorials/v1" rel="prev">https://www.opencaesar.io/oml-tutorials/v1</a>
     <dt>Issue Tracking:
     <dd><a href="https://github.com/opencaesar/oml-tutorials/issues/">GitHub</a>
     <dt class="editor">Editor:
     <dd class="editor p-author h-card vcard"><span class="p-name fn">Maged Elaasar (JPL)</span>
     <dt>Copyright:
     <dd>Copyright 2022, by the California Institute of Technology. ALL RIGHTS RESERVED. United States Government Sponsorship acknowledged. Any commercial use must be negotiated with the Office of Technology Transfer at the California Institute of Technology. This software may be subject to U.S. export control laws. By accepting this software, the user agrees to comply with all applicable U.S. export laws and regulations. User has the responsibility to obtain export licenses, or other export authority as may be required before exporting such information to foreign countries or providing access to foreign persons.
    </dl>
   </div>
   <div data-fill-with="warning"></div>
   <hr title="Separator for header">
  </div>
  <div class="p-summary" data-fill-with="abstract">
   <h2 class="no-num no-toc no-ref heading settled" id="abstract"><span class="content">Abstract</span></h2>
   <p>This set of tutorials introduces the ontological approach to systems modeling and analysis using the <a href="http://www.opencaesar.io/oml/">Ontological Modeling Language (OML)</a>, developed by the <a href="https://github.com/opencaesar/">Jet Propulsion Laboratory (JPL)</a>, and provided by the <a href="http://www.opencaesar.io/">openCAESAR</a> project. The overarching objective of the tutorials is to teach users about OML, its features, its tools, and its workflows. Each individual tutorial describes its own learning objectives. The kind of users who may find these tutorials interesting include a) methodology/domain architects and b) systems engineers. Previous experience using modeling languages (such as UML), ontology languages (such as RDF or OWL), or formal languages (such as Description Logic) would help but is not required. Also, prior experience using common tools (such as Eclipse, Terminal, Docker, and Gradle) helps but is not required.</p>
  </div>
  <div data-fill-with="at-risk"></div>
  <nav data-fill-with="table-of-contents" id="toc">
   <h2 class="no-num no-toc no-ref" id="contents">Table of Contents</h2>
   <ol class="toc" role="directory">
    <li>
     <a href="#getting-ready"><span class="secno"></span> <span class="content">Getting Ready</span></a>
     <ol class="toc">
      <li><a href="#install-oml-rosetta"><span class="secno"></span> <span class="content">Install OML Rosetta</span></a>
      <li><a href="#run-oml-rosetta"><span class="secno"></span> <span class="content">Run OML Rosetta</span></a>
     </ol>
    <li>
     <a href="#tutorial1"><span class="secno">1</span> <span class="content">Tutorial 1: OML Basics</span></a>
     <ol class="toc">
      <li><a href="#tutorial1-learning-objectives"><span class="secno">1.1</span> <span class="content">Learning Objectives</span></a>
      <li><a href="#tutorial1-create-oml-project"><span class="secno">1.2</span> <span class="content">Create OML Project</span></a>
      <li><a href="#tutorial1-create-oml-vocabulary"><span class="secno">1.3</span> <span class="content">Create OML Vocabulary</span></a>
      <li><a href="#tutorial1-create-oml-vocabulary-bundle"><span class="secno">1.4</span> <span class="content">Create OML Vocabulary Bundle</span></a>
      <li><a href="#tutorial1-create-oml-description"><span class="secno">1.5</span> <span class="content">Create OML Description</span></a>
      <li><a href="#tutorial1-edit-oml-description-bundle"><span class="secno">1.6</span> <span class="content">Edit OML Description Bundle</span></a>
      <li><a href="#tutorial1-run-build-task"><span class="secno">1.7</span> <span class="content">Run Build Task</span></a>
      <li><a href="#tutorial1-fix-logical-inconsistency"><span class="secno">1.8</span> <span class="content">Fix Logical Inconsistency</span></a>
      <li><a href="#tutorial1-run-query-task"><span class="secno">1.9</span> <span class="content">Run Query Task</span></a>
      <li><a href="#tutorial1-summary"><span class="secno">1.10</span> <span class="content">Summary</span></a>
     </ol>
    <li>
     <a href="#tutorial2"><span class="secno">2</span> <span class="content">Tutorial 2: OML Patterns</span></a>
     <ol class="toc">
      <li><a href="#tutorial2-learning-objectives"><span class="secno">2.1</span> <span class="content">Learning Objectives</span></a>
      <li><a href="#tutorial2-oml-project"><span class="secno">2.2</span> <span class="content">Create OML Project</span></a>
      <li><a href="#tutorial2-p1"><span class="secno">2.3</span> <span class="content">P1: Objective aggregates Objective</span></a>
      <li><a href="#tutorial2-p2"><span class="secno">2.4</span> <span class="content">P2: Mission pursues Objective</span></a>
      <li><a href="#tutorial2-p3"><span class="secno">2.5</span> <span class="content">P3: Mission deploys Component</span></a>
      <li><a href="#tutorial2-p4"><span class="secno">2.6</span> <span class="content">P4: Component contains Component</span></a>
      <li><a href="#tutorial2-p5"><span class="secno">2.7</span> <span class="content">P5: Mass characterizes Component</span></a>
      <li><a href="#tutorial2-p6"><span class="secno">2.8</span> <span class="content">P6: Component presents Interface</span></a>
      <li><a href="#tutorial2-p7"><span class="secno">2.9</span> <span class="content">P7: Requirement specifies Presents</span></a>
      <li><a href="#tutorial2-p8"><span class="secno">2.10</span> <span class="content">P8: Interface joins Interface</span></a>
      <li><a href="#tutorial2-summary"><span class="secno">2.11</span> <span class="content">Summary</span></a>
     </ol>
    <li>
     <a href="#tutorial3"><span class="secno">3</span> <span class="content">Tutorial 3: OML CI</span></a>
     <ol class="toc">
      <li><a href="#tutorial3-learning-objectives"><span class="secno">3.1</span> <span class="content">Learning Objectives</span></a>
      <li><a href="#tutorial3-setup-git-repository"><span class="secno">3.2</span> <span class="content">Setup Git Repository</span></a>
      <li><a href="#tutorial3-setup-ci-pipeline"><span class="secno">3.3</span> <span class="content">Setup CI Pipeline</span></a>
      <li><a href="#tutorial3-push-syntactic-error"><span class="secno">3.4</span> <span class="content">Detect Syntactic Error</span></a>
      <li><a href="#tutorial3-push-semantic-error"><span class="secno">3.5</span> <span class="content">Detect Semantic Error</span></a>
      <li><a href="#tutorial3-summary"><span class="secno">3.6</span> <span class="content">Summary</span></a>
     </ol>
    <li>
     <a href="#tutorial4"><span class="secno">4</span> <span class="content">Tutorial 4: OML Reports</span></a>
     <ol class="toc">
      <li><a href="#tutorial4-learning-objectives"><span class="secno">4.1</span> <span class="content">Learning Objectives</span></a>
      <li><a href="#tutorial4-install-jupyter-notebook"><span class="secno">4.2</span> <span class="content">Install Jupyter Notebook</span></a>
      <li><a href="#tutorial4-run-sparql-queries"><span class="secno">4.3</span> <span class="content">Run SPARQL Queries</span></a>
      <li><a href="#tutorial4-generate-oml-doc"><span class="secno">4.4</span> <span class="content">Generate OML Doc</span></a>
      <li><a href="#tutorial4-setup-github-pages"><span class="secno">4.5</span> <span class="content">Setup Github Pages</span></a>
      <li><a href="#tutorial4-create-jupyter-notebook"><span class="secno">4.6</span> <span class="content">Create Jupyter Notebook</span></a>
      <li><a href="#tutorial4-reference-documentation"><span class="secno">4.7</span> <span class="content">P1: Reference Documentation</span></a>
      <li><a href="#tutorial4-visualize-missions"><span class="secno">4.8</span> <span class="content">P2: Visualize Missions</span></a>
      <li><a href="#tutorial4-visualize-objectives"><span class="secno">4.9</span> <span class="content">P3: Visualize Objectives</span></a>
      <li><a href="#tutorial4-visualize-components"><span class="secno">4.10</span> <span class="content">P4: Visualize Components</span></a>
      <li><a href="#tutorial4-visualize-mass-rollup"><span class="secno">4.11</span> <span class="content">P5: Visualize Mass Rollup</span></a>
      <li><a href="#tutorial4-change-the-model"><span class="secno">4.12</span> <span class="content">Change the Model</span></a>
      <li><a href="#tutorial4-summary"><span class="secno">4.13</span> <span class="content">Summary</span></a>
     </ol>
    <li>
     <a href="#tutorial5"><span class="secno">5</span> <span class="content">Tutorial 5: OML Sirius</span></a>
     <ol class="toc">
      <li><a href="#tutorial5-learning-objectives"><span class="secno">5.1</span> <span class="content">Learning Objectives</span></a>
      <li><a href="#tutorial5-create-oml-model-project"><span class="secno">5.2</span> <span class="content">Create OML Model Project</span></a>
      <li><a href="#tutorial5-create-oml-vocabulary"><span class="secno">5.3</span> <span class="content">Create OML Vocabulary</span></a>
      <li><a href="#tutorial5-create-oml-description"><span class="secno">5.4</span> <span class="content">Create OML Description</span></a>
      <li><a href="#tutorial5-create-sirius-viewpoint-project"><span class="secno">5.5</span> <span class="content">Create Sirius Viewpoint Project</span></a>
      <li><a href="#tutorial5-create-diagram-editor"><span class="secno">5.6</span> <span class="content">Create Diagram Editor</span></a>
      <li><a href="#tutorial5-create-table-editor"><span class="secno">5.7</span> <span class="content">Create Table Editor</span></a>
      <li><a href="#tutorial5-create-sparql-queries"><span class="secno">5.8</span> <span class="content">Create SPARQL Queries</span></a>
      <li><a href="#tutorial5-summary"><span class="secno">5.9</span> <span class="content">Summary</span></a>
     </ol>
    <li>
     <a href="#tutorial6"><span class="secno">6</span> <span class="content">Tutorial 6: OML Federation</span></a>
     <ol class="toc">
      <li><a href="#tutorial6-learning-objectives"><span class="secno">6.1</span> <span class="content">Learning Objectives</span></a>
      <li><a href="#tutorial6-introduction-to-federation"><span class="secno">6.2</span> <span class="content">Introduction to Federation</span></a>
      <li><a href="#tutorial6-create-federated-projects"><span class="secno">6.3</span> <span class="content">Create Federated Projects</span></a>
      <li><a href="#tutorial6-define-modeling-methodology"><span class="secno">6.4</span> <span class="content">Define Modeling Methodology</span></a>
      <li><a href="#tutorial6-define-system-architecture"><span class="secno">6.5</span> <span class="content">Define System Architecture</span></a>
      <li><a href="#tutorial6-federate-component-realization"><span class="secno">6.6</span> <span class="content">Federate Component Realization</span></a>
      <li><a href="#tutorial6-integrate-federated-components"><span class="secno">6.7</span> <span class="content">Integrate Federated Components</span></a>
      <li><a href="#tutorial6-perform-federated-analyses"><span class="secno">6.8</span> <span class="content">Run Federation Scenarios</span></a>
      <li><a href="#tutorial6-publish-with-semantic-versions"><span class="secno">6.9</span> <span class="content">Publish with Semantic Versions</span></a>
      <li><a href="#tutorial6-summary"><span class="secno">6.10</span> <span class="content">Summary</span></a>
     </ol>
    <li>
     <a href="#index"><span class="secno"></span> <span class="content">Index</span></a>
     <ol class="toc">
      <li><a href="#index-defined-here"><span class="secno"></span> <span class="content">Terms defined by this specification</span></a>
     </ol>
   </ol>
  </nav>
  <main>
   <div>
    <h2 class="no-num heading settled" id="getting-ready"><span class="content">Getting Ready</span></h2>
    <p>OML has a user-friendly <a href="http://www.opencaesar.io/oml/#Language-Reference">textual grammar</a> that can be edited using a simple text editor. However, for extra support like wizards, syntax highlighting, live validation, and content-assist, a user can use one of the OML editors provided by openCAESAR project. One such editor, called <a href="https://github.com/opencaesar/oml-rosetta">OML Rosetta</a>, is a plugin to the Eclipse IDE. Another editor, called <a href="https://github.com/opencaesar/oml-luxor">OML Luxor</a>, is an extension to the VSCode IDE that can be used in a VSCode desktop client or browser-based client (like <a href="https://www.gitpod.io/">Gitpod</a>). In this tutorial, we will demonstrate using the OML Rosetta editor, but the reader can follow using any other editor.</p>
    <p class="note" role="note"><span class="marker">Note:</span> that OML also has a UML-like <a href="http://www.opencaesar.io/oml/#Graphical-BNF">graphical notation</a>. Although we will not demonstrate how to create them, we will sometimes show OML diagrams to help visualize the models.</p>
    <p>Furthermore, OML projects created by openCAESAR are Gradle projects that have OML analysis tools configured as Gradle tasks (in a <code>build.gradle</code> script). A user can choose to invoke such tools from a console/terminal session using the Gradle Wrapper CLI (e.g., <code>./gradlew &lt;task></code>). Alternatively, the supported OML editors mentioned above allow invoking those Gradle tasks using a UI. We will demonstrate invoking Gradle tasks from the UI in Eclipse, but the reader can choose to invoke them using the CLI (or another UI) instead.</p>
    <h3 class="heading settled" id="install-oml-rosetta"><span class="content">Install OML Rosetta</span></h3>
    <ol>
     <li data-md>
      <p>Download the latest release of OML Rosetta archive that matches your OS from <a href="https://github.com/opencaesar/oml-rosetta/releases/latest">oml-rosetta</a>.</p>
      <p><img src="assets/tutorial0/Rosetta-Download.png" style="border:1px groove black;" width="100%"></p>
     <li data-md>
      <p>Unzip the archive to some folder on your local drive to get the Rosetta app.</p>
      <p class="note" role="note"><span class="marker">Note:</span> If you’re on a Mac, run this command in the terminal to get around the issue that the app is not yet signed (a temporary issue).</p>
<pre class="language-javascript highlight">$xattr <c- o>-</c->cr <c- o>&lt;</c->path<c- o>/</c->to<c- o>/</c->Rosetta<c- p>.</c->app<c- o>></c->
</pre>
     <li data-md>
      <p>Navigate to the Rosetta app icon and double click to run it.</p>
      <p><img src="assets/tutorial0/splash.bmp" width="100%"></p>
     <li data-md>
      <p>When prompted to choose a workspace, create a new one in your local file system.</p>
      <p><img src="assets/tutorial0/Rosetta-Launcher.png" width="100%"></p>
    </ol>
    <h3 class="heading settled" id="run-oml-rosetta"><span class="content">Run OML Rosetta</span></h3>
    <ol>
     <li data-md>
      <p>Once Rosetta opens with the workspace, switch to the Modeling Perspective.</p>
    </ol>
    <video controls style="border:1px groove black;" width="100%">
     <source src="assets/tutorial0/Switch-to-Modeling-Perspective.mov">
    </video>
    <ol>
     <li data-md>
      <p>Once the Modeling Perspective opens, make some extra views visible.</p>
    </ol>
    <video controls style="border:1px groove black;" width="100%">
     <source src="assets/tutorial0/Show-Views.mov">
    </video>
    <ol>
     <li data-md>
      <p>This is how the Modeling Perspective should look like now.</p>
    </ol>
    <p><img src="assets/tutorial0/Final-Modeling-Perspective.png" width="100%"></p>
    <p>Notice the following components of the Modeling Perspective above:</p>
    <ol>
     <li data-md>
      <p><dfn class="dfn-paneled" data-dfn-type="dfn" data-export id="model-explorer-view"><strong>Model Explorer view</strong></dfn> (top-left): shows your project files hierarchy.</p>
     <li data-md>
      <p><dfn class="dfn-paneled" data-dfn-type="dfn" data-export id="properties-view"><strong>Properties view</strong></dfn> (bottom-right): shows detailed property sheet of the selection.</p>
     <li data-md>
      <p><dfn class="dfn-paneled" data-dfn-type="dfn" data-export id="problems-view"><strong>Problems view</strong></dfn> (bottom-right): shows problems (errors, warnings) with your projects.</p>
     <li data-md>
      <p><dfn class="dfn-paneled" data-dfn-type="dfn" data-export id="gradle-tasks-view"><strong>Gradle Tasks view</strong></dfn> (bottom-right): shows the list of Gradle tasks in your projects.</p>
     <li data-md>
      <p><dfn class="dfn-paneled" data-dfn-type="dfn" data-export id="gradle-executions-view"><strong>Gradle Executions view</strong></dfn> (bottom-right): shows the details of execution of Gradle tasks.</p>
     <li data-md>
      <p><dfn class="dfn-paneled" data-dfn-type="dfn" data-export id="console-view"><strong>Console view</strong></dfn> (bottom-right): shows messages printed by Gradle tasks.</p>
     <li data-md>
      <p><dfn class="dfn-paneled" data-dfn-type="dfn" data-export id="editors"><strong>Editors</strong></dfn> (top-right): this area shows the open editors (if any).</p>
     <li data-md>
      <p><dfn class="dfn-paneled" data-dfn-type="dfn" data-export id="outline-view"><strong>Outline view</strong></dfn> (bottom-left): shows the outline of content in the active editor.</p>
     <li data-md>
      <p>Turn on the Show line number preference by navigating to the Preferences dialog in the main menu bar (on a Mac, you will find it under the <code>Rosetta</code> menu; on Windows, you will find it under the <code>Windows</code> menu).</p>
    </ol>
    <video controls style="border:1px groove black;" width="100%">
     <source src="assets/tutorial0/Enable-Line-Numbers.mov">
    </video>
    <h2 class="heading settled" data-level="1" id="tutorial1"><span class="secno">1. </span><span class="content">Tutorial 1: OML Basics</span><a class="self-link" href="#tutorial1"></a></h2>
    <p class="note" role="note"><span class="marker">Note:</span> If you have not already done so, please follow the <a href="#getting-ready">Getting Ready</a> instructions first before proceeding.</p>
    <h3 class="heading settled" data-level="1.1" id="tutorial1-learning-objectives"><span class="secno">1.1. </span><span class="content">Learning Objectives</span><a class="self-link" href="#tutorial1-learning-objectives"></a></h3>
     This tutorial provides a quick overview of the basic workflows of OML. Users will learn how to create an OML project, and within it, create a vocabulary for a simple domain (we use a Pizza domain since everyone is familiar with it), then use such vocabulary to describe knowledge (the pizzas sold by some pizza restaurant). Furthermore, users will learn how to build the project to check its logical consistency (e.g., vegetarian pizzas have no meat ingredients), and how to run queries on the described knowledge to answer business questions (e.g., how much ingredients were used? and how many vegan pizzas were sold?). 
    <p class="note" role="note"><span class="marker">Note:</span> the source files created in this tutorial are available for reference in this <a href="https://github.com/opencaesar/pizza-example">repository</a>, but we encourage the reader to recreate them by following the instructions below.</p>
    <h3 class="heading settled" data-level="1.2" id="tutorial1-create-oml-project"><span class="secno">1.2. </span><span class="content">Create OML Project</span><a class="self-link" href="#tutorial1-create-oml-project"></a></h3>
    <ol>
     <li data-md>
      <p>Right click in the <a data-link-type="dfn" href="#model-explorer-view" id="ref-for-model-explorer-view">Model Explorer view</a> and select New -> OML Project.</p>
     <li data-md>
      <p>Enter the project name as <code>tutorial1</code>. Press Next.</p>
     <li data-md>
      <p>Enter the project details as shown below. Press Finish.</p>
      <p><img src="assets/tutorial1/Create-OML-Project.png" width="100%"></p>
     <li data-md>
      <p>The <code>tutorial1</code> project should now be visible in the <a data-link-type="dfn" href="#model-explorer-view" id="ref-for-model-explorer-view①">Model Explorer view</a>.</p>
    </ol>
    <p class="note" role="note"><span class="marker">Note:</span> The project creation process may take a few seconds. Rosetta will show the progress of project creation in the status bar (bottom-right). Wait until this process finishes.</p>
    <ol start="5">
     <li data-md>
      <p>Expand the <code>tutorial1</code> project node in the <a data-link-type="dfn" href="#model-explorer-view" id="ref-for-model-explorer-view②">Model Explorer view</a> as shown in the image below.</p>
      <p><img src="assets/tutorial1/Expanded-Project.png" width="100%"></p>
    </ol>
    <h3 class="heading settled" data-level="1.3" id="tutorial1-create-oml-vocabulary"><span class="secno">1.3. </span><span class="content">Create OML Vocabulary</span><a class="self-link" href="#tutorial1-create-oml-vocabulary"></a></h3>
    <p>Now, you will create a simple vocabulary for describing pizzas along with their bases and toppings. Different kinds of  pizzas, bases, and toppings are modeled, along with their properties, interrelations, and restrictions.</p>
    <ol>
     <li data-md>
      <p>Right click on the <code>tutorial1</code> subfolder (highlighted in the picture above) in the <a data-link-type="dfn" href="#model-explorer-view" id="ref-for-model-explorer-view③">Model Explorer view</a> and select New -> OML Model.</p>
     <li data-md>
      <p>Enter the details of the <code>pizza</code> vocabulary as shown below. Press Finish.</p>
      <p><img src="assets/tutorial1/Create-Pizza-Vocabulary.png" width="100%"></p>
     <li data-md>
      <p>The <code>pizza</code> vocabulary will be created and its OML editor opens as shown below.</p>
      <p><img src="assets/tutorial1/Pizza-Vocabulary-Editor.png" width="100%"></p>
     <li data-md>
      <p>Copy the following OML code and paste it as the new content of vocabulary <code>pizza</code>.</p>
    </ol>
<pre class="language-scala highlight"><c- nd>@dc</c-><c- p>:</c-><c- n>description</c-> <c- s>"A vocabulary about pizzas"</c->
<c- n>vocabulary</c-> <c- o>&lt;</c-><c- n>http</c-><c- p>:</c-><c- c1>//example.com/tutorial1/vocabulary/pizza#> as pizza {</c->
    
    <c- k>extends</c-> <c- o>&lt;</c-><c- n>http</c-><c- p>:</c-><c- c1>//www.w3.org/2001/XMLSchema#> as xsd</c->

    <c- k>extends</c-> <c- o>&lt;</c-><c- n>http</c-><c- p>:</c-><c- c1>//purl.org/dc/elements/1.1/> as dc</c->

    <c- k>extends</c-> <c- o>&lt;</c-><c- n>http</c-><c- p>:</c-><c- c1>//www.w3.org/2000/01/rdf-schema#> as rdfs</c->

    <c- c1>// Top Level</c->

    <c- nd>@rdfs</c-><c- p>:</c-><c- n>comment</c-> <c- s>"The class of things that are uniquely identified by id"</c->
    <c- n>aspect</c-> <c- nc>IdentifiedThing</c-> <c- p>[</c->
        <c- n>key</c-> <c- n>hasId</c->
    <c- p>]</c->
    
    <c- nd>@rdfs</c-><c- p>:</c-><c- n>comment</c-> <c- s>"The id property of an identified thing"</c->
    <c- n>scalar</c-> <c- n>property</c-> <c- n>hasId</c-> <c- p>[</c->
        <c- n>domain</c-> <c- nc>IdentifiedThing</c->
        <c- n>range</c-> <c- n>xsd</c-><c- p>:</c-><c- n>string</c->
        <c- n>functional</c->
    <c- p>]</c->   

    <c- c1>// Identified Things</c->

    <c- nd>@rdfs</c-><c- p>:</c-><c- n>comment</c-> <c- s>"The class of food items"</c->
    <c- n>concept</c-> <c- nc>Food</c-> <c- o>&lt;</c-> <c- nc>IdentifiedThing</c->

    <c- nd>@rdfs</c-><c- p>:</c-><c- n>comment</c-> <c- s>"A relation from a food to another used as an ingredient"</c->
    <c- n>relation</c-> <c- n>entity</c-> <c- nc>HasIngredient</c-> <c- p>[</c->
        <c- n>from</c-> <c- nc>Food</c->
        <c- n>to</c-> <c- nc>Food</c->
        <c- n>forward</c-> <c- n>hasIngredient</c->
        <c- n>reverse</c-> <c- n>isIngredientOf</c->
        <c- n>transitive</c->
    <c- p>]</c->

    <c- nd>@rdfs</c-><c- p>:</c-><c- n>comment</c-> <c- s>"An enumeration of spiciness levels"</c->
    <c- n>scalar</c-> <c- nc>Spiciness</c-> <c- p>[</c->
        <c- n>oneOf</c-> <c- s>"Hot"</c-><c- p>,</c-> <c- s>"Medium"</c-><c- p>,</c-> <c- s>"Mild"</c->
    <c- p>]</c->

    <c- nd>@rdfs</c-><c- p>:</c-><c- n>comment</c-> <c- s>"The spiciness property of a food item"</c->
    <c- n>scalar</c-> <c- n>property</c-> <c- n>hasSpiceness</c-> <c- p>[</c->
        <c- n>domain</c-> <c- nc>Food</c->
        <c- n>range</c-> <c- nc>Spiciness</c->
        <c- n>functional</c->
    <c- p>]</c->
    
    <c- c1>// Foods</c->
    
    <c- nd>@rdfs</c-><c- p>:</c-><c- n>comment</c-> <c- s>"The class of pizzas"</c->
    <c- n>concept</c-> <c- nc>Pizza</c-> <c- o>&lt;</c-> <c- nc>Food</c-> <c- p>[</c->
        <c- n>restricts</c-> <c- n>some</c-> <c- n>hasBase</c-> <c- n>to</c-> <c- nc>PizzaBase</c->
    <c- p>]</c->

    <c- nd>@rdfs</c-><c- p>:</c-><c- n>comment</c-> <c- s>"The class of pizza bases"</c->
    <c- n>concept</c-> <c- nc>PizzaBase</c-> <c- o>&lt;</c-> <c- nc>Food</c->

    <c- nd>@rdfs</c-><c- p>:</c-><c- n>comment</c-> <c- s>"The class of pizza toppings"</c->
    <c- n>concept</c-> <c- nc>PizzaTopping</c-> <c- o>&lt;</c-> <c- nc>Food</c->

    <c- nd>@rdfs</c-><c- p>:</c-><c- n>comment</c-> <c- s>"A relation from a pizza to a base"</c->
    <c- n>relation</c-> <c- n>entity</c-> <c- nc>HasBase</c-> <c- p>[</c->
        <c- n>from</c-> <c- nc>Pizza</c->
        <c- n>to</c-> <c- nc>PizzaBase</c->
        <c- n>forward</c-> <c- n>hasBase</c->
        <c- n>reverse</c-> <c- n>isBaseOf</c->
        <c- n>functional</c->
        <c- n>inverse</c-> <c- n>functional</c->
    <c- p>]</c-> <c- o>&lt;</c-> <c- nc>HasIngredient</c-> 

    <c- nd>@rdfs</c-><c- p>:</c-><c- n>comment</c-> <c- s>"A relation from a pizza to a topping"</c->
    <c- n>relation</c-> <c- n>entity</c-> <c- nc>HasTopping</c-> <c- p>[</c->
        <c- n>from</c-> <c- nc>Pizza</c->
        <c- n>to</c-> <c- nc>PizzaTopping</c->
        <c- n>forward</c-> <c- n>hasTopping</c->
        <c- n>reverse</c-> <c- n>isToppingOf</c->
        <c- n>inverse</c-> <c- n>functional</c->
    <c- p>]</c-> <c- o>&lt;</c-> <c- nc>HasIngredient</c->

    <c- c1>// Pizzas</c->
        
    <c- nd>@rdfs</c-><c- p>:</c-><c- n>comment</c-> <c- s>"The class of pizzas with some cheese toppings"</c->
    <c- n>concept</c-> <c- nc>CheesyPizza</c-> <c- o>&lt;</c-> <c- nc>Pizza</c-> <c- p>[</c->
        <c- n>restricts</c-> <c- n>some</c-> <c- n>hasTopping</c-> <c- n>to</c-> <c- nc>CheeseTopping</c->
    <c- p>]</c->
    
    <c- nd>@rdfs</c-><c- p>:</c-><c- n>comment</c-> <c- s>"The class of pizzas with some meat toppings"</c->
    <c- n>concept</c-> <c- nc>MeatyPizza</c-> <c- o>&lt;</c-> <c- nc>Pizza</c-> <c- p>[</c->
        <c- n>restricts</c-> <c- n>some</c-> <c- n>hasTopping</c-> <c- n>to</c-> <c- nc>MeatTopping</c->
    <c- p>]</c->
    
    <c- nd>@rdfs</c-><c- p>:</c-><c- n>comment</c-> <c- s>"The class of pizzas with all vegetarian toppings"</c->
    <c- n>concept</c-> <c- nc>VegetarianPizza</c-> <c- o>&lt;</c-> <c- nc>Pizza</c-> <c- p>[</c->
        <c- n>restricts</c-> <c- n>all</c-> <c- n>hasTopping</c-> <c- n>to</c-> <c- nc>VegetarianTopping</c->
    <c- p>]</c->

    <c- nd>@rdfs</c-><c- p>:</c-><c- n>comment</c-> <c- s>"The class of American pizzas"</c->
    <c- n>concept</c-> <c- nc>American</c-> <c- o>&lt;</c-> <c- nc>CheesyPizza</c-><c- p>,</c-> <c- nc>MeatyPizza</c-> <c- p>[</c->
        <c- n>restricts</c-> <c- n>some</c-> <c- n>hasTopping</c-> <c- n>to</c-> <c- nc>MozzarellaTopping</c->
        <c- n>restricts</c-> <c- n>some</c-> <c- n>hasTopping</c-> <c- n>to</c-> <c- nc>SausageTopping</c->
        <c- n>restricts</c-> <c- n>some</c-> <c- n>hasTopping</c-> <c- n>to</c-> <c- nc>TomatoTopping</c->
    <c- p>]</c->

    <c- nd>@rdfs</c-><c- p>:</c-><c- n>comment</c-> <c- s>"The class of Veneziana pizzas"</c->
    <c- n>concept</c-> <c- nc>Veneziana</c-> <c- o>&lt;</c-> <c- nc>CheesyPizza</c-><c- p>,</c-> <c- nc>MeatyPizza</c-> <c- p>[</c->
        <c- n>restricts</c-> <c- n>some</c-> <c- n>hasTopping</c-> <c- n>to</c-> <c- nc>MozzarellaTopping</c->
        <c- n>restricts</c-> <c- n>some</c-> <c- n>hasTopping</c-> <c- n>to</c-> <c- nc>TomatoTopping</c->
        <c- n>restricts</c-> <c- n>some</c-> <c- n>hasTopping</c-> <c- n>to</c-> <c- nc>SultanaTopping</c->
    <c- p>]</c->

    <c- nd>@rdfs</c-><c- p>:</c-><c- n>comment</c-> <c- s>"The class of Margherita pizzas"</c->
    <c- n>concept</c-> <c- nc>Margherita</c-> <c- o>&lt;</c-> <c- nc>CheesyPizza</c-><c- p>,</c-> <c- nc>VegetarianPizza</c-> <c- p>[</c->
        <c- n>restricts</c-> <c- n>some</c-> <c- n>hasTopping</c-> <c- n>to</c-> <c- nc>MozzarellaTopping</c->
        <c- n>restricts</c-> <c- n>some</c-> <c- n>hasTopping</c-> <c- n>to</c-> <c- nc>TomatoTopping</c->
    <c- p>]</c->

    <c- c1>// Pizza Bases</c->

    <c- nd>@rdfs</c-><c- p>:</c-><c- n>comment</c-> <c- s>"The class of deep pan bases"</c->
    <c- n>concept</c-> <c- nc>DeepPanBase</c-> <c- o>&lt;</c-> <c- nc>PizzaBase</c->
    
    <c- nd>@rdfs</c-><c- p>:</c-><c- n>comment</c-> <c- s>"The class of thin and crispy bases"</c->
    <c- n>concept</c-> <c- nc>ThinAndCrispyBase</c-> <c- o>&lt;</c-> <c- nc>PizzaBase</c->

    <c- c1>// Pizza Toppings</c->
        
    <c- nd>@rdfs</c-><c- p>:</c-><c- n>comment</c-> <c- s>"The class of meat toppings"</c->
    <c- n>concept</c-> <c- nc>MeatTopping</c-> <c- o>&lt;</c-> <c- nc>PizzaTopping</c->
    
    <c- nd>@rdfs</c-><c- p>:</c-><c- n>comment</c-> <c- s>"The class of vegetarian toppings"</c->
    <c- n>concept</c-> <c- nc>VegetarianTopping</c-> <c- o>&lt;</c-> <c- nc>PizzaTopping</c->

    <c- nd>@rdfs</c-><c- p>:</c-><c- n>comment</c-> <c- s>"The class of hot spiciness toppings"</c->
    <c- n>concept</c-> <c- nc>HotTopping</c-> <c- o>&lt;</c-> <c- nc>PizzaTopping</c-> <c- p>[</c->
        <c- n>restricts</c-> <c- n>hasSpiceness</c-> <c- n>to</c-> <c- s>"Hot"</c->
    <c- p>]</c->

    <c- nd>@rdfs</c-><c- p>:</c-><c- n>comment</c-> <c- s>"The class of medium spiciness toppings"</c->
    <c- n>concept</c-> <c- nc>MediumTopping</c-> <c- o>&lt;</c-> <c- nc>PizzaTopping</c-> <c- p>[</c->
        <c- n>restricts</c-> <c- n>hasSpiceness</c-> <c- n>to</c-> <c- s>"Medium"</c->
    <c- p>]</c->

    <c- nd>@rdfs</c-><c- p>:</c-><c- n>comment</c-> <c- s>"The class of mild spiciness toppings"</c->
    <c- n>concept</c-> <c- nc>MildTopping</c-> <c- o>&lt;</c-> <c- nc>PizzaTopping</c-> <c- p>[</c->
        <c- n>restricts</c-> <c- n>hasSpiceness</c-> <c- n>to</c-> <c- s>"Mild"</c->
    <c- p>]</c->

    <c- c1>// Meat Topping</c->

    <c- nd>@rdfs</c-><c- p>:</c-><c- n>comment</c-> <c- s>"The class sausage toppings"</c->
    <c- n>concept</c-> <c- nc>SausageTopping</c-> <c- o>&lt;</c-> <c- nc>MeatTopping</c-><c- p>,</c-> <c- nc>MildTopping</c->
    <c- nd>@rdfs</c-><c- p>:</c-><c- n>comment</c-> <c- s>"The class spiced beef toppings"</c->
    <c- n>concept</c-> <c- nc>SpicedBeefTopping</c-> <c- o>&lt;</c-> <c- nc>MeatTopping</c-><c- p>,</c-> <c- nc>HotTopping</c->
    
    <c- c1>// Vegetarion Toppings</c->

    <c- nd>@rdfs</c-><c- p>:</c-><c- n>comment</c-> <c- s>"The class sauce toppings"</c->
    <c- n>concept</c-> <c- nc>SauceTopping</c-> <c- o>&lt;</c-> <c- nc>VegetarianTopping</c->
    <c- nd>@rdfs</c-><c- p>:</c-><c- n>comment</c-> <c- s>"The class cheese toppings"</c->
    <c- n>concept</c-> <c- nc>CheeseTopping</c-> <c- o>&lt;</c-> <c- nc>VegetarianTopping</c->
    <c- nd>@rdfs</c-><c- p>:</c-><c- n>comment</c-> <c- s>"The class fruit toppings"</c->
    <c- n>concept</c-> <c- nc>FruitTopping</c-> <c- o>&lt;</c-> <c- nc>VegetarianTopping</c->
    <c- nd>@rdfs</c-><c- p>:</c-><c- n>comment</c-> <c- s>"The class vegetable toppings"</c->
    <c- n>concept</c-> <c- nc>VegetableTopping</c-> <c- o>&lt;</c-> <c- nc>VegetarianTopping</c->

    <c- c1>// Sauce Toppings</c->

    <c- nd>@rdfs</c-><c- p>:</c-><c- n>comment</c-> <c- s>"The class of tabasco toppings"</c->
    <c- n>concept</c-> <c- nc>TobascoTopping</c-> <c- o>&lt;</c-> <c- nc>SauceTopping</c-><c- p>,</c-> <c- nc>HotTopping</c->

    <c- c1>// Cheese Toppings</c->

    <c- nd>@rdfs</c-><c- p>:</c-><c- n>comment</c-> <c- s>"The class of parmesan toppings"</c->
    <c- n>concept</c-> <c- nc>ParmesanTopping</c-> <c- o>&lt;</c-> <c- nc>CheeseTopping</c-><c- p>,</c-> <c- nc>MildTopping</c->
    <c- nd>@rdfs</c-><c- p>:</c-><c- n>comment</c-> <c- s>"The class of mozzarella toppings"</c->
    <c- n>concept</c-> <c- nc>MozzarellaTopping</c-> <c- o>&lt;</c-> <c- nc>CheeseTopping</c-><c- p>,</c-> <c- nc>MildTopping</c->

    <c- c1>// Fruit Toppings</c->

    <c- nd>@rdfs</c-><c- p>:</c-><c- n>comment</c-> <c- s>"The class of sultana toppings"</c->
    <c- n>concept</c-> <c- nc>SultanaTopping</c-> <c- o>&lt;</c-> <c- nc>FruitTopping</c-><c- p>,</c-> <c- nc>MediumTopping</c->
    
    <c- c1>// Vegetable Toppings</c->

    <c- nd>@rdfs</c-><c- p>:</c-><c- n>comment</c-> <c- s>"The class of pepper toppings"</c->
    <c- n>concept</c-> <c- nc>PepperTopping</c-> <c- o>&lt;</c-> <c- nc>VegetableTopping</c->
    <c- nd>@rdfs</c-><c- p>:</c-><c- n>comment</c-> <c- s>"The class of tomatoe toppings"</c->
    <c- n>concept</c-> <c- nc>TomatoTopping</c-> <c- o>&lt;</c-> <c- nc>VegetableTopping</c-><c- p>,</c-> <c- nc>MildTopping</c->

    <c- c1>// Pepper Toppings</c->

    <c- nd>@rdfs</c-><c- p>:</c-><c- n>comment</c-> <c- s>"The class of jalapeno pepper toppings"</c->
    <c- n>concept</c-> <c- nc>JalapenoPepperTopping</c-> <c- o>&lt;</c-> <c- nc>PepperTopping</c-><c- p>,</c-> <c- nc>HotTopping</c->
    <c- nd>@rdfs</c-><c- p>:</c-><c- n>comment</c-> <c- s>"The class of sweet pepper toppings"</c->
    <c- n>concept</c-> <c- nc>SweetPepperTopping</c-> <c- o>&lt;</c-> <c- nc>PepperTopping</c-><c- p>,</c-> <c- nc>MildTopping</c->
<c- p>}</c->
</pre>
    <h3 class="heading settled" data-level="1.4" id="tutorial1-create-oml-vocabulary-bundle"><span class="secno">1.4. </span><span class="content">Create OML Vocabulary Bundle</span><a class="self-link" href="#tutorial1-create-oml-vocabulary-bundle"></a></h3>
    <p>Now, you will create a vocabulary bundle to enable logical closed-world reasoning on pizzas described using the pizza vocabulary. This automatically asserts that classes in the bundled vocabularies that do not have common subtypes are disjoint (have no intersection), which helps detect a wide class of errors that would otherwise not get detected due to the open-world assumption (whatever is not asserted may be true or false).</p>
    <ol>
     <li data-md>
      <p>Right click on the <code>vocabulary</code> subfolder in the <a data-link-type="dfn" href="#model-explorer-view" id="ref-for-model-explorer-view④">Model Explorer view</a> and select New -> OML Model.</p>
     <li data-md>
      <p>Enter the details of the <code>pizza-bundle</code> vocabulary bundle as shown below. Press Finish.</p>
      <p><img src="assets/tutorial1/Create-Pizza-Vocabulary-Bundle.png" width="100%"></p>
     <li data-md>
      <p>The <code>pizza-bundle</code> vocabulary bundle will be created and its OML editor opens as shown below.</p>
      <p><img src="assets/tutorial1/Pizza-Vocabulary-Bundle-Editor.png" width="100%"></p>
     <li data-md>
      <p>Copy the following OML code and paste it as the new content of the vocabulary bundle.</p>
    </ol>
<pre class="language-scala highlight"><c- nd>@dc</c-><c- p>:</c-><c- n>description</c-> <c- s>"A vocabulary bundle for closed-world reasoning about pizzas"</c->
<c- n>vocabulary</c-> <c- n>bundle</c-> <c- o>&lt;</c-><c- n>http</c-><c- p>:</c-><c- c1>//example.com/tutorial1/vocabulary/pizza-bundle#> as pizza-bundle {</c->
    
    <c- n>includes</c-> <c- o>&lt;</c-><c- n>http</c-><c- p>:</c-><c- c1>//purl.org/dc/elements/1.1/> as dc</c->

    <c- c1>// The pizza vocabulary bundle "includes" the pizza vocabulary</c->
    <c- n>includes</c-> <c- o>&lt;</c-><c- n>http</c-><c- p>:</c-><c- c1>//example.com/tutorial1/vocabulary/pizza#></c->

<c- p>}</c->
</pre>
    <h3 class="heading settled" data-level="1.5" id="tutorial1-create-oml-description"><span class="secno">1.5. </span><span class="content">Create OML Description</span><a class="self-link" href="#tutorial1-create-oml-description"></a></h3>
    <p>Now, you will create a description of the pizza instances baked by a particular pizza restaurant. The description will be done using terms from the pizza vocabulary above.</p>
    <ol>
     <li data-md>
      <p>Right click on the <code>description</code> subfolder in the <a data-link-type="dfn" href="#model-explorer-view" id="ref-for-model-explorer-view⑤">Model Explorer view</a> and select New -> OML Model.</p>
     <li data-md>
      <p>Enter the details of the <code>restaurant</code> description as shown below. Press Finish.</p>
      <p><img src="assets/tutorial1/Create-Restaurant-Description.png" width="100%"></p>
     <li data-md>
      <p>The <code>restaurant</code> description will be created and its OML editor opens as shown below.</p>
      <p><img src="assets/tutorial1/Restaurant-Description-Editor.png" width="100%"></p>
     <li data-md>
      <p>Copy the following OML code and paste it as the new content of the description.</p>
    </ol>
<pre class="language-scala highlight"><c- nd>@dc</c-><c- p>:</c-><c- n>description</c-> <c- s>"A description of the sales of a specific pizza restaurant"</c->
<c- n>description</c-> <c- o>&lt;</c-><c- n>http</c-><c- p>:</c-><c- c1>//example.com/tutorial1/description/restaurant#> as restaurant {</c->
    
    <c- n>uses</c-> <c- o>&lt;</c-><c- n>http</c-><c- p>:</c-><c- c1>//purl.org/dc/elements/1.1/> as dc</c->

    <c- c1>// The restaurant description "uses" the pizza vocabulary terms in assertions </c->
    <c- n>uses</c-> <c- o>&lt;</c-><c- n>http</c-><c- p>:</c-><c- c1>//example.com/tutorial1/vocabulary/pizza#> as pizza</c->

    <c- c1>// Pizza 1</c->

    <c- n>instance</c-> <c- n>base1</c-> <c- p>:</c-> <c- n>pizza</c-><c- p>:</c-><c- nc>DeepPanBase</c->
    <c- n>instance</c-> <c- n>topping1</c-><c- o>-</c-><c- mi>1</c-> <c- p>:</c-> <c- n>pizza</c-><c- p>:</c-><c- nc>TomatoTopping</c->
    <c- n>instance</c-> <c- n>topping1</c-><c- o>-</c-><c- mi>2</c-> <c- p>:</c-> <c- n>pizza</c-><c- p>:</c-><c- nc>MozzarellaTopping</c->
    <c- n>instance</c-> <c- n>topping1</c-><c- o>-</c-><c- mi>3</c-> <c- p>:</c-> <c- n>pizza</c-><c- p>:</c-><c- nc>SausageTopping</c->
    <c- n>instance</c-> <c- n>pizza1</c-> <c- p>:</c-> <c- n>pizza</c-><c- p>:</c-><c- nc>American</c-> <c- p>[</c->
        <c- n>pizza</c-><c- p>:</c-><c- n>hasId</c-> <c- s>"1"</c->
        <c- n>pizza</c-><c- p>:</c-><c- n>hasBase</c-> <c- n>base1</c->
        <c- n>pizza</c-><c- p>:</c-><c- n>hasTopping</c-> <c- n>topping1</c-><c- o>-</c-><c- mi>1</c->
        <c- n>pizza</c-><c- p>:</c-><c- n>hasTopping</c-> <c- n>topping1</c-><c- o>-</c-><c- mi>2</c->
        <c- n>pizza</c-><c- p>:</c-><c- n>hasTopping</c-> <c- n>topping1</c-><c- o>-</c-><c- mi>3</c->
    <c- p>]</c->
    
    <c- c1>// Pizza 2</c->

    <c- n>instance</c-> <c- n>base2</c-> <c- p>:</c-> <c- n>pizza</c-><c- p>:</c-><c- nc>ThinAndCrispyBase</c->
    <c- n>instance</c-> <c- n>topping2</c-><c- o>-</c-><c- mi>1</c-> <c- p>:</c-> <c- n>pizza</c-><c- p>:</c-><c- nc>TomatoTopping</c->
    <c- n>instance</c-> <c- n>topping2</c-><c- o>-</c-><c- mi>2</c-> <c- p>:</c-> <c- n>pizza</c-><c- p>:</c-><c- nc>MozzarellaTopping</c->
    <c- n>instance</c-> <c- n>topping2</c-><c- o>-</c-><c- mi>3</c-> <c- p>:</c-> <c- n>pizza</c-><c- p>:</c-><c- nc>SausageTopping</c->
    <c- n>instance</c-> <c- n>pizza2</c-> <c- p>:</c-> <c- n>pizza</c-><c- p>:</c-><c- nc>American</c-> <c- p>[</c->
        <c- n>pizza</c-><c- p>:</c-><c- n>hasId</c-> <c- s>"2"</c->
        <c- n>pizza</c-><c- p>:</c-><c- n>hasBase</c-> <c- n>base2</c->
        <c- n>pizza</c-><c- p>:</c-><c- n>hasTopping</c-> <c- n>topping2</c-><c- o>-</c-><c- mi>1</c->
        <c- n>pizza</c-><c- p>:</c-><c- n>hasTopping</c-> <c- n>topping2</c-><c- o>-</c-><c- mi>2</c->
        <c- n>pizza</c-><c- p>:</c-><c- n>hasTopping</c-> <c- n>topping2</c-><c- o>-</c-><c- mi>3</c->
    <c- p>]</c->
        
    <c- c1>// Pizza 3</c->

    <c- n>instance</c-> <c- n>base3</c-> <c- p>:</c-> <c- n>pizza</c-><c- p>:</c-><c- nc>ThinAndCrispyBase</c->
    <c- n>instance</c-> <c- n>topping3</c-><c- o>-</c-><c- mi>1</c-> <c- p>:</c-> <c- n>pizza</c-><c- p>:</c-><c- nc>TomatoTopping</c->
    <c- n>instance</c-> <c- n>topping3</c-><c- o>-</c-><c- mi>2</c-> <c- p>:</c-> <c- n>pizza</c-><c- p>:</c-><c- nc>MozzarellaTopping</c->
    <c- n>instance</c-> <c- n>pizza3</c-> <c- p>:</c-> <c- n>pizza</c-><c- p>:</c-><c- nc>Margherita</c-> <c- p>[</c->
        <c- n>pizza</c-><c- p>:</c-><c- n>hasId</c-> <c- s>"3"</c->
        <c- n>pizza</c-><c- p>:</c-><c- n>hasBase</c-> <c- n>base3</c->
        <c- n>pizza</c-><c- p>:</c-><c- n>hasTopping</c-> <c- n>topping3</c-><c- o>-</c-><c- mi>1</c->
        <c- n>pizza</c-><c- p>:</c-><c- n>hasTopping</c-> <c- n>topping3</c-><c- o>-</c-><c- mi>2</c->
    <c- p>]</c->

    <c- c1>// Pizza 4</c->

    <c- n>instance</c-> <c- n>base4</c-> <c- p>:</c-> <c- n>pizza</c-><c- p>:</c-><c- nc>ThinAndCrispyBase</c->
    <c- n>instance</c-> <c- n>topping4</c-><c- o>-</c-><c- mi>1</c-> <c- p>:</c-> <c- n>pizza</c-><c- p>:</c-><c- nc>TomatoTopping</c->
    <c- n>instance</c-> <c- n>topping4</c-><c- o>-</c-><c- mi>2</c-> <c- p>:</c-> <c- n>pizza</c-><c- p>:</c-><c- nc>MozzarellaTopping</c->
    <c- n>instance</c-> <c- n>topping4</c-><c- o>-</c-><c- mi>3</c-> <c- p>:</c-> <c- n>pizza</c-><c- p>:</c-><c- nc>SultanaTopping</c->
    <c- n>instance</c-> <c- n>topping4</c-><c- o>-</c-><c- mi>4</c-> <c- p>:</c-> <c- n>pizza</c-><c- p>:</c-><c- nc>SpicedBeefTopping</c->
    <c- n>instance</c-> <c- n>pizza4</c-> <c- p>:</c-> <c- n>pizza</c-><c- p>:</c-><c- nc>Veneziana</c-> <c- p>[</c->
        <c- n>pizza</c-><c- p>:</c-><c- n>hasId</c-> <c- s>"4"</c->
        <c- n>pizza</c-><c- p>:</c-><c- n>hasBase</c-> <c- n>base4</c->
        <c- n>pizza</c-><c- p>:</c-><c- n>hasTopping</c-> <c- n>topping4</c-><c- o>-</c-><c- mi>1</c->
        <c- n>pizza</c-><c- p>:</c-><c- n>hasTopping</c-> <c- n>topping4</c-><c- o>-</c-><c- mi>2</c->
        <c- n>pizza</c-><c- p>:</c-><c- n>hasTopping</c-> <c- n>topping4</c-><c- o>-</c-><c- mi>3</c->
        <c- n>pizza</c-><c- p>:</c-><c- n>hasTopping</c-> <c- n>topping4</c-><c- o>-</c-><c- mi>4</c->
    <c- p>]</c->

    <c- c1>// Pizza 5</c->

    <c- n>instance</c-> <c- n>base5</c-> <c- p>:</c-> <c- n>pizza</c-><c- p>:</c-><c- nc>DeepPanBase</c->
    <c- n>instance</c-> <c- n>topping5</c-><c- o>-</c-><c- mi>1</c-> <c- p>:</c-> <c- n>pizza</c-><c- p>:</c-><c- nc>TobascoTopping</c->
    <c- n>instance</c-> <c- n>topping5</c-><c- o>-</c-><c- mi>2</c-> <c- p>:</c-> <c- n>pizza</c-><c- p>:</c-><c- nc>ParmesanTopping</c->
    <c- n>instance</c-> <c- n>topping5</c-><c- o>-</c-><c- mi>3</c-> <c- p>:</c-> <c- n>pizza</c-><c- p>:</c-><c- nc>JalapenoPepperTopping</c->
    <c- n>instance</c-> <c- n>pizza5</c-> <c- p>:</c-> <c- n>pizza</c-><c- p>:</c-><c- nc>VegetarianPizza</c-> <c- p>[</c->
        <c- n>pizza</c-><c- p>:</c-><c- n>hasId</c-> <c- s>"5"</c->
        <c- n>pizza</c-><c- p>:</c-><c- n>hasBase</c-> <c- n>base5</c->
        <c- n>pizza</c-><c- p>:</c-><c- n>hasTopping</c-> <c- n>topping5</c-><c- o>-</c-><c- mi>1</c->
        <c- n>pizza</c-><c- p>:</c-><c- n>hasTopping</c-> <c- n>topping5</c-><c- o>-</c-><c- mi>2</c->
        <c- n>pizza</c-><c- p>:</c-><c- n>hasTopping</c-> <c- n>topping5</c-><c- o>-</c-><c- mi>3</c->
    <c- p>]</c->

    <c- c1>// Pizza 6</c->

    <c- n>instance</c-> <c- n>base6</c-> <c- p>:</c-> <c- n>pizza</c-><c- p>:</c-><c- nc>DeepPanBase</c->
    <c- n>instance</c-> <c- n>topping6</c-><c- o>-</c-><c- mi>1</c-> <c- p>:</c-> <c- n>pizza</c-><c- p>:</c-><c- nc>TomatoTopping</c->
    <c- n>instance</c-> <c- n>topping6</c-><c- o>-</c-><c- mi>2</c-> <c- p>:</c-> <c- n>pizza</c-><c- p>:</c-><c- nc>JalapenoPepperTopping</c->
    <c- n>instance</c-> <c- n>pizza6</c-> <c- p>:</c-> <c- n>pizza</c-><c- p>:</c-><c- nc>VegetarianPizza</c-> <c- p>[</c->
        <c- n>pizza</c-><c- p>:</c-><c- n>hasId</c-> <c- s>"6"</c->
        <c- n>pizza</c-><c- p>:</c-><c- n>hasBase</c-> <c- n>base6</c->
        <c- n>pizza</c-><c- p>:</c-><c- n>hasTopping</c-> <c- n>topping6</c-><c- o>-</c-><c- mi>1</c->
        <c- n>pizza</c-><c- p>:</c-><c- n>hasTopping</c-> <c- n>topping6</c-><c- o>-</c-><c- mi>1</c->
    <c- p>]</c->

<c- p>}</c->
</pre>
    <h3 class="heading settled" data-level="1.6" id="tutorial1-edit-oml-description-bundle"><span class="secno">1.6. </span><span class="content">Edit OML Description Bundle</span><a class="self-link" href="#tutorial1-edit-oml-description-bundle"></a></h3>
    <p>Now, you will include the restaurant description in a description bundle that will be analyzed as a dataset with closed-world assumptions. This requires the description bundle to use the pizza vocabulary bundle above in order to reuse its closed world assumptions.  Additionally, it automatically asserts that instances in the bundled descriptions are the only ones available in the world.</p>
    <ol>
     <li data-md>
      <p>Double-click on the <code>description/bundle.oml</code> file in the <a data-link-type="dfn" href="#model-explorer-view" id="ref-for-model-explorer-view⑥">Model Explorer view</a> to open the editor (if not already open).</p>
      <p><img src="assets/tutorial1/Edit-Description-Bundle.png" width="100%"></p>
     <li data-md>
      <p>Copy the following OML code and paste it as the new content of description bundle.</p>
    </ol>
<pre class="language-scala highlight"><c- nd>@dc</c-><c- p>:</c-><c- n>description</c-> <c- s>"A description bundle for closed-world reasoning about a restaurant"</c->
<c- n>description</c-> <c- n>bundle</c-> <c- o>&lt;</c-><c- n>http</c-><c- p>:</c-><c- c1>//example.com/tutorial1/description/bundle#> as ^bundle {</c->

    <c- n>uses</c-> <c- o>&lt;</c-><c- n>http</c-><c- p>:</c-><c- c1>//purl.org/dc/elements/1.1/> as dc</c->
    
    <c- c1>// The description bundle "uses" the vocabulary bundle world closure axioms</c->
    <c- n>uses</c-> <c- o>&lt;</c-><c- n>http</c-><c- p>:</c-><c- c1>//example.com/tutorial1/vocabulary/pizza-bundle#></c->

    <c- c1>// The description bundle "includes" the restaurant description </c->
    <c- n>includes</c-> <c- o>&lt;</c-><c- n>http</c-><c- p>:</c-><c- c1>//example.com/tutorial1/description/restaurant#></c->
    
<c- p>}</c->
</pre>
    <h3 class="heading settled" data-level="1.7" id="tutorial1-run-build-task"><span class="secno">1.7. </span><span class="content">Run Build Task</span><a class="self-link" href="#tutorial1-run-build-task"></a></h3>
    <p>Now, it is time to run the Gradle <code>build</code> task of the project to verify whether the description bundle is logically consistent (and uses vocabulary bundles that have satisfiable classes). The OML code we have so far should pass this test.</p>
    <ol>
     <li data-md>
      <p>Click on the <a data-link-type="dfn" href="#gradle-tasks-view" id="ref-for-gradle-tasks-view">Gradle Tasks view</a> and wait until the <code>tutorial1</code> project shows up there (keep an eye on the loading message in the status bar bottom-right).</p>
      <p><img src="assets/tutorial1/Show-Gradle-Tasks.png" width="100%"></p>
     <li data-md>
      <p>Expand the <code>tutorial1</code> node followed by expanding the <code>oml</code> node.</p>
     <li data-md>
      <p>Double-click on the <code>build</code> task and wait for it to finish running in the <a data-link-type="dfn" href="#gradle-executions-view" id="ref-for-gradle-executions-view">Gradle Executions view</a>.</p>
    </ol>
    <video controls style="border:1px groove black;" width="100%">
     <source src="assets/tutorial1/Run-Build-Task.mov">
    </video>
    <ol>
     <li data-md>
      <p>Inspect the build status in the <a data-link-type="dfn" href="#gradle-executions-view" id="ref-for-gradle-executions-view①">Gradle Executions view</a> and notice that it is all green icons.</p>
      <p><img src="assets/tutorial1/Successful-Build.png" width="100%"></p>
    </ol>
    <h3 class="heading settled" data-level="1.8" id="tutorial1-fix-logical-inconsistency"><span class="secno">1.8. </span><span class="content">Fix Logical Inconsistency</span><a class="self-link" href="#tutorial1-fix-logical-inconsistency"></a></h3>
    <p>Now, we will introduce a logical problem in the OML code above and see how the reasoner helps us detect it and explain it.</p>
    <p><strong>Introducing a problem</strong></p>
    <ol>
     <li data-md>
      <p>Click on the <code>restaurant.oml</code> editor to bring it in focus.</p>
     <li data-md>
      <p>In line 30, change the <code>hasId</code> property value of instance <code>pizza2</code> to "1" (from "2"), to become like the value of <code>hasId</code> of instance <code>pizza1</code> (in line 16). Save the editor.</p>
      <p><img src="assets/tutorial1/Change-Pizza2-Id.png" width="100%"></p>
     <li data-md>
      <p>In the <a data-link-type="dfn" href="#gradle-tasks-view" id="ref-for-gradle-tasks-view①">Gradle Tasks view</a> double-click to rerun task <code>tutorial1/oml/build</code> again, and wait for it to finish running in the <a data-link-type="dfn" href="#gradle-executions-view" id="ref-for-gradle-executions-view②">Gradle Executions view</a>.</p>
     <li data-md>
      <p>Inspect the build status in the <a data-link-type="dfn" href="#gradle-executions-view" id="ref-for-gradle-executions-view③">Gradle Executions view</a> and notice that it now shows a failure (red icons) on task <code>owlReason</code>.</p>
      <p><img src="assets/tutorial1/Build-Failure.png" width="100%"></p>
     <li data-md>
      <p>Right click on the <code>Execute run for :owlReason</code> red icon and select <code>Show Failures</code> from the context menu. The follow dialog shows up saying that some "Ontology is inconsistent. Check tutorial1/build/reports/reasoning.xml for more details". Click Close button.</p>
      <p><img src="assets/tutorial1/Failure-Dialog.png" width="100%"></p>
     <li data-md>
      <p>In the <a data-link-type="dfn" href="#model-explorer-view" id="ref-for-model-explorer-view⑦">Model Explorer view</a>, right click on the <code>tutorial1</code> project and choose <em>Refresh</em>. Then, navigate to file <code>orial1/build/reports/reasoning.xml</code> and double click on it. The file opens in the <code>Junit</code> view showing the problem as an inconsistency (on the left) and providing an explanation for it (on the right).</p>
    </ol>
    <video controls style="border:1px groove black;" width="100%">
     <source src="assets/tutorial1/Inspect-Inconsistency.mov">
    </video>
    <p><strong>Explaining the problem</strong></p>
    <p>This problem demonstrates why it is useful to use a logical reasoner to detect inconsistencies that may otherwise be non-obvious or unexpected. When this occurs, the reasoner provides a brief description and a minimal ontology that demonstrates the problem.</p>
    <p>In this case, the brief description is <em>"an individual belongs to a type and its complement"</em>. This means there exists an individual (called an instance in OML) in the model that can be inferred, using the logical semantics of the used vocabulary, to be classified by two classes that are disjoint (i.e., do not have an intersection, or in other words are a complement of each other, hence cannot be types of the same instance).</p>
    <p><img src="assets/tutorial1/Logical-Explanation.png" width="100%"></p>
    <p>Looking at the minimal ontology presented, we can figure out the cause of the problem. It says that relation <code>hasBase</code> is <em>functional</em>, meaning that it can have maximum one value for a given instance. Looking at the relevant snippet of the pizza vocabulary confirms that.</p>
<pre class="language-scala highlight"><c- nd>@rdfs</c-><c- p>:</c-><c- n>comment</c-> <c- s>"A relation from a pizza to a base"</c->
<c- n>relation</c-> <c- n>entity</c-> <c- nc>HasBase</c-> <c- p>[</c->
    <c- n>from</c-> <c- nc>Pizza</c->
    <c- n>to</c-> <c- nc>PizzaBase</c->
    <c- n>forward</c-> <c- n>hasBase</c->
    <c- n>reverse</c-> <c- n>isBaseOf</c->
    <c- n>functional</c->
    <c- n>inverse</c-> <c- n>functional</c->
<c- p>]</c-> <c- o>&lt;</c-> <c- nc>HasIngredient</c->
</pre>
    <p>Moreover, it says that instance <code>base1</code> is a value of property <code>hasBase</code> on instance <code>pizza1</code>, and instance <code>base2</code> is a value of property <code>hasBase</code> on instance <code>pizza2</code>. Looking at the relevant snippet of the restaurant description confirms that.</p>
<pre class="language-scala highlight"><c- n>instance</c-> <c- n>base1</c-> <c- p>:</c-> <c- n>pizza</c-><c- p>:</c-><c- nc>DeepPanBase</c->
<c- n>instance</c-> <c- n>pizza1</c-> <c- p>:</c-> <c- n>pizza</c-><c- p>:</c-><c- nc>American</c-> <c- p>[</c->
    <c- n>pizza</c-><c- p>:</c-><c- n>hasId</c-> <c- s>"1"</c->
    <c- n>pizza</c-><c- p>:</c-><c- n>hasBase</c-> <c- n>base1</c->
<c- p>]</c->
<c- n>instance</c-> <c- n>base2</c-> <c- p>:</c-> <c- n>pizza</c-><c- p>:</c-><c- nc>ThinAndCrispyBase</c->
<c- n>instance</c-> <c- n>pizza2</c-> <c- p>:</c-> <c- n>pizza</c-><c- p>:</c-><c- nc>American</c-> <c- p>[</c->
    <c- n>pizza</c-><c- p>:</c-><c- n>hasId</c-> <c- s>"1"</c->
    <c- n>pizza</c-><c- p>:</c-><c- n>hasBase</c-> <c- n>base2</c->
<c- p>]</c->
</pre>
    <p>So far so good, where is the issue then?</p>
    <p>The explanation highlights that <code>pizza1</code> and <code>pizza2</code> have the same value ("1") of property <code>hasId</code>, which is defined by the <code>pizza</code> vocabulary to be <em>functional</em> (can have a maximum one value per instance). It infers from this that <code>pizza1</code> and <code>pizza2</code> are two names of a single pizza instance.</p>
<pre class="language-scala highlight"><c- n>scalar</c-> <c- n>property</c-> <c- n>hasId</c-> <c- p>[</c->
    <c- n>domain</c-> <c- nc>IdentifiedThing</c->
    <c- n>range</c-> <c- n>xsd</c-><c- p>:</c-><c- n>string</c->
    <c- n>functional</c->
<c- p>]</c->   
</pre>
    <p>In light of the above, and having established previously that property <code>hasBase</code> is <em>functional</em>, it follows logically that <code>base1</code> and <code>base2</code> must be two names of the same base individual. But wait, we asserted in the restaurant description that those instances are typed by concepts <code>DeepPanBase</code> and <code>ThinAndCrispyBase</code>, respectively. This means now that the same base instance is typed by both these types.</p>
    <p>However, the explanation also says that these two types are in fact disjoint. Where did it get this from? It turns out to be a generated assertion in the <code>pizza-bundle</code> vocabulary bundle. Such assertion is generated since the two types do not have a common subtype in the <code>pizza</code> vocabulary (included in the vocabulary bundle). Such closed-world semantics is a benefit of using a vocabulary bundle.</p>
    <p>Now, let us put all those inferences together to understand the reported problem <em>"an individual belongs to a type and its complement"</em>. It turns out that the individual here is known by the two names <code>base1</code> and <code>base2</code> and it is inferred to belong to type <code>DeepPanBase</code> and its complement type <code>ThinAndCrispyBase</code>, which is a logical inconsistency.</p>
    <p><strong>Fixing the problem</strong></p>
    <ol>
     <li data-md>
      <p>Let’s now fix the problem by reverting the change we just did. Click on the <code>restaurant</code> editor again and navigate to line 30 and restore the original <code>hasId</code> property value of <code>pizza2</code> to "2". Save the editor.</p>
     <li data-md>
      <p>Click on the <a data-link-type="dfn" href="#gradle-tasks-view" id="ref-for-gradle-tasks-view②">Gradle Tasks view</a> and double-click to rerun the <code>tutorial1/oml/build</code> task again and wait for it to finish running in the <a data-link-type="dfn" href="#gradle-executions-view" id="ref-for-gradle-executions-view④">Gradle Executions view</a>.</p>
     <li data-md>
      <p>Inspect the build status in the <a data-link-type="dfn" href="#gradle-executions-view" id="ref-for-gradle-executions-view⑤">Gradle Executions view</a> and notice that it is back to showing green icons.</p>
    </ol>
    <h3 class="heading settled" data-level="1.9" id="tutorial1-run-query-task"><span class="secno">1.9. </span><span class="content">Run Query Task</span><a class="self-link" href="#tutorial1-run-query-task"></a></h3>
    <p>Now that the model is consistent, it is time to get some value out of it by using it to answer business questions. To do that, we will run some queries in SPARQL on the model and inspect their results.</p>
    <ol>
     <li data-md>
      <p>Navigate in the <a data-link-type="dfn" href="#model-explorer-view" id="ref-for-model-explorer-view⑧">Model Explorer view</a> to the <code>src</code> folder, and right click on it and choose New -> Folder.</p>
      <p><img src="assets/tutorial1/Create-SPARQL-Folder.png" style="border:1px groove black;" width="100%"></p>
     <li data-md>
      <p>Enter the name of the folder as <code>sparql</code> and press Finish. This creates a new folder <code>src/sparql</code> in the <a data-link-type="dfn" href="#model-explorer-view" id="ref-for-model-explorer-view⑨">Model Explorer view</a>.</p>
      <p><img src="assets/tutorial1/SPARQL-Folder.png" width="100%"></p>
     <li data-md>
      <p>Right click on the <code>src/sparql</code> folder in the <a data-link-type="dfn" href="#model-explorer-view" id="ref-for-model-explorer-view①⓪">Model Explorer view</a> and select New -> File.</p>
      <p><img src="assets/tutorial1/Create-SPARQL-Query.png" width="100%"></p>
     <li data-md>
      <p>Enter the name of the file as <code>NumberOfToppings.sparql</code> and press Finish. This creates a new file under the <code>sparql</code> folder in the <a data-link-type="dfn" href="#model-explorer-view" id="ref-for-model-explorer-view①①">Model Explorer view</a>.</p>
     <li data-md>
      <p>Paste the following SPARQL code as the content of the file editor and save it.</p>
    </ol>
<pre class="language-scala highlight"><c- nc>PREFIX</c-> <c- n>pizza</c-><c- p>:</c->       <c- o>&lt;</c-><c- n>http</c-><c- p>:</c-><c- c1>//example.com/tutorial1/vocabulary/pizza#></c->
<c- nc>PREFIX</c-> <c- n>rdfs</c-><c- p>:</c->        <c- o>&lt;</c-><c- n>http</c-><c- p>:</c-><c- c1>//www.w3.org/2000/01/rdf-schema#></c->

<c- nc>SELECT</c-> <c- o>?</c-><c- n>toppingKind</c-> <c- p>(</c-><c- nc>COUNT</c-><c- p>(</c-><c- o>?</c-><c- n>topping</c-><c- p>)</c-> <c- n>as</c-> <c- o>?</c-><c- n>toppingCount</c-><c- p>)</c->
<c- nc>WHERE</c-> <c- p>{</c->
    <c- o>?</c-><c- n>r</c-> <c- n>pizza</c-><c- p>:</c-><c- n>hasTopping</c-> <c- o>?</c-><c- n>topping</c-> <c- p>.</c->
    <c- o>?</c-><c- n>topping</c-> <c- n>a</c-> <c- o>?</c-><c- n>toppingKind</c-> <c- p>.</c->
    <c- o>?</c-><c- n>toppingKind</c-> <c- n>rdfs</c-><c- p>:</c-><c- n>subClassOf</c-> <c- n>pizza</c-><c- p>:</c-><c- nc>PizzaTopping</c-> <c- p>.</c->
<c- p>}</c->
<c- nc>GROUP</c-> <c- nc>BY</c-> <c- o>?</c-><c- n>toppingKind</c->
</pre>
    <ol start="6">
     <li data-md>
      <p>Repeat the previous steps to create a second query file called <code>WhichPizzaIsSpicy.sparql</code> and this time use the following SPARQL code.</p>
    </ol>
<pre class="language-scala highlight"><c- nc>PREFIX</c-> <c- n>pizza</c-><c- p>:</c->       <c- o>&lt;</c-><c- n>http</c-><c- p>:</c-><c- c1>//example.com/tutorial1/vocabulary/pizza#></c->
<c- nc>PREFIX</c-> <c- n>rdfs</c-><c- p>:</c->        <c- o>&lt;</c-><c- n>http</c-><c- p>:</c-><c- c1>//www.w3.org/2000/01/rdf-schema#></c->

<c- nc>SELECT</c-> <c- nc>DISTINCT</c-> <c- o>?</c-><c- n>pizza</c->
<c- nc>WHERE</c-> <c- p>{</c->
    <c- o>?</c-><c- n>pizza</c-> <c- n>pizza</c-><c- p>:</c-><c- n>hasTopping</c-> <c- p>[</c-><c- n>pizza</c-><c- p>:</c-><c- n>hasSpiceness</c-> <c- s>"Hot"</c-><c- p>]</c->
    
<c- p>}</c->
</pre>
    <ol start="7">
     <li data-md>
      <p>Repeat the previous steps to create a third query file called <code>WhichPizzaIsVegan.sparql</code> and this time use the following SPARQL code.</p>
    </ol>
<pre class="language-scala highlight"><c- nc>PREFIX</c-> <c- n>pizza</c-><c- p>:</c->       <c- o>&lt;</c-><c- n>http</c-><c- p>:</c-><c- c1>//example.com/tutorial1/vocabulary/pizza#></c->
<c- nc>PREFIX</c-> <c- n>rdfs</c-><c- p>:</c->        <c- o>&lt;</c-><c- n>http</c-><c- p>:</c-><c- c1>//www.w3.org/2000/01/rdf-schema#></c->

<c- nc>SELECT</c-> <c- nc>DISTINCT</c-> <c- o>?</c-><c- n>pizza</c->
<c- nc>WHERE</c-> <c- p>{</c->
    <c- o>?</c-><c- n>pizza</c-> <c- n>a</c-> <c- n>pizza</c-><c- p>:</c-><c- nc>Pizza</c-> <c- p>.</c->
    <c- nc>FILTER</c-> <c- nc>NOT</c-> <c- nc>EXISTS</c-> <c- p>{</c->
       <c- o>?</c-><c- n>pizza</c-> <c- n>pizza</c-><c- p>:</c-><c- n>hasTopping</c-> <c- o>?</c-><c- n>nvt</c-> <c- p>.</c-> 
       <c- nc>FILTER</c-> <c- nc>NOT</c-> <c- nc>EXISTS</c-> <c- p>{</c-> 
           <c- o>?</c-><c- n>nvt</c-> <c- n>a</c-> <c- n>pizza</c-><c- p>:</c-><c- nc>VegetableTopping</c-> 
       <c- p>}</c->
    <c- p>}</c-> 
<c- p>}</c->
</pre>
    <ol start="8">
     <li data-md>
      <p>By now, you should see the following in the <a data-link-type="dfn" href="#model-explorer-view" id="ref-for-model-explorer-view①②">Model Explorer view</a>.</p>
      <p><img src="assets/tutorial1/All-Three-SPARQL-Queries.png" width="100%"></p>
     <li data-md>
      <p>Before we can run the queries, we need to have a database server with a query endpoint running. To do that, click on the <a data-link-type="dfn" href="#gradle-tasks-view" id="ref-for-gradle-tasks-view③">Gradle Tasks view</a> and navigate to the task <code>tutorial1/oml/startFuseki</code>. Double click the task and wait for it to finish running in the <a data-link-type="dfn" href="#gradle-executions-view" id="ref-for-gradle-executions-view⑥">Gradle Executions view</a>.</p>
    </ol>
    <p class="note" role="note"><span class="marker">Note:</span> A <em>Fuseki</em> server should now be running locally on your machine.</p>
    <ol start="10">
     <li data-md>
      <p>In the <a data-link-type="dfn" href="#gradle-tasks-view" id="ref-for-gradle-tasks-view④">Gradle Tasks view</a>, navigate to the task <code>tutorial1/oml/owlQuery</code> and double click to run it and wait for it to finish running in the <a data-link-type="dfn" href="#gradle-executions-view" id="ref-for-gradle-executions-view⑦">Gradle Executions view</a>. This task first loads the description bundle to the Fuseki server, then runs on it all the queries from the <code>sparql</code> folder.</p>
     <li data-md>
      <p>In the <a data-link-type="dfn" href="#model-explorer-view" id="ref-for-model-explorer-view①③">Model Explorer view</a>, right click on the <code>tutorial1</code> project and choose <em>Refresh</em>. Then, navigate to folder <code>build/results</code> to see the JSON files resulting from running the queries. Each one is named after one query.</p>
    </ol>
    <video controls style="border:1px groove black;" width="100%">
     <source src="assets/tutorial1/Show-Query-Results.mov">
    </video>
    <ol start="12">
     <li data-md>
      <p>Double click on file <code>NumberOfToppings.json</code> in the <a data-link-type="dfn" href="#model-explorer-view" id="ref-for-model-explorer-view①④">Model Explorer view</a> to open its editor.</p>
      <p><img src="assets/tutorial1/Show-Query-Results-1.png" width="100%"></p>
    </ol>
    <blockquote>
     <p>This query returned a table of two columns. The first column named <code>toppingKind</code> represents the unique topping kinds (identified by their IRIs) that were used by the restaurant in making pizzas. The second column named <code>toppingCount</code> represents the total count of each topping kind that were used to make those pizzas.</p>
    </blockquote>
    <ol start="13">
     <li data-md>
      <p>Double click on file <code>WhichPizzaIsSpicy.json</code> in the <a data-link-type="dfn" href="#model-explorer-view" id="ref-for-model-explorer-view①⑤">Model Explorer view</a> to open its editor.</p>
      <p><img src="assets/tutorial1/Show-Query-Results-2.png" width="100%"></p>
    </ol>
    <blockquote>
     <p>This query returned a table of one column named <code>pizza</code> which represents the pizzas (identified by their IRIs) that were considered spicy because the spiciness of one of their toppings was <em>Hot</em>.</p>
    </blockquote>
    <ol start="14">
     <li data-md>
      <p>Double click on file <code>WhichPizzaIsVegan.json</code> in the <a data-link-type="dfn" href="#model-explorer-view" id="ref-for-model-explorer-view①⑥">Model Explorer view</a> to open its editor.</p>
      <p><img src="assets/tutorial1/Show-Query-Results-3.png" width="100%"></p>
    </ol>
    <blockquote>
     <p>This query returned a table of one column named <code>pizza</code> which represents the pizzas (identified by their IRIs) that were considered <em>vegan</em> because none their toppings were non-vegetable.</p>
    </blockquote>
    <ol start="15">
     <li data-md>
      <p>Now that we are done running queries, we can stop the <em>Fuseki</em> server by navigating to task <code>tutorial1/oml/stopFuseki</code> in the <a data-link-type="dfn" href="#gradle-tasks-view" id="ref-for-gradle-tasks-view⑤">Gradle Tasks view</a>. Double click to run the task and  wait for it to finish running in the <a data-link-type="dfn" href="#gradle-executions-view" id="ref-for-gradle-executions-view⑧">Gradle Executions view</a>.</p>
    </ol>
    <p class="note" role="note"><span class="marker">Note:</span> This kills the <em>Fuseki</em> server process running on your machine.</p>
    <h3 class="heading settled" data-level="1.10" id="tutorial1-summary"><span class="secno">1.10. </span><span class="content">Summary</span><a class="self-link" href="#tutorial1-summary"></a></h3>
    <p>This tutorial introduced the OML language, its <em>Rosetta</em> workbench, and its main modeling and analysis workflows.  It demonstrated how OML can be used to define a semantic business vocabulary (<code>pizza</code> in this case) that can be used to describe knowledge (the pizzas made by a <code>restaurant</code> in this case), check its consistency and generate inferences with the help of a logical reasoner, and write queries to answer business questions. It also demonstrated how the <em>Rosetta</em> workbench can be used to author OML ontologies and run and inspect the results of analysis tasks (developed in Gradle), like the <em>build</em> task that invokes a logical reasoner, the <em>startFusei</em> and <em>stopFuseki</em> tasks to start/stop the <em>Fuseki</em> server, and the <em>owlQuery</em> task that runs SPARQL queries on the model.</p>
    <h2 class="heading settled" data-level="2" id="tutorial2"><span class="secno">2. </span><span class="content">Tutorial 2: OML Patterns</span><a class="self-link" href="#tutorial2"></a></h2>
    <p class="note" role="note"><span class="marker">Note:</span> This tutorial builds on <a href="#tutorial1">Tutorial 1</a>. Please do that first before proceeding.</p>
    <h3 class="heading settled" data-level="2.1" id="tutorial2-learning-objectives"><span class="secno">2.1. </span><span class="content">Learning Objectives</span><a class="self-link" href="#tutorial2-learning-objectives"></a></h3>
     This tutorial demonstrates the process of developing a methodology for capturing knowledge in a given business domain with OML. The methodology will be developed as a series of patterns, each of which represents a small step in the methodology and is encoded by some new vocabulary. As an example, we will develop a simple systems engineering methodology. The tutorial also demonstrates describing knowledge using instances of those patterns and organizing them into modules that capture related concerns. As an example, we will describe a fanciful space mission called Kepler16b, which is an exoplanet orbiting a binary star system called Kepler16—approximately 245 light-years from Earth. 
    <p class="note" role="note"><span class="marker">Note:</span> the source files created in this tutorial are available for reference in this <a href="https://github.com/opencaesar/kepler16b-example">repository</a>, but we encourage the reader to recreate them by following the instructions below.</p>
    <h3 class="heading settled" data-level="2.2" id="tutorial2-oml-project"><span class="secno">2.2. </span><span class="content">Create OML Project</span><a class="self-link" href="#tutorial2-oml-project"></a></h3>
    <p>We will start by creating an OML project that has a vocabulary bundle and a description bundle that uses it.</p>
    <ol>
     <li data-md>
      <p>In the [=Model Explorer view], right click and choose New -> OML Project.</p>
     <li data-md>
      <p>Name the project <code>tutorial2</code>. Click Next.</p>
     <li data-md>
      <p>Fill the OML project details as seen below. Click Finish.</p>
      <p><img src="assets/tutorial2/Create-OML-Project.png" width="100%"></p>
     <li data-md>
      <p>In the <a data-link-type="dfn" href="#model-explorer-view" id="ref-for-model-explorer-view①⑦">Model Explorer view</a>, double click on the <code>build.gradle</code> file, and modify the declared dependency on <code>core-vocabulary</code> to <code>metrology-vocabulary</code> instead. Save the editor.</p>
      <p><img src="assets/tutorial2/Modify-Gradle-Build.png" style="border:1px groove black;" width="100%"></p>
    </ol>
    <p class="note" role="note"><span class="marker">Note:</span> specifying <code>+</code> as a dynamic version for <code>metrology-vocabularies</code> will result in downloding the latest version. However, a safer approach would be to pin the dependency to the current major revision (e.g., <code>7.+</code>) to protect the project against future incompatible major revisions of <code>metrology-vocabularies</code>. At the time of this writing, the major revision for that library was <code>7.+</code> but this could be different when you take the tutorial. Click <a href="https://github.com/opencaesar/metrology-vocabularies/releases">here</a> to check what the latest version at this time is.</p>
    <ol>
     <li data-md>
      <p>In the <a data-link-type="dfn" href="#model-explorer-view" id="ref-for-model-explorer-view①⑧">Model Explorer view</a>, expand the <code>tutorial2</code> project, right-click on the <code>src/oml/example.com/tutorial2</code> folder, choose New -> OML Model and fill the OML model details as shown below. Click Finish.</p>
      <p><img src="assets/tutorial2/Create-Vocabulary-Bundle.png" width="100%"></p>
     <li data-md>
      <p>In the <a data-link-type="dfn" href="#model-explorer-view" id="ref-for-model-explorer-view①⑨">Model Explorer view</a>, double click on the file <code>src/oml/example.com/tutorial2/description/bundle.oml</code> to open its editor. Paste the following OML code as the contents of the file.</p>
    </ol>
<pre class="language-scala highlight"><c- n>description</c-> <c- n>bundle</c-> <c- o>&lt;</c-><c- n>http</c-><c- p>:</c-><c- c1>//example.com/tutorial2/description/bundle#> as ^bundle {</c->
	
  <c- n>uses</c-> <c- o>&lt;</c-><c- n>http</c-><c- p>:</c-><c- c1>//example.com/tutorial2/vocabulary/bundle#></c->
<c- p>}</c->
</pre>
    <p class="note" role="note"><span class="marker">Note:</span> since we be running SPARQL queries for every pattern, we will run a Fuseki server once now, and keep it running till the end of the tutorial when we will stop it.</p>
    <ol start="6">
     <li data-md>
      <p>From the <a data-link-type="dfn" href="#gradle-tasks-view" id="ref-for-gradle-tasks-view⑥">Gradle Tasks view</a>, run the task <code>tutorial2/oml/startFuseki</code> and wait until it finishes execution in the <a data-link-type="dfn" href="#gradle-executions-view" id="ref-for-gradle-executions-view⑨">Gradle Executions view</a>. It should run successfully with no errors.</p>
    </ol>
    <p class="note" role="note"><span class="marker">Note:</span> you should now be ready to create the patterns below. For each pattern, we give its synopsis, the new vocabulary required to support it, the new descriptions to use it, and finally the queries that we can analyze it.</p>
    <h3 class="heading settled" data-level="2.3" id="tutorial2-p1"><span class="secno">2.3. </span><span class="content">P1: Objective aggregates Objective</span><a class="self-link" href="#tutorial2-p1"></a></h3>
    <p><strong>Pattern Synopsis</strong></p>
    <p>A systems engineering endeavor begins with objectives to be achieved. Objectives are not requirements; they are desires. They may be in conflict. They may not be achievable in principle. They may not be feasible. They may be related such that achieving one objective helps to achieve another. We call this relationship <em>aggregates</em>, which could be important for planning a campaign of pursuit. <em>Aggregates</em> is a general relationship, broader than <em>objectives</em>, but is homomeric, meaning that parts and whole are of the same type. We say an <em>Objective</em> is an <em>AggregatedThing</em>, meaning it can aggregate or be aggregated. We further say an <em>Objective</em> <em>aggregates</em> only <em>Objectives</em> and is aggregated in only <em>Objectives</em> (this is called a restriction in OML).</p>
    <p><strong>New Vocabulary</strong></p>
    <p>We will create two vocabularies and add them to the vocabulary bundle. The first vocabulary is called <code>base</code>, which we will use to define basic patterns, and the second is called <code>mission</code>, which we will use to describe patterns related to missions in systems engineering. We will then add to them the details of pattern P1.</p>
    <ol>
     <li data-md>
      <p>Create a vocabulary with the IRI &lt;<code>http://example.com/tutorial2/vocabulary/base#</code>> and prefix <code>base</code>. Copy the following OML code as its contents. Save the editor.</p>
    </ol>
<pre class="language-scala highlight"><c- n>vocabulary</c-> <c- o>&lt;</c-><c- n>http</c-><c- p>:</c-><c- c1>//example.com/tutorial2/vocabulary/base#> as base {</c->

  <c- k>extends</c-> <c- o>&lt;</c-><c- n>http</c-><c- p>:</c-><c- c1>//www.w3.org/2000/01/rdf-schema#> as rdfs</c->
  <c- k>extends</c-> <c- o>&lt;</c-><c- n>http</c-><c- p>:</c-><c- c1>//www.w3.org/2001/XMLSchema#> as xsd</c->
<c- p>}</c->
</pre>
    <ol start="2">
     <li data-md>
      <p>Create a vocabulary with the IRI &lt;<code>http://example.com/tutorial2/vocabulary/mission#</code>> and prefix <code>mission</code>. Copy the following OML code as its contents. Save the editor.</p>
    </ol>
<pre class="language-scala highlight"><c- n>vocabulary</c-> <c- o>&lt;</c-><c- n>http</c-><c- p>:</c-><c- c1>//example.com/tutorial2/vocabulary/mission#> as mission {</c->
	
  <c- k>extends</c-> <c- o>&lt;</c-><c- n>http</c-><c- p>:</c-><c- c1>//www.w3.org/2000/01/rdf-schema#> as rdfs</c->
  <c- k>extends</c-> <c- o>&lt;</c-><c- n>http</c-><c- p>:</c-><c- c1>//example.com/tutorial2/vocabulary/base#> as base</c->
<c- p>}</c->
</pre>
    <ol start="3">
     <li data-md>
      <p>Open the <code>vocabulary/bundle</code> editor, Copy the follow OML code as its contents. Save the editor.</p>
    </ol>
<pre class="language-scala highlight"><c- n>vocabulary</c-> <c- n>bundle</c-> <c- o>&lt;</c-><c- n>http</c-><c- p>:</c-><c- c1>//example.com/tutorial2/vocabulary/bundle#> as ^bundle {</c->
	
  <c- n>includes</c-> <c- o>&lt;</c-><c- n>http</c-><c- p>:</c-><c- c1>//example.com/tutorial2/vocabulary/mission#></c->
<c- p>}</c->
</pre>
    <p class="note" role="note"><span class="marker">Note:</span> how we only added the <code>mission</code> vocabulary, not the <code>base</code> vocabulary, to the bundle. This is because in OML, import statements (like <code>includes</code>, <code>extends</code>, and <code>uses</code>) are transitive. Since <code>mission</code> already imports (extends) <code>base</code>, the bundle would transitively include <code>base</code> as well. But It would not be wrong to explicitly include <code>base</code> in the bundle too.</p>
    <ol start="4">
     <li data-md>
      <p>if you did all the previous steps correctly, the following should be the contents of all files so far.</p>
      <p><img src="assets/tutorial2/P1-Initial-Ontologies.png" width="100%"></p>
     <li data-md>
      <p>In the <code>vocabulary/base</code> ontology, append the following OML code to its body (i.e., insert it before the closing <code>}</code> bracket):</p>
    </ol>
<pre class="highlight line-numbered"><span class="line-no"></span><span class="line"><c- nd>@rdfs</c-><c- p>:</c-><c- n>comment</c-> <c- s>"The class of things having an id and a canonical name"</c-></span><span class="line-no"></span><span class="line"><c- n>aspect</c-> <c- nc>IdentifiedThing</c-> <c- p>[</c-></span><span class="line-no highlight-line" data-line="3"></span><span class="line highlight-line">  <c- n>key</c-> <c- n>hasIdentifier</c-></span><span class="line-no"></span><span class="line"><c- p>]</c-></span><span class="line-no"></span><span class="line"></span><span class="line-no"></span><span class="line"><c- nd>@rdfs</c-><c- p>:</c-><c- n>comment</c-> <c- s>"The has canonical name property"</c-></span><span class="line-no"></span><span class="line"><c- n>scalar</c-> <c- n>property</c-> <c- n>hasCanonicalName</c-> <c- p>[</c-></span><span class="line-no"></span><span class="line">  <c- n>domain</c-> <c- nc>IdentifiedThing</c-></span><span class="line-no"></span><span class="line">  <c- n>range</c-> <c- n>xsd</c-><c- p>:</c-><c- n>string</c-></span><span class="line-no"></span><span class="line"><c- p>]</c-></span><span class="line-no"></span><span class="line"></span><span class="line-no"></span><span class="line"><c- nd>@rdfs</c-><c- p>:</c-><c- n>comment</c-> <c- s>"The has identifier property"</c-></span><span class="line-no"></span><span class="line"><c- n>scalar</c-> <c- n>property</c-> <c- n>hasIdentifier</c-> <c- p>[</c-></span><span class="line-no"></span><span class="line">  <c- n>domain</c-> <c- nc>IdentifiedThing</c-></span><span class="line-no"></span><span class="line">  <c- n>range</c-> <c- n>xsd</c-><c- p>:</c-><c- n>string</c-></span><span class="line-no highlight-line" data-line="16"></span><span class="line highlight-line">  <c- n>functional</c-></span><span class="line-no"></span><span class="line"><c- p>]</c-></span><span class="line-no"></span><span class="line"></span><span class="line-no"></span><span class="line"><c- nd>@rdfs</c-><c- p>:</c-><c- n>comment</c-> <c- s>"The has description property"</c-></span><span class="line-no"></span><span class="line"><c- n>scalar</c-> <c- n>property</c-> <c- n>hasDescription</c-> <c- p>[</c-></span><span class="line-no"></span><span class="line">  <c- n>domain</c-> <c- nc>IdentifiedThing</c-></span><span class="line-no"></span><span class="line">  <c- n>range</c-> <c- n>xsd</c-><c- p>:</c-><c- n>string</c-></span><span class="line-no"></span><span class="line"><c- p>]</c-></span><span class="line-no"></span><span class="line"></span><span class="line-no"></span><span class="line"> <c- nd>@rdfs</c-><c- p>:</c-><c- n>comment</c-> <c- s>"The class of things that can be aggregated"</c-></span><span class="line-no"></span><span class="line"><c- n>aspect</c-> <c- nc>AggregatedThing</c-></span><span class="line-no"></span><span class="line"></span><span class="line-no"></span><span class="line"><c- nd>@rdfs</c-><c- p>:</c-><c- n>comment</c-> <c- s>"The aggregates relation between aggregated things"</c-></span><span class="line-no"></span><span class="line"><c- n>relation</c-> <c- n>entity</c-> <c- nc>Aggregates</c-> <c- p>[</c-></span><span class="line-no"></span><span class="line">  <c- n>from</c-> <c- nc>AggregatedThing</c-></span><span class="line-no"></span><span class="line">  <c- n>to</c-> <c- nc>AggregatedThing</c-></span><span class="line-no"></span><span class="line">  <c- n>forward</c-> <c- n>aggregates</c-></span><span class="line-no"></span><span class="line">  <c- n>reverse</c-> <c- n>isAggregatedIn</c-></span><span class="line-no"></span><span class="line">  <c- n>asymmetric</c-></span><span class="line-no"></span><span class="line">  <c- n>irreflexive</c-></span><span class="line-no"></span><span class="line"><c- p>]</c-></span></pre>
    <p class="note" role="note"><span class="marker">Note:</span> the syntax used for annotations on ontology members above (e.g., <code>@rdfs:comment "value"</code> used to put a comment on a vocabulary member). What comes after the <code>@</code> is the IRI of an annotation property (declared in some vocabulary) followed by a (literal or IRI) value.</p>
    <p class="note" role="note"><span class="marker">Note:</span> the <code>key</code> axiom in the <code>IdentifiedThing</code> aspect. It says that instances of this type must have unique values for their <code>hasIdentifier</code> property (which is similar to the concept of primary key in relational schemas). For this to work as expected, properties that are part of a key needs to be defined as <code>functional</code>, meaning that may have a maximum of one value. Otherwise, two instances with different values for <code>hasIdentifier</code> may still be inferred as aliases to the same instance with twos values for the key property.</p>
    <ol start="6">
     <li data-md>
      <p>In the <code>vocabulary/mission</code> ontology, append the following OML code to its body:</p>
    </ol>
<pre class="language-scala highlight"><c- nd>@rdfs</c-><c- p>:</c-><c- n>comment</c-> <c- s>"An Objective represents a specific interest </c->
<c- s>that one or more stakeholders have in the successful execution of a mission."</c->
<c- n>concept</c-> <c- nc>Objective</c-> <c- o>&lt;</c-> <c- n>base</c-><c- p>:</c-><c- nc>IdentifiedThing</c-><c- p>,</c-> <c- n>base</c-><c- p>:</c-><c- nc>AggregatedThing</c-> <c- p>[</c->
  <c- n>restricts</c-> <c- n>all</c-> <c- n>base</c-><c- p>:</c-><c- n>aggregates</c-> <c- n>to</c-> <c- nc>Objective</c->
  <c- n>restricts</c-> <c- n>all</c-> <c- n>base</c-><c- p>:</c-><c- n>isAggregatedIn</c-> <c- n>to</c-> <c- nc>Objective</c->
<c- p>]</c->
</pre>
    <ol start="7">
     <li data-md>
      <p>This is a visualization of the vocabularies you created so far.</p>
      <table>
       <tbody>
        <tr>
         <td><img src="assets/tutorial2/P1-Base-Vocabulary.png" style="border:1px groove black;" width="100%">
         <td><img src="assets/tutorial2/P1-Mission-Vocabulary.png" style="border:1px groove black;" width="100%">
        <tr>
         <td>Base Vocabulary
         <td>Mission Vocabulary
      </table>
     <li data-md>
      <p>Let us check that our ontologies are good so far, by running the task <code>tutorial2/oml/build</code> from the <a data-link-type="dfn" href="#gradle-tasks-view" id="ref-for-gradle-tasks-view⑦">Gradle Tasks view</a>, and waiting for it to finish running in the <a data-link-type="dfn" href="#gradle-executions-view" id="ref-for-gradle-executions-view①⓪">Gradle Executions view</a>. This should run with no errors.</p>
    </ol>
    <p><strong>New Description</strong></p>
    <p>We will now create a new description model for the objectives of the Kepler16 mission, then add it to the description bundle. Each description is identified with an id and a canonical name and may specify which other objective it aggregates.</p>
    <ol start="9">
     <li data-md>
      <p>Create a description with the IRI &lt;<code>http://example.com/tutorial2/description/objectives#</code>> and prefix <code>objectives</code>. Copy the following OML code as its contents. Save the editor.</p>
    </ol>
<pre class="language-scala highlight"><c- n>description</c-> <c- o>&lt;</c-><c- n>http</c-><c- p>:</c-><c- c1>//example.com/tutorial2/description/objectives#> as objectives {</c->

  <c- n>uses</c-> <c- o>&lt;</c-><c- n>http</c-><c- p>:</c-><c- c1>//example.com/tutorial2/vocabulary/base#> as base</c->
  <c- n>uses</c-> <c- o>&lt;</c-><c- n>http</c-><c- p>:</c-><c- c1>//example.com/tutorial2/vocabulary/mission#> as mission</c->

  <c- n>instance</c-> <c- n>characterize</c-><c- o>-</c-><c- n>atmosphere</c-> <c- p>:</c-> <c- n>mission</c-><c- p>:</c-><c- nc>Objective</c-> <c- p>[</c->
    <c- n>base</c-><c- p>:</c-><c- n>hasIdentifier</c-> <c- s>"O.01"</c->
    <c- n>base</c-><c- p>:</c-><c- n>hasCanonicalName</c-> <c- s>"Characterize the atmosphere of Kepler 16b"</c->
    <c- n>base</c-><c- p>:</c-><c- n>aggregates</c-> <c- n>characterize</c-><c- o>-</c-><c- n>liquid</c-><c- o>-</c-><c- n>ocean</c->
  <c- p>]</c->
  <c- n>instance</c-> <c- n>characterize</c-><c- o>-</c-><c- n>liquid</c-><c- o>-</c-><c- n>ocean</c-> <c- p>:</c-> <c- n>mission</c-><c- p>:</c-><c- nc>Objective</c-> <c- p>[</c->
    <c- n>base</c-><c- p>:</c-><c- n>hasIdentifier</c-> <c- s>"O.02"</c->
    <c- n>base</c-><c- p>:</c-><c- n>hasCanonicalName</c-> <c- s>"Characterize the liquid ocean of Kepler 16b"</c->
  <c- p>]</c->
  <c- n>instance</c-> <c- n>characterize</c-><c- o>-</c-><c- n>gravitational</c-><c- o>-</c-><c- n>field</c-> <c- p>:</c-> <c- n>mission</c-><c- p>:</c-><c- nc>Objective</c-> <c- p>[</c->
    <c- n>base</c-><c- p>:</c-><c- n>hasIdentifier</c-> <c- s>"O.03"</c->
    <c- n>base</c-><c- p>:</c-><c- n>hasCanonicalName</c-> <c- s>"Characterize the gravitational field of Kepler 16b"</c->
    <c- n>base</c-><c- p>:</c-><c- n>aggregates</c-> <c- n>characterize</c-><c- o>-</c-><c- n>liquid</c-><c- o>-</c-><c- n>ocean</c->
    <c- n>base</c-><c- p>:</c-><c- n>aggregates</c-> <c- n>characterize</c-><c- o>-</c-><c- n>rocky</c-><c- o>-</c-><c- n>core</c->
  <c- p>]</c->
  <c- n>instance</c-> <c- n>characterize</c-><c- o>-</c-><c- n>rocky</c-><c- o>-</c-><c- n>core</c-> <c- p>:</c-> <c- n>mission</c-><c- p>:</c-><c- nc>Objective</c-> <c- p>[</c->
    <c- n>base</c-><c- p>:</c-><c- n>hasIdentifier</c-> <c- s>"O.04"</c->
    <c- n>base</c-><c- p>:</c-><c- n>hasCanonicalName</c-> <c- s>"Characterize the rocky core of Kepler 16b"</c->
    <c- n>base</c-><c- p>:</c-><c- n>aggregates</c-> <c- n>characterize</c-><c- o>-</c-><c- n>rocky</c-><c- o>-</c-><c- n>core</c-><c- o>-</c-><c- n>density</c->
    <c- n>base</c-><c- p>:</c-><c- n>aggregates</c-> <c- n>characterize</c-><c- o>-</c-><c- n>rocky</c-><c- o>-</c-><c- n>core</c-><c- o>-</c-><c- n>shape</c->
  <c- p>]</c->
  <c- n>instance</c-> <c- n>characterize</c-><c- o>-</c-><c- n>rocky</c-><c- o>-</c-><c- n>core</c-><c- o>-</c-><c- n>density</c-> <c- p>:</c-> <c- n>mission</c-><c- p>:</c-><c- nc>Objective</c-> <c- p>[</c->
    <c- n>base</c-><c- p>:</c-><c- n>hasIdentifier</c-> <c- s>"O.05"</c->
    <c- n>base</c-><c- p>:</c-><c- n>hasCanonicalName</c-> <c- s>"Characterize the core density of Kepler 16b"</c->
  <c- p>]</c->
  <c- n>instance</c-> <c- n>characterize</c-><c- o>-</c-><c- n>rocky</c-><c- o>-</c-><c- n>core</c-><c- o>-</c-><c- n>shape</c-> <c- p>:</c-> <c- n>mission</c-><c- p>:</c-><c- nc>Objective</c-> <c- p>[</c->
    <c- n>base</c-><c- p>:</c-><c- n>hasIdentifier</c-> <c- s>"O.06"</c->
    <c- n>base</c-><c- p>:</c-><c- n>hasCanonicalName</c-> <c- s>"Characterize the core shape of Kepler 16b"</c->
  <c- p>]</c->
  <c- n>instance</c-> <c- n>characterize</c-><c- o>-</c-><c- n>environment</c-> <c- p>:</c-> <c- n>mission</c-><c- p>:</c-><c- nc>Objective</c-> <c- p>[</c->
    <c- n>base</c-><c- p>:</c-><c- n>hasIdentifier</c-> <c- s>"O.07"</c->
    <c- n>base</c-><c- p>:</c-><c- n>hasCanonicalName</c-> <c- s>"Characterize the energetic particule environment of the Kepler 16b binary star system"</c->
    <c- n>base</c-><c- p>:</c-><c- n>aggregates</c-> <c- n>characterize</c-><c- o>-</c-><c- n>liquid</c-><c- o>-</c-><c- n>ocean</c->
  <c- p>]</c->
<c- p>}</c->
</pre>
    <ol start="10">
     <li data-md>
      <p>This is a visualization of the descriptions you created so far.</p>
      <table>
       <tbody>
        <tr>
         <td><img src="assets/tutorial2/P1-Objectives-Description.png" style="border:1px groove black;" width="100%">
        <tr>
         <td>Objectives Desrciption
      </table>
     <li data-md>
      <p>Open the <code>description/bundle</code> editor, Append the follow OML code to the body. Save the editor.</p>
    </ol>
<pre class="language-scala highlight"><c- n>includes</c-> <c- o>&lt;</c-><c- n>http</c-><c- p>:</c-><c- c1>//example.com/tutorial2/description/objectives#></c->
</pre>
    <ol start="12">
     <li data-md>
      <p>Let us check that our ontologies are still good, by running the task <code>tutorial2/oml/build</code> from the <a data-link-type="dfn" href="#gradle-tasks-view" id="ref-for-gradle-tasks-view⑧">Gradle Tasks view</a>, and waiting for it to finish running in the <a data-link-type="dfn" href="#gradle-executions-view" id="ref-for-gradle-executions-view①①">Gradle Executions view</a>. This should run with no errors.</p>
    </ol>
    <p><strong>New Queries</strong></p>
    <p>Now that we have defined the vocabulary of the first pattern, and used it in the mission description, we will create a SPARQL query to extract the pattern instances from the description.</p>
    <ol start="13">
     <li data-md>
      <p>Create the file <code>src/sparql/objectives.sparql</code> and copy the following SPARQL code as its content. It looks for objectives in the model and selects their ids and names.</p>
    </ol>
<pre class="language-scala highlight"><c- nc>PREFIX</c-> <c- n>base</c-><c- p>:</c->        <c- o>&lt;</c-><c- n>http</c-><c- p>:</c-><c- c1>//example.com/tutorial2/vocabulary/base#></c->
<c- nc>PREFIX</c-> <c- n>mission</c-><c- p>:</c->     <c- o>&lt;</c-><c- n>http</c-><c- p>:</c-><c- c1>//example.com/tutorial2/vocabulary/mission#></c->

<c- nc>SELECT</c-> <c- nc>DISTINCT</c-> <c- o>?</c-><c- n>o1_id</c-> <c- o>?</c-><c- n>o1_name</c-> <c- o>?</c-><c- n>o2_id</c-> <c- o>?</c-><c- n>o2_name</c->
<c- nc>WHERE</c-> <c- p>{</c->
    <c- o>?</c-><c- n>o1</c-> <c- n>a</c-> <c- n>mission</c-><c- p>:</c-><c- nc>Objective</c-> <c- p>;</c->
    <c- n>base</c-><c- p>:</c-><c- n>hasIdentifier</c-> <c- o>?</c-><c- n>o1_id</c-> <c- p>;</c->
    <c- n>base</c-><c- p>:</c-><c- n>hasCanonicalName</c-> <c- o>?</c-><c- n>o1_name</c-> <c- p>;</c->
    <c- n>base</c-><c- p>:</c-><c- n>aggregates</c-> <c- p>[</c->
      <c- n>base</c-><c- p>:</c-><c- n>hasIdentifier</c-> <c- o>?</c-><c- n>o2_id</c-> <c- p>;</c->
      <c- n>base</c-><c- p>:</c-><c- n>hasCanonicalName</c-> <c- o>?</c-><c- n>o2_name</c->
    <c- p>]</c->
<c- p>}</c->
<c- nc>ORDER</c-> <c- nc>BY</c-> <c- o>?</c-><c- n>o1_id</c-> <c- o>?</c-><c- n>o2_id</c->
</pre>
    <ol start="14">
     <li data-md>
      <p>Let’s now run this query by running the task <code>tutorial2/oml/owlQuery</code> from the <a data-link-type="dfn" href="#gradle-tasks-view" id="ref-for-gradle-tasks-view⑨">Gradle Tasks view</a> and waiting for it to finish execution in the <a data-link-type="dfn" href="#gradle-executions-view" id="ref-for-gradle-executions-view①②">Gradle Executions view</a>. It should run with no errors.</p>
     <li data-md>
      <p>Right click on the project in the <a data-link-type="dfn" href="#model-explorer-view" id="ref-for-model-explorer-view②⓪">Model Explorer view</a> and select <code>Refresh</code>. Navigate to the file <code>build/results/objectives.json</code> and double click it to open its editor. You should see the following results in JSON.</p>
      <p><img src="assets/tutorial2/P1-Query-Results.png" width="100%"></p>
     <li data-md>
      <p>With this JSON results, one could develop a visualization like the following:</p>
    </ol>
    <p class="note" role="note"><span class="marker">Note:</span> the visualization code is not part of this tutorial</p>
    <table id="table1">
     <thead>
      <tr>
       <th>o1_id
       <th>o1_name
       <th>o2_id
       <th>o2_name
     <tbody>
      <tr>
       <td>O.01
       <td>Characterize the atmosphere of Kepler 16b
       <td>O.02
       <td>Characterize the liquid ocean of Kepler 16b
      <tr>
       <td>O.03
       <td>Characterize the gravitational field of Kepler 16b
       <td>O.02
       <td>Characterize the liquid ocean of Kepler 16b
      <tr>
       <td>O.03
       <td>Characterize the gravitational field of Kepler 16b
       <td>O.04
       <td>Characterize the rocky core of Kepler 16b
      <tr>
       <td>O.04
       <td>Characterize the rocky core of Kepler 16b
       <td>O.05
       <td>Characterize the core density of Kepler 16b
      <tr>
       <td>O.04
       <td>Characterize the rocky core of Kepler 16b
       <td>O.06
       <td>Characterize the core shape of Kepler 16b
      <tr>
       <td>O.07
       <td>Characterize the energetic particule environment of the Kepler 16b binary star system
       <td>O.02
       <td>Characterize the liquid ocean of Kepler 16b
    </table>
    <h3 class="heading settled" data-level="2.4" id="tutorial2-p2"><span class="secno">2.4. </span><span class="content">P2: Mission pursues Objective</span><a class="self-link" href="#tutorial2-p2"></a></h3>
    <p><strong>Pattern Synopsis</strong></p>
    <p>We undertake missions to pursue objectives. Again, objectives are not requirements. Part of the job of a mission is to negotiate an achievable set of objectives. Every mission pursues zero or more objectives. The lower bound is zero in the vocabulary because one-or-more is really a life-cycle completeness constraint. The notion of mission makes sense even if we don’t know what its objectives are. Every objective may be pursued by zero or more missions.</p>
    <p><strong>New Vocabulary</strong></p>
    <ol>
     <li data-md>
      <p>In the body of ontology <code>vocabulary/mission</code>, append the following OML code, which adds the concept of a <code>Mission</code> with relation entity <code>Purses</code>, after the existing concept of <code>Objective</code>. Save the editor.</p>
    </ol>
<pre class="language-scala highlight"><c- nd>@rdfs</c-><c- p>:</c-><c- n>comment</c-> <c- s>"A Mission pursues Objectives."</c->
<c- n>concept</c-> <c- nc>Mission</c-> <c- o>&lt;</c-> <c- n>base</c-><c- p>:</c-><c- nc>IdentifiedThing</c->

<c- nd>@rdfs</c-><c- p>:</c-><c- n>comment</c-> <c- s>"A Mission pursues zero or more Objectives."</c->
<c- n>relation</c-> <c- n>entity</c-> <c- nc>Pursues</c-> <c- p>[</c->
  <c- n>from</c-> <c- nc>Mission</c->
  <c- n>to</c-> <c- nc>Objective</c->
  <c- n>forward</c-> <c- n>pursues</c->
  <c- n>reverse</c-> <c- n>isPursuedBy</c->
  <c- n>asymmetric</c->
  <c- n>irreflexive</c->
<c- p>]</c->
</pre>
    <p class="note" role="note"><span class="marker">Note:</span> that relation entity <code>Purses</code> is a reified relation (i.e., a class of relation instances), where its forward <code>purses</code> and its reverse <code>isPursedBy</code> are unreified relations (i.e., simple references). In a description model, either a reified or an unreified version of the relation can be used. The former is useful when it is desired to give the link a name and other characterizations.</p>
    <p class="note" role="note"><span class="marker">Note:</span> the semantic (logical) flags specified on the relation entity <code>Pursues</code>. The first flag <code>reverse functional</code> means that an <code>Objective</code> (the target of the relation) can be pursued by a max of one <code>Mission</code> (the source of the relation). The second flag <code>asymmetric</code> means that if a mission pursues an objective, then it would be illogical to infer that the objective pursues the mission (remember with open world assumptions, anything can be inferred unless you state otherwise). The third flag <code>irreflexive</code> means that an instance cannot be related to itself by this relation.</p>
    <ol start="2">
     <li data-md>
      <p>The following is a visualization of the <code>mission</code> vocabulary so far:</p>
      <p><img src="assets/tutorial2/P2-Mission-Vocabulary.png" width="100%"></p>
     <li data-md>
      <p>Let us check that our ontologies are good so far, by running the task <code>tutorial2/oml/build</code> from the <a data-link-type="dfn" href="#gradle-tasks-view" id="ref-for-gradle-tasks-view①⓪">Gradle Tasks view</a>, and waiting for it to finish running in the <a data-link-type="dfn" href="#gradle-executions-view" id="ref-for-gradle-executions-view①③">Gradle Executions view</a>. This should run with no errors.</p>
    </ol>
    <p><strong>New Description</strong></p>
    <p>Let us now use the pattern in describing a couple of missions in kepler6b.</p>
    <ol start="4">
     <li data-md>
      <p>Create a description with the IRI &lt;<code>http://example.com/tutorial2/description/missions#</code>> and prefix <code>missions</code>. Copy the following OML code as its contents. Save the editor.</p>
    </ol>
<pre class="language-scala highlight"><c- n>description</c-> <c- o>&lt;</c-><c- n>http</c-><c- p>:</c-><c- c1>//example.com/tutorial2/description/missions#> as missions {</c->

  <c- n>uses</c-> <c- o>&lt;</c-><c- n>http</c-><c- p>:</c-><c- c1>//example.com/tutorial2/vocabulary/base#> as base</c->
  <c- n>uses</c-> <c- o>&lt;</c-><c- n>http</c-><c- p>:</c-><c- c1>//example.com/tutorial2/vocabulary/mission#> as mission</c->
  <c- k>extends</c-> <c- o>&lt;</c-><c- n>http</c-><c- p>:</c-><c- c1>//example.com/tutorial2/description/objectives#> as objectives</c->

  <c- n>instance</c-> <c- n>orbiter</c-> <c- p>:</c-> <c- n>mission</c-><c- p>:</c-><c- nc>Mission</c-> <c- p>[</c->
    <c- n>base</c-><c- p>:</c-><c- n>hasIdentifier</c-> <c- s>"M.01"</c->
    <c- n>base</c-><c- p>:</c-><c- n>hasCanonicalName</c-> <c- s>"Orbiter Mission"</c->
    <c- n>mission</c-><c- p>:</c-><c- n>pursues</c-> <c- n>objectives</c-><c- p>:</c-><c- n>characterize</c-><c- o>-</c-><c- n>atmosphere</c->
    <c- n>mission</c-><c- p>:</c-><c- n>pursues</c-> <c- n>objectives</c-><c- p>:</c-><c- n>characterize</c-><c- o>-</c-><c- n>environment</c->
    <c- n>mission</c-><c- p>:</c-><c- n>pursues</c-> <c- n>objectives</c-><c- p>:</c-><c- n>characterize</c-><c- o>-</c-><c- n>gravitational</c-><c- o>-</c-><c- n>field</c->
  <c- p>]</c->
  <c- n>instance</c-> <c- n>lander</c-> <c- p>:</c-> <c- n>mission</c-><c- p>:</c-><c- nc>Mission</c-> <c- p>[</c->
    <c- n>base</c-><c- p>:</c-><c- n>hasIdentifier</c-> <c- s>"M.02"</c->
    <c- n>base</c-><c- p>:</c-><c- n>hasCanonicalName</c-> <c- s>"Lander Mission"</c->
    <c- n>mission</c-><c- p>:</c-><c- n>pursues</c-> <c- n>objectives</c-><c- p>:</c-><c- n>characterize</c-><c- o>-</c-><c- n>atmosphere</c->
    <c- n>mission</c-><c- p>:</c-><c- n>pursues</c-> <c- n>objectives</c-><c- p>:</c-><c- n>characterize</c-><c- o>-</c-><c- n>environment</c->
  <c- p>]</c->
<c- p>}</c->
</pre>
    <ol start="5">
     <li data-md>
      <p>The following is a visualization of the <code>missions</code> description we just created.</p>
      <p><img src="assets/tutorial2/P2-Missions-Description.png" width="100%"></p>
     <li data-md>
      <p>Append the following OML code to the body of <code>description/bundle</code> to include the new <code>missions</code> ontology. Save the editor.</p>
    </ol>
<pre class="language-scala highlight"><c- n>includes</c-> <c- o>&lt;</c-><c- n>http</c-><c- p>:</c-><c- c1>//example.com/tutorial2/description/missions#></c->
</pre>
    <ol start="7">
     <li data-md>
      <p>Let us check that our ontologies are good so far, by running the task <code>tutorial2/oml/build</code> from the <a data-link-type="dfn" href="#gradle-tasks-view" id="ref-for-gradle-tasks-view①①">Gradle Tasks view</a>, and waiting for it to finish running in the <a data-link-type="dfn" href="#gradle-executions-view" id="ref-for-gradle-executions-view①④">Gradle Executions view</a>. This should run with no errors.</p>
    </ol>
    <p><em>New Queries</em></p>
    <p>Now we will create a SPARQL query to extract the pattern instances from the description.</p>
    <ol start="8">
     <li data-md>
      <p>Creat the file <code>src/sparql/missions.sparql</code> and copy the following SPARQL code as its content. It looks for missions that purses objectives.</p>
    </ol>
<pre class="language-scala highlight"><c- nc>PREFIX</c-> <c- n>base</c-><c- p>:</c->        <c- o>&lt;</c-><c- n>http</c-><c- p>:</c-><c- c1>//example.com/tutorial2/vocabulary/base#></c->
<c- nc>PREFIX</c-> <c- n>mission</c-><c- p>:</c->     <c- o>&lt;</c-><c- n>http</c-><c- p>:</c-><c- c1>//example.com/tutorial2/vocabulary/mission#></c->

<c- nc>SELECT</c-> <c- nc>DISTINCT</c-> <c- o>?</c-><c- n>m_id</c-> <c- o>?</c-><c- n>m_name</c-> <c- o>?</c-><c- n>o_id</c-> <c- o>?</c-><c- n>o_name</c->
<c- nc>WHERE</c-> <c- p>{</c->
  <c- o>?</c-><c- n>m</c-> <c- n>a</c-> <c- n>mission</c-><c- p>:</c-><c- nc>Mission</c-> <c- p>;</c->
    <c- n>base</c-><c- p>:</c-><c- n>hasIdentifier</c-> <c- o>?</c-><c- n>m_id</c-> <c- p>;</c->
    <c- n>base</c-><c- p>:</c-><c- n>hasCanonicalName</c-> <c- o>?</c-><c- n>m_name</c-> <c- p>;</c->
    <c- n>mission</c-><c- p>:</c-><c- n>pursues</c-> <c- p>[</c->
        <c- n>a</c-> <c- n>mission</c-><c- p>:</c-><c- nc>Objective</c-> <c- p>;</c->
        <c- n>base</c-><c- p>:</c-><c- n>hasIdentifier</c-> <c- o>?</c-><c- n>o_id</c-> <c- p>;</c->
        <c- n>base</c-><c- p>:</c-><c- n>hasCanonicalName</c-> <c- o>?</c-><c- n>o_name</c->
    <c- p>]</c->
<c- p>}</c->
<c- nc>ORDER</c-> <c- nc>BY</c-> <c- o>?</c-><c- n>m_id</c-> <c- o>?</c-><c- n>o_id</c->
</pre>
    <ol start="9">
     <li data-md>
      <p>Let’s now run this query by running the task <code>tutorial2/oml/owlQuery</code> from the <a data-link-type="dfn" href="#gradle-tasks-view" id="ref-for-gradle-tasks-view①②">Gradle Tasks view</a> and waiting for it to finish execution in the <a data-link-type="dfn" href="#gradle-executions-view" id="ref-for-gradle-executions-view①⑤">Gradle Executions view</a>. It should run with no errors.</p>
     <li data-md>
      <p>Right click on the project in the <a data-link-type="dfn" href="#model-explorer-view" id="ref-for-model-explorer-view②①">Model Explorer view</a> and select <code>Refresh</code>. Navigate to the file <code>build/results/missions.json</code> and double click it to open its editor. You should see the following results in JSON.</p>
      <p><img src="assets/tutorial2/P2-Query-Results.png" width="100%"></p>
     <li data-md>
      <p>With this JSON results, one could develop visualizations like the following:</p>
    </ol>
    <p class="note" role="note"><span class="marker">Note:</span> the visualization code is not part of this tutorial</p>
    <div class="jp-Cell jp-CodeCell jp-Notebook-cell jp-mod-noInput">
     <div class="jp-Cell-outputWrapper">
      <div class="jp-Collapser jp-OutputCollapser jp-Cell-outputCollapser"></div>
      <div class="jp-OutputArea jp-Cell-outputArea">
       <div class="jp-OutputArea-child jp-OutputArea-executeResult">
        <div class="jp-RenderedHTMLCommon jp-RenderedHTML jp-OutputArea-output jp-OutputArea-executeResult" data-mime-type="text/html" tabindex="0">
         <div id="figure3"></div>
<script type="module">
import * as d3 from "https://cdn.jsdelivr.net/npm/d3@7/+esm";
function drawTree(data, containerID, root_name, unique=true, _width=960, _height=500, depthMultiplier=180) {

	function getOrCreateNode(id, name, dict){
		var node = dict[id];
		if (!node){
			node = {}
			node.id  = id;
			node.name = name;
			dict[id] = node;
		}
		return node;
	}
	
	function addNode(parentid, id, name, dict){
		var parent = dict[parentid];
		var node = dict[id];
		if (!node){
			node = getOrCreateNode(id,name,dict);
			node.parent = parent.id;
			if (!parent.children){
				parent.children = [];
			}
			parent.children.push(node);
		}
		return node;
	}
	
	function transform(data){
		var idToNode = [];
		var root = getOrCreateNode("-1",root_name,idToNode);
		root.parent = "null";
		var columns = [ "m_id" , "m_name" , "o_id" , "o_name" ];
		data.forEach(row => {
			var parent_id = "-1";
			for (let i = 0; i < columns.length/2; i++) {
				if (row[columns[2*i]]) {
					var childId = (!unique ? parent_id+"." : "") +row[columns[2*i]];
					addNode(parent_id, childId, row[columns[2*i]]+" "+row[columns[2*i+1]], idToNode);
					parent_id = childId;
				}
			}
		});	
		return root;
	}
	
	function getVal(d){
		return d.value + (d.children ? d.data.value : 0);
	}

	
	var treeData = transform(data);

	// ************** Generate the tree diagram	 *****************
	var margin = {top: 20, right: 120, bottom: 20, left: 120},
		width = _width - margin.right - margin.left,
		height = _height - margin.top - margin.bottom;
		
	var i = 0,
		root;
		
		
	var root = d3.hierarchy(treeData)
			.sum(d => d.value)
			.sort((a, b) => b.value - a.value)
			
	var tree = d3.tree();
	tree.size([height, width]); 
	var diagonal = d3.linkHorizontal().x(d => d.y).y(d => d.x)
	
	var svg = d3.select(containerID).append("svg")
		.attr("width", width + margin.right + margin.left)
		.attr("height", height + margin.top + margin.bottom)
	  .append("g")
		.attr("transform", "translate(" + margin.left + "," + margin.top + ")");


  	const gLink = svg.append("g")
      .attr("fill", "none")
      .attr("stroke", "#555")
      .attr("stroke-opacity", 0.4)
      .attr("stroke-width", 1.5);

	root.x0 = height / 2;
	root.y0 = 0;

	function update(source) {
	    const duration = d3.event && d3.event.altKey ? 2500 : 250;
	    const nodes = root.descendants().reverse();
	    const links = root.links();
	
	    // Compute the new tree layout.
	    tree(root);
	
	    let left = root;
	    let right = root;
	    root.eachBefore(node => {
	      if (node.x < left.x) left = node;
	      if (node.x > right.x) right = node;
	    });

		// Normalize for fixed-depth.
	    nodes.forEach(function(d) { d.y = d.depth * depthMultiplier; });

	
	    const height = right.x - left.x + margin.top + margin.bottom;
	
	    const transition = svg.transition()
	        .duration(duration);
	
	 	// Update the nodes…
	  	var node = svg.selectAll("g.node")
		  .data(nodes, function(d) { return d.id || (d.id = ++i); });

	
	    // Enter any new nodes at the parent's previous position.
	    const nodeEnter = node.enter().append("g")
	        .attr("transform", function(d) { return "translate(" + source.y0 + "," + source.x0 + ")"; })
		  	.attr("class", "node")
	        .on("click", click);
	
	    nodeEnter.append("circle")
 		  .attr("r", 1e-6)
		  .style("fill", function(d) { return d._children ? "lightsteelblue" : "#fff"; });

	
	    nodeEnter.append("text")
	        .attr("dy", "0.35em")
	        .attr("x", function(d) { return d.children || d._children ? -13 : 13; })
	        .attr("text-anchor", function(d) { return d.children || d._children ? "end" : "start"; })
	        .text(function(d){
				return d.data.name;
			});
	
	    // Transition nodes to their new position.
	    const nodeUpdate = node.merge(nodeEnter).transition(transition)
		  	.attr("transform", function(d) { return "translate(" + d.y + "," + d.x + ")"; });

		nodeUpdate.select("circle")
		  .attr("r", 10)
		  .style("fill", function(d) { return d._children ? "lightsteelblue" : "#fff"; });

		nodeUpdate.select("text")
		  .style("fill-opacity", 1);
	    
		// Transition exiting nodes to the parent's new position.
	    const nodeExit = node.exit().transition(transition)
		  .attr("transform", function(d) { return "translate(" + source.y + "," + source.x + ")"; })
		  .remove();

		nodeExit.select("circle")
		  .attr("r", 1e-6);
	
	  	nodeExit.select("text")
		  .style("fill-opacity", 1e-6);
	
	    // Update the links…
	    const link = gLink.selectAll("path")
	      .data(links, d => d.target.id);
	
	    // Enter any new links at the parent's previous position.
	    const linkEnter = link.enter().append("path")
			.attr("class", "link")
	        .attr("d", d => {
	          const o = {x: source.x0, y: source.y0};
	          return diagonal({source: o, target: o});
	        });
	
	    // Transition links to their new position.
	    link.merge(linkEnter).transition(transition)
	        .attr("d", diagonal);
	
	    // Transition exiting nodes to the parent's new position.
	    link.exit().transition(transition).remove()
	        .attr("d", d => {
	          const o = {x: source.x, y: source.y};
	          return diagonal({source: o, target: o});
	        });
	
	    // Stash the old positions for transition.
	    root.eachBefore(d => {
	      d.x0 = d.x;
	      d.y0 = d.y;
	    });
	 }

  	update(root);

	// Toggle children on click.
	function click(event, d) {
	  if (d.children) {
		d._children = d.children;
		d.children = null;
	  } else {
		d.children = d._children;
		d._children = null;
	  }
	  update(d);
	}
}
var data = [{"m_id":"M.01","m_name":"Orbiter Mission","o_id":"O.01","o_name":"Characterize the atmosphere of Kepler 16b"},{"m_id":"M.01","m_name":"Orbiter Mission","o_id":"O.03","o_name":"Characterize the gravitational field of Kepler 16b"},{"m_id":"M.01","m_name":"Orbiter Mission","o_id":"O.07","o_name":"Characterize the energetic particule environment of the Kepler 16b binary star system"},{"m_id":"M.02","m_name":"Lander Mission","o_id":"O.01","o_name":"Characterize the atmosphere of Kepler 16b"},{"m_id":"M.02","m_name":"Lander Mission","o_id":"O.07","o_name":"Characterize the energetic particule environment of the Kepler 16b binary star system"}]
drawTree(data, '#figure3', "Missions", false, 960, 300, 150)
</script>
        </div>
       </div>
      </div>
     </div>
    </div>
    <h3 class="heading settled" data-level="2.5" id="tutorial2-p3"><span class="secno">2.5. </span><span class="content">P3: Mission deploys Component</span><a class="self-link" href="#tutorial2-p3"></a></h3>
    <p><strong>Pattern Synopsis</strong></p>
    <p>We say a mission deploys components, which are typically the major systems  of the mission. In our case, these are Launch System, Spacecraft, etc. <em>Deploys</em> is a whole-part relationship, but allows more than one mission to deploy the same component, as in for example, a shared mission operates a system for coordinated ops.</p>
    <p><strong>New Vocabularies</strong></p>
    <ol>
     <li data-md>
      <p>Append the following OML code, which adds the concept of a <code>Component</code> with the relation <code>Deploys</code> to the body of the <code>mission</code> vocabulary. Save the editor.</p>
    </ol>
<pre class="language-scala highlight"><c- nd>@rdfs</c-><c- p>:</c-><c- n>comment</c-> <c- s>"A Component is something that can be deployed in a mission."</c->
<c- n>concept</c-> <c- nc>Component</c-> <c- o>&lt;</c-> <c- n>base</c-><c- p>:</c-><c- nc>IdentifiedThing</c->

<c- nd>@rdfs</c-><c- p>:</c-><c- n>comment</c-> <c- s>"A Mission deploys zero or more Components."</c->
<c- n>relation</c-> <c- n>entity</c-> <c- nc>Deploys</c-> <c- p>[</c->
  <c- n>from</c-> <c- nc>Mission</c->
  <c- n>to</c-> <c- nc>Component</c->
  <c- n>forward</c-> <c- n>deploys</c->
  <c- n>reverse</c-> <c- n>isDeployedBy</c->
  <c- n>asymmetric</c->
  <c- n>irreflexive</c->
<c- p>]</c->
</pre>
    <ol start="2">
     <li data-md>
      <p>The following is a visualization of the <code>mission</code> vocabulary so far:</p>
      <p><img src="assets/tutorial2/P3-Mission-Vocabulary.png" width="100%"></p>
     <li data-md>
      <p>Let us check that our ontologies are good so far, by running the task <code>tutorial2/oml/build</code> from the <a data-link-type="dfn" href="#gradle-tasks-view" id="ref-for-gradle-tasks-view①③">Gradle Tasks view</a>, and waiting for it to finish running in the <a data-link-type="dfn" href="#gradle-executions-view" id="ref-for-gradle-executions-view①⑥">Gradle Executions view</a>. This should run with no errors.</p>
    </ol>
    <p><strong>New Descriptions</strong></p>
    <p>We will now add more details to the <code>missions</code> description using the pattern above. Specifically, we will add components and specify that the mission deploys some of them (the roots of component containment as shown in pattern P4 later).</p>
    <ol start="4">
     <li data-md>
      <p>Create a description with the IRI &lt;<code>http://example.com/tutorial2/description/components#</code>> and prefix <code>components</code>. Copy the following OML code as its contents. Save the editor.</p>
    </ol>
<pre class="language-scala highlight"><c- n>description</c-> <c- o>&lt;</c-><c- n>http</c-><c- p>:</c-><c- c1>//example.com/tutorial2/description/components#> as components {</c->

  <c- n>uses</c-> <c- o>&lt;</c-><c- n>http</c-><c- p>:</c-><c- c1>//example.com/tutorial2/vocabulary/base#> as base</c->
  <c- n>uses</c-> <c- o>&lt;</c-><c- n>http</c-><c- p>:</c-><c- c1>//example.com/tutorial2/vocabulary/mission#> as mission</c->

  <c- n>instance</c-> <c- n>orbiter</c-><c- o>-</c-><c- n>launch</c-><c- o>-</c-><c- n>system</c-> <c- p>:</c-> <c- n>mission</c-><c- p>:</c-><c- nc>Component</c-> <c- p>[</c->
    <c- n>base</c-><c- p>:</c-><c- n>hasIdentifier</c-> <c- s>"C.01"</c->
    <c- n>base</c-><c- p>:</c-><c- n>hasCanonicalName</c-> <c- s>"Orbiter Launch System"</c->
  <c- p>]</c->
  <c- n>instance</c-> <c- n>orbiter</c-><c- o>-</c-><c- n>spacecraft</c-> <c- p>:</c-> <c- n>mission</c-><c- p>:</c-><c- nc>Component</c-> <c- p>[</c->
    <c- n>base</c-><c- p>:</c-><c- n>hasIdentifier</c-> <c- s>"C.02"</c->
    <c- n>base</c-><c- p>:</c-><c- n>hasCanonicalName</c-> <c- s>"Orbiter Spacecraft"</c->
  <c- p>]</c->
  <c- n>instance</c-> <c- n>orbiter</c-><c- o>-</c-><c- n>power</c-><c- o>-</c-><c- n>subsystem</c-> <c- p>:</c-> <c- n>mission</c-><c- p>:</c-><c- nc>Component</c-> <c- p>[</c->
    <c- n>base</c-><c- p>:</c-><c- n>hasIdentifier</c-> <c- s>"C.02.01"</c->
    <c- n>base</c-><c- p>:</c-><c- n>hasCanonicalName</c-> <c- s>"Orbiter Power Subsystem"</c->
  <c- p>]</c->
  <c- n>instance</c-> <c- n>orbiter</c-><c- o>-</c-><c- n>harness</c-> <c- p>:</c-> <c- n>mission</c-><c- p>:</c-><c- nc>Component</c-> <c- p>[</c->
    <c- n>base</c-><c- p>:</c-><c- n>hasIdentifier</c-> <c- s>"C.02.02"</c->
    <c- n>base</c-><c- p>:</c-><c- n>hasCanonicalName</c-> <c- s>"Orbiter Harness"</c->
  <c- p>]</c->
  <c- n>instance</c-> <c- n>orbiter</c-><c- o>-</c-><c- n>thermal</c-><c- o>-</c-><c- n>subsystem</c-> <c- p>:</c-> <c- n>mission</c-><c- p>:</c-><c- nc>Component</c-> <c- p>[</c->
    <c- n>base</c-><c- p>:</c-><c- n>hasIdentifier</c-> <c- s>"C.02.03"</c->
    <c- n>base</c-><c- p>:</c-><c- n>hasCanonicalName</c-> <c- s>"Orbiter Thermal Subsystem"</c->
  <c- p>]</c->
  <c- n>instance</c-> <c- n>orbiter</c-><c- o>-</c-><c- n>command</c-><c- o>-</c-><c- n>and</c-><c- o>-</c-><c- n>data</c-><c- o>-</c-><c- n>handling</c-><c- o>-</c-><c- n>subsystem</c-> <c- p>:</c-> <c- n>mission</c-><c- p>:</c-><c- nc>Component</c-> <c- p>[</c->
    <c- n>base</c-><c- p>:</c-><c- n>hasIdentifier</c-> <c- s>"C.02.04"</c->
    <c- n>base</c-><c- p>:</c-><c- n>hasCanonicalName</c-> <c- s>"Orbiter CDH Subsystem"</c->
  <c- p>]</c->
  <c- n>instance</c-> <c- n>orbiter</c-><c- o>-</c-><c- n>telecom</c-><c- o>-</c-><c- n>subsystem</c-> <c- p>:</c-> <c- n>mission</c-><c- p>:</c-><c- nc>Component</c-> <c- p>[</c->
    <c- n>base</c-><c- p>:</c-><c- n>hasIdentifier</c-> <c- s>"C.02.05"</c->
    <c- n>base</c-><c- p>:</c-><c- n>hasCanonicalName</c-> <c- s>"Orbiter Telecom Subsystem"</c->
  <c- p>]</c->
  <c- n>instance</c-> <c- n>orbiter</c-><c- o>-</c-><c- n>guidance</c-><c- o>-</c-><c- n>navigation</c-><c- o>-</c-><c- n>control</c-><c- o>-</c-><c- n>subsystem</c-> <c- p>:</c-> <c- n>mission</c-><c- p>:</c-><c- nc>Component</c-> <c- p>[</c->
    <c- n>base</c-><c- p>:</c-><c- n>hasIdentifier</c-> <c- s>"C.02.06"</c->
    <c- n>base</c-><c- p>:</c-><c- n>hasCanonicalName</c-> <c- s>"Orbiter GNC Subsystem"</c->
  <c- p>]</c->
  <c- n>instance</c-> <c- n>orbiter</c-><c- o>-</c-><c- n>mechanical</c-><c- o>-</c-><c- n>subsystem</c-> <c- p>:</c-> <c- n>mission</c-><c- p>:</c-><c- nc>Component</c-> <c- p>[</c->
    <c- n>base</c-><c- p>:</c-><c- n>hasIdentifier</c-> <c- s>"C.02.07"</c->
    <c- n>base</c-><c- p>:</c-><c- n>hasCanonicalName</c-> <c- s>"Orbiter Mechanical Subsystem"</c->
  <c- p>]</c->
  <c- n>instance</c-> <c- n>orbiter</c-><c- o>-</c-><c- n>spacraft</c-><c- o>-</c-><c- n>flight</c-><c- o>-</c-><c- n>software</c-> <c- p>:</c-> <c- n>mission</c-><c- p>:</c-><c- nc>Component</c-> <c- p>[</c->
    <c- n>base</c-><c- p>:</c-><c- n>hasIdentifier</c-> <c- s>"C.02.08"</c->
    <c- n>base</c-><c- p>:</c-><c- n>hasCanonicalName</c-> <c- s>"Orbiter Flight Software"</c->
  <c- p>]</c->
  <c- n>instance</c-> <c- n>orbiter</c-><c- o>-</c-><c- n>propulsion</c-><c- o>-</c-><c- n>subsystem</c-> <c- p>:</c-> <c- n>mission</c-><c- p>:</c-><c- nc>Component</c-> <c- p>[</c->
    <c- n>base</c-><c- p>:</c-><c- n>hasIdentifier</c-> <c- s>"C.02.09"</c->
    <c- n>base</c-><c- p>:</c-><c- n>hasCanonicalName</c-> <c- s>"Orbiter Propulsion Subsystem"</c->
  <c- p>]</c->
  <c- n>instance</c-> <c- n>orbiter</c-><c- o>-</c-><c- n>ground</c-><c- o>-</c-><c- n>data</c-><c- o>-</c-><c- n>system</c-> <c- p>:</c-> <c- n>mission</c-><c- p>:</c-><c- nc>Component</c-> <c- p>[</c->
    <c- n>base</c-><c- p>:</c-><c- n>hasIdentifier</c-> <c- s>"C.03"</c->
    <c- n>base</c-><c- p>:</c-><c- n>hasCanonicalName</c-> <c- s>"Orbiter Ground Data System"</c->
  <c- p>]</c->
  <c- n>instance</c-> <c- n>mission</c-><c- o>-</c-><c- n>operations</c-><c- o>-</c-><c- n>system</c-> <c- p>:</c-> <c- n>mission</c-><c- p>:</c-><c- nc>Component</c-> <c- p>[</c->
    <c- n>base</c-><c- p>:</c-><c- n>hasIdentifier</c-> <c- s>"C.04"</c->
    <c- n>base</c-><c- p>:</c-><c- n>hasCanonicalName</c-> <c- s>"Mission Operations System"</c->
  <c- p>]</c->
  <c- n>instance</c-> <c- n>lander</c-><c- o>-</c-><c- n>launch</c-><c- o>-</c-><c- n>system</c-> <c- p>:</c-> <c- n>mission</c-><c- p>:</c-><c- nc>Component</c-> <c- p>[</c->
    <c- n>base</c-><c- p>:</c-><c- n>hasIdentifier</c-> <c- s>"C.05"</c->
    <c- n>base</c-><c- p>:</c-><c- n>hasCanonicalName</c-> <c- s>"Lander Launch System"</c->
  <c- p>]</c->
  <c- n>instance</c-> <c- n>lander</c-><c- o>-</c-><c- n>spacecraft</c-> <c- p>:</c-> <c- n>mission</c-><c- p>:</c-><c- nc>Component</c-> <c- p>[</c->
    <c- n>base</c-><c- p>:</c-><c- n>hasIdentifier</c-> <c- s>"C.06"</c->
    <c- n>base</c-><c- p>:</c-><c- n>hasCanonicalName</c-> <c- s>"Lander Spacecraft"</c->
  <c- p>]</c->
  <c- n>instance</c-> <c- n>lander</c-><c- o>-</c-><c- n>ground</c-><c- o>-</c-><c- n>data</c-><c- o>-</c-><c- n>system</c-> <c- p>:</c-> <c- n>mission</c-><c- p>:</c-><c- nc>Component</c-> <c- p>[</c->
    <c- n>base</c-><c- p>:</c-><c- n>hasIdentifier</c-> <c- s>"C.07"</c->
    <c- n>base</c-><c- p>:</c-><c- n>hasCanonicalName</c-> <c- s>"Lander Ground Data System"</c->
  <c- p>]</c->
<c- p>}</c->
</pre>
    <ol start="5">
     <li data-md>
      <p>In <code>description/missions</code>, append the following OML code to the body of the description.</p>
    </ol>
<pre class="language-scala highlight"><c- n>ref</c-> <c- n>instance</c-> <c- n>orbiter</c-> <c- p>[</c->
  <c- n>mission</c-><c- p>:</c-><c- n>deploys</c-> <c- n>components</c-><c- p>:</c-><c- n>orbiter</c-><c- o>-</c-><c- n>launch</c-><c- o>-</c-><c- n>system</c->
  <c- n>mission</c-><c- p>:</c-><c- n>deploys</c-> <c- n>components</c-><c- p>:</c-><c- n>orbiter</c-><c- o>-</c-><c- n>spacecraft</c->
  <c- n>mission</c-><c- p>:</c-><c- n>deploys</c-> <c- n>components</c-><c- p>:</c-><c- n>orbiter</c-><c- o>-</c-><c- n>ground</c-><c- o>-</c-><c- n>data</c-><c- o>-</c-><c- n>system</c->
  <c- n>mission</c-><c- p>:</c-><c- n>deploys</c-> <c- n>components</c-><c- p>:</c-><c- n>mission</c-><c- o>-</c-><c- n>operations</c-><c- o>-</c-><c- n>system</c->
<c- p>]</c->
<c- n>ref</c-> <c- n>instance</c-> <c- n>lander</c-> <c- p>[</c->
  <c- n>mission</c-><c- p>:</c-><c- n>deploys</c-> <c- n>components</c-><c- p>:</c-><c- n>lander</c-><c- o>-</c-><c- n>launch</c-><c- o>-</c-><c- n>system</c->
  <c- n>mission</c-><c- p>:</c-><c- n>deploys</c-> <c- n>components</c-><c- p>:</c-><c- n>lander</c-><c- o>-</c-><c- n>spacecraft</c->
  <c- n>mission</c-><c- p>:</c-><c- n>deploys</c-> <c- n>components</c-><c- p>:</c-><c- n>lander</c-><c- o>-</c-><c- n>ground</c-><c- o>-</c-><c- n>data</c-><c- o>-</c-><c- n>system</c->
  <c- n>mission</c-><c- p>:</c-><c- n>deploys</c-> <c- n>components</c-><c- p>:</c-><c- n>mission</c-><c- o>-</c-><c- n>operations</c-><c- o>-</c-><c- n>system</c->
<c- p>]</c->
</pre>
    <p class="note" role="note"><span class="marker">Note:</span> The usage of the OML keyword <code>ref</code> before the <code>instance</code> keyword in the OML code above. It is used to reference an instance defined elsewhere (in this case in the same description). Alternatively, we could have added the <code>mission:deploys</code> statements directly to the instance definitions above. However, the chosen style allows us to decouple the pattern instances for the sake of this tutorial.</p>
    <p class="note" role="note"><span class="marker">Note:</span> The OML code above will show error markers because the <code>components</code> ontology is not imported yet. The next step has the fix.</p>
    <ol start="6">
     <li data-md>
      <p>In <code>description/missions</code>, add the following OML statement right after the existing <code>extends</code> statement (at the top). Save the editor.</p>
    </ol>
<pre class="language-scala highlight"><c- k>extends</c-> <c- o>&lt;</c-><c- n>http</c-><c- p>:</c-><c- c1>//example.com/tutorial2/description/components#> as components</c->
</pre>
    <p class="note" role="note"><span class="marker">Note:</span> This should clear the errors from the previous step.</p>
    <ol start="7">
     <li data-md>
      <p>The following is a visualization of the <code>components</code> and <code>missions</code> descriptions so far:</p>
      <p><img src="assets/tutorial2/P3-Components-Description.png" width="100%"></p>
      <p>Components</p>
      <p><img src="assets/tutorial2/P3-Missions-Description.png" width="100%"></p>
      <p>Missions</p>
     <li data-md>
      <p>Append the following OML code to the body of <code>description/bundle</code> to include the new <code>components</code> ontology. Save the editor.</p>
    </ol>
<pre class="language-scala highlight"><c- n>includes</c-> <c- o>&lt;</c-><c- n>http</c-><c- p>:</c-><c- c1>//example.com/tutorial2/description/components#></c->
</pre>
    <ol start="9">
     <li data-md>
      <p>Let us check that our ontologies are good so far, by running the task <code>tutorial2/oml/build</code> from the <a data-link-type="dfn" href="#gradle-tasks-view" id="ref-for-gradle-tasks-view①④">Gradle Tasks view</a>, and waiting for it to finish running in the <a data-link-type="dfn" href="#gradle-executions-view" id="ref-for-gradle-executions-view①⑦">Gradle Executions view</a>. This should run with no errors.</p>
    </ol>
    <p><strong>New Queries</strong></p>
    <p class="note" role="note"><span class="marker">Note:</span> No new queries for this pattern. We will incorporate it with another pattern below.</p>
    <h3 class="heading settled" data-level="2.6" id="tutorial2-p4"><span class="secno">2.6. </span><span class="content">P4: Component contains Component</span><a class="self-link" href="#tutorial2-p4"></a></h3>
    <p><strong>Pattern Synopsis</strong></p>
    <p><em>Contains</em> is another whole-part relationship, but unlike <em>Deploys</em>, a part can be contained in at most one whole. Like <em>Aggregates</em>, <em>Contains</em> is homomeric, meaning parts and whole are of the same type. We say a <em>Component</em> is a <em>ContainedThing</em>, meaning it can contain or be contained. We further say a <em>Component</em> contains only <em>Components</em> and is contained in only a <em>Component</em>.</p>
    <p><strong>New Vocabularies</strong></p>
    <ol>
     <li data-md>
      <p>Since <code>Contains</code> is a fundamental relation, like <code>Aggregates</code>, let us add it to the <code>vocabulary/base</code> ontology. Append the following OML code to the <code>vocabulary/base</code> ontology. Save the editor.</p>
    </ol>
<pre class="language-scala highlight"><c- nd>@rdfs</c-><c- p>:</c-><c- n>comment</c-> <c- s>"A ContainedElement is a thing that can participate in homomeric containment relationships."</c->
<c- n>aspect</c-> <c- nc>ContainedElement</c->

<c- nd>@rdfs</c-><c- p>:</c-><c- n>comment</c-> <c- s>"Contains is a many-to-many relation used to represent homomeric relations that form directed rooted trees."</c->
<c- n>relation</c-> <c- n>entity</c-> <c- nc>Contains</c-> <c- p>[</c->
  <c- n>from</c-> <c- nc>ContainedElement</c->
  <c- n>to</c-> <c- nc>ContainedElement</c->
  <c- n>forward</c-> <c- n>contains</c->
  <c- n>reverse</c-> <c- n>isContainedIn</c->
  <c- n>inverse</c-> <c- n>functional</c->
  <c- n>asymmetric</c->
  <c- n>irreflexive</c->
<c- p>]</c->
</pre>
    <p class="note" role="note"><span class="marker">Note:</span> You have seen so far that some entities are modeled as <code>concept</code> while others are modeled as <code>aspect</code> in OML vocabularies. While the former is used to define a concrete entity, the latter is used to define an abstract one meant for specialization.</p>
    <ol start="2">
     <li data-md>
      <p>In the <code>vocabulary/mission</code> ontology, append the following OML code to the body. Save the editor.</p>
    </ol>
<pre class="language-scala highlight"><c- nd>@rdfs</c-><c- p>:</c-><c- n>comment</c-> <c- s>"A Component can be organized hierarchically by containing other Components. "</c->
<c- n>ref</c-> <c- n>concept</c-> <c- nc>Component</c-> <c- o>&lt;</c-> <c- n>base</c-><c- p>:</c-><c- nc>ContainedElement</c-> <c- p>[</c->
  <c- n>restricts</c-> <c- n>all</c-> <c- n>base</c-><c- p>:</c-><c- n>contains</c-> <c- n>to</c-> <c- nc>Component</c->
  <c- n>restricts</c-> <c- n>all</c-> <c- n>base</c-><c- p>:</c-><c- n>isContainedIn</c-> <c- n>to</c-> <c- nc>Component</c->
<c- p>]</c->
</pre>
    <p class="note" role="note"><span class="marker">Note:</span> that we used the <code>ref</code> keyword here to add more statements to the concept <code>Component</code> defined earlier. Again, we could have added these statements to the original definition but chose this style to separate concerns.</p>
    <ol start="3">
     <li data-md>
      <p>The following is a visualization of the (modified) <code>base</code> and <code>mission</code> vocabularies so far:</p>
      <table>
       <colgroup>
        <col style="width:40%">
        <col style="width:60%">
       <tbody>
        <tr>
         <td><img src="assets/tutorial2/P4-Base-Vocabulary.png" style="border:1px groove black;" width="100%">
         <td><img src="assets/tutorial2/P4-Mission-Vocabulary.png" style="border:1px groove black;" width="100%">
        <tr>
         <td>Base Vocabulary
         <td>Mission Vocabulary
      </table>
     <li data-md>
      <p>Let us check that our ontologies are good so far, by running the task <code>tutorial2/oml/build</code> from the <a data-link-type="dfn" href="#gradle-tasks-view" id="ref-for-gradle-tasks-view①⑤">Gradle Tasks view</a>, and waiting for it to finish running in the <a data-link-type="dfn" href="#gradle-executions-view" id="ref-for-gradle-executions-view①⑧">Gradle Executions view</a>. This should run with no errors.</p>
    </ol>
    <p><strong>New Descriptions</strong></p>
    <p>Now, we will use the pattern to describe the physical composition (containment) of the components in kepler16b.</p>
    <ol start="5">
     <li data-md>
      <p>Append the following OML code to the <code>description/components</code> ontology. Save the editor.</p>
    </ol>
<pre class="language-scala highlight"><c- n>ref</c-> <c- n>instance</c-> <c- n>orbiter</c-><c- o>-</c-><c- n>spacecraft</c-> <c- p>[</c->
  <c- n>base</c-><c- p>:</c-><c- n>contains</c-> <c- n>orbiter</c-><c- o>-</c-><c- n>power</c-><c- o>-</c-><c- n>subsystem</c->
  <c- n>base</c-><c- p>:</c-><c- n>contains</c-> <c- n>orbiter</c-><c- o>-</c-><c- n>harness</c->
  <c- n>base</c-><c- p>:</c-><c- n>contains</c-> <c- n>orbiter</c-><c- o>-</c-><c- n>thermal</c-><c- o>-</c-><c- n>subsystem</c->
  <c- n>base</c-><c- p>:</c-><c- n>contains</c-> <c- n>orbiter</c-><c- o>-</c-><c- n>command</c-><c- o>-</c-><c- n>and</c-><c- o>-</c-><c- n>data</c-><c- o>-</c-><c- n>handling</c-><c- o>-</c-><c- n>subsystem</c->
  <c- n>base</c-><c- p>:</c-><c- n>contains</c-> <c- n>orbiter</c-><c- o>-</c-><c- n>telecom</c-><c- o>-</c-><c- n>subsystem</c->
  <c- n>base</c-><c- p>:</c-><c- n>contains</c-> <c- n>orbiter</c-><c- o>-</c-><c- n>guidance</c-><c- o>-</c-><c- n>navigation</c-><c- o>-</c-><c- n>control</c-><c- o>-</c-><c- n>subsystem</c->
  <c- n>base</c-><c- p>:</c-><c- n>contains</c-> <c- n>orbiter</c-><c- o>-</c-><c- n>mechanical</c-><c- o>-</c-><c- n>subsystem</c->
  <c- n>base</c-><c- p>:</c-><c- n>contains</c-> <c- n>orbiter</c-><c- o>-</c-><c- n>spacraft</c-><c- o>-</c-><c- n>flight</c-><c- o>-</c-><c- n>software</c->
  <c- n>base</c-><c- p>:</c-><c- n>contains</c-> <c- n>orbiter</c-><c- o>-</c-><c- n>propulsion</c-><c- o>-</c-><c- n>subsystem</c->
<c- p>]</c->
</pre>
    <ol start="6">
     <li data-md>
      <p>The following is a visualization of the <code>components</code> description so far:</p>
      <p><img src="assets/tutorial2/P4-Components-Description.png" width="100%"></p>
     <li data-md>
      <p>Let us check that our ontologies are good so far, by running the task <code>tutorial2/oml/build</code> from the <a data-link-type="dfn" href="#gradle-tasks-view" id="ref-for-gradle-tasks-view①⑥">Gradle Tasks view</a>, and waiting for it to finish running in the <a data-link-type="dfn" href="#gradle-executions-view" id="ref-for-gradle-executions-view①⑨">Gradle Executions view</a>. This should run with no errors.</p>
    </ol>
    <p><strong>New Queries</strong></p>
    <p class="note" role="note"><span class="marker">Note:</span> No new queries for this pattern. We will incorporate it with another pattern below.</p>
    <h3 class="heading settled" data-level="2.7" id="tutorial2-p5"><span class="secno">2.7. </span><span class="content">P5: Mass characterizes Component</span><a class="self-link" href="#tutorial2-p5"></a></h3>
    <p><strong>Pattern Synopsis</strong></p>
    <p>This pattern adds a mass quantity to a mechanical component and a magnitude for that quantity for leaf components. The metrology vocabulary used is based on the <a href="https://www.bipm.org/documents/20126/54295284/VIM4_CD_210111c.pdf/a57419b7-790f-2cca-f7c9-25d54d049bf6">VIM4 Draft 11 January 2021</a>. The quantity library used is based on the <a href="https://www.iso.org/standard/30669.html">ISO/IEC 80000</a>.</p>
    <p><strong>New Vocabularies</strong></p>
    <ol>
     <li data-md>
      <p>Create a vocabulary with the IRI &lt;<code>http://example.com/tutorial2/vocabulary/mechanical#</code>> and prefix <code>mechanical</code>. Copy the following OML code as its contents. Save the editor.</p>
    </ol>
<pre class="language-scala highlight"><c- n>vocabulary</c-> <c- o>&lt;</c-><c- n>http</c-><c- p>:</c-><c- c1>//example.com/tutorial2/vocabulary/mechanical#> as mechanical {</c->

  <c- k>extends</c-> <c- o>&lt;</c-><c- n>http</c-><c- p>:</c-><c- c1>//www.w3.org/2000/01/rdf-schema#> as rdfs</c->
  <c- k>extends</c-> <c- o>&lt;</c-><c- n>http</c-><c- p>:</c-><c- c1>//example.com/tutorial2/vocabulary/mission#> as mission</c->
  <c- k>extends</c-> <c- o>&lt;</c-><c- n>http</c-><c- p>:</c-><c- c1>//bipm.org/jcgm/vim4#> as vim4</c->
  <c- n>uses</c-> <c- o>&lt;</c-><c- n>http</c-><c- p>:</c-><c- c1>//iso.org/iso-80000-4.1#> as iso-80000-4.1</c->

  <c- nd>@rdfs</c-><c- p>:</c-><c- n>comment</c-> <c- s>"The class of mechanical components as physical objects"</c->
  <c- n>concept</c-> <c- nc>MechanicalComponent</c-> <c- o>&lt;</c-> <c- n>mission</c-><c- p>:</c-><c- nc>Component</c-><c- p>,</c-> <c- n>vim4</c-><c- p>:</c-><c- nc>Object</c->

  <c- nd>@rdfs</c-><c- p>:</c-><c- n>comment</c-> <c- s>"The class of magnitudes in kilograms for mass quantities on mechanical components"</c->
  <c- n>concept</c-> <c- nc>MassMagnitude</c-> <c- o>&lt;</c-> <c- n>vim4</c-><c- p>:</c-><c- nc>InherentUnitaryQuantityValue</c-> <c- p>[</c->
    <c- n>restricts</c-> <c- n>all</c-> <c- n>vim4</c-><c- p>:</c-><c- n>characterizes</c-> <c- n>to</c-> <c- nc>MechanicalComponent</c->
    <c- n>restricts</c-> <c- n>vim4</c-><c- p>:</c-><c- n>instantiates</c-> <c- n>to</c-> <c- n>iso</c-><c- o>-</c-><c- mi>80000</c-><c- o>-</c-><c- mf>4.1</c-><c- p>:</c-><c- n>mass</c->
    <c- n>restricts</c-> <c- n>vim4</c-><c- p>:</c-><c- n>unit</c-> <c- n>to</c-> <c- n>iso</c-><c- o>-</c-><c- mi>80000</c-><c- o>-</c-><c- mf>4.1</c-><c- p>:</c-><c- n>kilogram</c->
  <c- p>]</c->
<c- p>}</c->
</pre>
    <p class="note" role="note"><span class="marker">Note:</span> how concept <code>MechanicalComponent</code> specializes both <code>mission:Component</code> and <code>vim4:Object</code> (multiple-inheritance).</p>
    <p class="note" role="note"><span class="marker">Note:</span> how concept <code>MassMagnitude</code> specializes <code>vim4:InherentUnitaryQuantityValue</code> and restricts some of its properties like saying that it characterizes <code>MechanicalComponent</code>, instantiates the <code>iso-80000-4.1:mass</code> quantity, and has a unit of <code>iso-80000-4.1:kilogram</code>. This makes all instances of <code>MassMagnitude</code> have those restrictions.</p>
    <ol start="2">
     <li data-md>
      <p>The following is a visualization of the <code>mechanical</code> vocabulary:</p>
      <p><img src="assets/tutorial2/P5-Mechanical-Vocabulary.png" width="100%"></p>
     <li data-md>
      <p>Append the following OML code to the body of <code>vocabulary/bundle</code> to include the new <code>mechanical</code> ontology. Save the editor.</p>
    </ol>
<pre class="language-scala highlight"><c- n>includes</c-> <c- o>&lt;</c-><c- n>http</c-><c- p>:</c-><c- c1>//example.com/tutorial2/vocabulary/mechanical#></c->
</pre>
    <ol start="4">
     <li data-md>
      <p>Let us check that our ontologies are good so far, by running the task <code>tutorial2/oml/build</code> from the <a data-link-type="dfn" href="#gradle-tasks-view" id="ref-for-gradle-tasks-view①⑦">Gradle Tasks view</a>, and waiting for it to finish running in the <a data-link-type="dfn" href="#gradle-executions-view" id="ref-for-gradle-executions-view②⓪">Gradle Executions view</a>. This should run with no errors.</p>
    </ol>
    <p><strong>New Descriptions</strong></p>
    <p>Now we can use this pattern to define the mechanical components and add their mass characterizations.</p>
    <ol start="5">
     <li data-md>
      <p>Create a description with the IRI &lt;<code>http://example.com/tutorial2/description/masses#</code>> and prefix <code>masses</code>. Copy the following OML code as its contents. Save the editor.</p>
    </ol>
<pre class="language-scala highlight"><c- n>description</c-> <c- o>&lt;</c-><c- n>http</c-><c- p>:</c-><c- c1>//example.com/tutorial2/description/masses#> as masses {</c->

  <c- n>uses</c-> <c- o>&lt;</c-><c- n>http</c-><c- p>:</c-><c- c1>//www.w3.org/2001/XMLSchema#> as xsd</c->
  <c- n>uses</c-> <c- o>&lt;</c-><c- n>http</c-><c- p>:</c-><c- c1>//bipm.org/jcgm/vim4#> as vim4</c->
  <c- n>uses</c-> <c- o>&lt;</c-><c- n>http</c-><c- p>:</c-><c- c1>//example.com/tutorial2/vocabulary/mechanical#> as mechanical</c->
  <c- k>extends</c-> <c- o>&lt;</c-><c- n>http</c-><c- p>:</c-><c- c1>//example.com/tutorial2/description/components#> as components</c->

  <c- n>ref</c-> <c- n>instance</c-> <c- n>components</c-><c- p>:</c-><c- n>orbiter</c-><c- o>-</c-><c- n>launch</c-><c- o>-</c-><c- n>system</c-> <c- p>:</c-> <c- n>mechanical</c-><c- p>:</c-><c- nc>MechanicalComponent</c->
  <c- n>instance</c-> <c- n>orbiter</c-><c- o>-</c-><c- n>launch</c-><c- o>-</c-><c- n>system</c-><c- p>.</c-><c- n>mass</c-><c- p>.</c-><c- n>magnitude</c-> <c- p>:</c-> <c- n>mechanical</c-><c- p>:</c-><c- nc>MassMagnitude</c-> <c- p>[</c->
    <c- n>vim4</c-><c- p>:</c-><c- n>hasDoubleNumber</c-> <c- s>"2000"</c-><c- n>^^xsd</c-><c- p>:</c-><c- n>double</c->
    <c- n>vim4</c-><c- p>:</c-><c- n>characterizes</c-> <c- n>components</c-><c- p>:</c-><c- n>orbiter</c-><c- o>-</c-><c- n>launch</c-><c- o>-</c-><c- n>system</c->
  <c- p>]</c->

  <c- n>ref</c-> <c- n>instance</c-> <c- n>components</c-><c- p>:</c-><c- n>lander</c-><c- o>-</c-><c- n>launch</c-><c- o>-</c-><c- n>system</c-> <c- p>:</c-> <c- n>mechanical</c-><c- p>:</c-><c- nc>MechanicalComponent</c->
  <c- n>instance</c-> <c- n>lander</c-><c- o>-</c-><c- n>launch</c-><c- o>-</c-><c- n>system</c-><c- p>.</c-><c- n>mass</c-><c- p>.</c-><c- n>magnitude</c-> <c- p>:</c-> <c- n>mechanical</c-><c- p>:</c-><c- nc>MassMagnitude</c-> <c- p>[</c->
    <c- n>vim4</c-><c- p>:</c-><c- n>hasDoubleNumber</c-> <c- s>"3500"</c-><c- n>^^xsd</c-><c- p>:</c-><c- n>double</c->
    <c- n>vim4</c-><c- p>:</c-><c- n>characterizes</c-> <c- n>components</c-><c- p>:</c-><c- n>lander</c-><c- o>-</c-><c- n>launch</c-><c- o>-</c-><c- n>system</c->
  <c- p>]</c->

  <c- n>ref</c-> <c- n>instance</c-> <c- n>components</c-><c- p>:</c-><c- n>lander</c-><c- o>-</c-><c- n>spacecraft</c-> <c- p>:</c-> <c- n>mechanical</c-><c- p>:</c-><c- nc>MechanicalComponent</c->
  <c- n>instance</c-> <c- n>lander</c-><c- o>-</c-><c- n>spacecraft</c-><c- p>.</c-><c- n>mass</c-><c- p>.</c-><c- n>magnitude</c-> <c- p>:</c-> <c- n>mechanical</c-><c- p>:</c-><c- nc>MassMagnitude</c-> <c- p>[</c->
    <c- n>vim4</c-><c- p>:</c-><c- n>hasDoubleNumber</c-> <c- s>"1200"</c-><c- n>^^xsd</c-><c- p>:</c-><c- n>double</c->
    <c- n>vim4</c-><c- p>:</c-><c- n>characterizes</c-> <c- n>components</c-><c- p>:</c-><c- n>lander</c-><c- o>-</c-><c- n>spacecraft</c->
  <c- p>]</c->

  <c- n>ref</c-> <c- n>instance</c-> <c- n>components</c-><c- p>:</c-><c- n>orbiter</c-><c- o>-</c-><c- n>power</c-><c- o>-</c-><c- n>subsystem</c-> <c- p>:</c-> <c- n>mechanical</c-><c- p>:</c-><c- nc>MechanicalComponent</c->
  <c- n>instance</c-> <c- n>orbiter</c-><c- o>-</c-><c- n>power</c-><c- o>-</c-><c- n>subsystem</c-><c- p>.</c-><c- n>mass</c-><c- p>.</c-><c- n>magnitude</c-> <c- p>:</c-> <c- n>mechanical</c-><c- p>:</c-><c- nc>MassMagnitude</c-> <c- p>[</c->
    <c- n>vim4</c-><c- p>:</c-><c- n>hasDoubleNumber</c-> <c- s>"297"</c-><c- n>^^xsd</c-><c- p>:</c-><c- n>double</c->
    <c- n>vim4</c-><c- p>:</c-><c- n>characterizes</c-> <c- n>components</c-><c- p>:</c-><c- n>orbiter</c-><c- o>-</c-><c- n>power</c-><c- o>-</c-><c- n>subsystem</c->
  <c- p>]</c->

  <c- n>ref</c-> <c- n>instance</c-> <c- n>components</c-><c- p>:</c-><c- n>orbiter</c-><c- o>-</c-><c- n>harness</c-> <c- p>:</c-> <c- n>mechanical</c-><c- p>:</c-><c- nc>MechanicalComponent</c->
  <c- n>instance</c-> <c- n>orbiter</c-><c- o>-</c-><c- n>harness</c-><c- p>.</c-><c- n>mass</c-><c- p>.</c-><c- n>magnitude</c-> <c- p>:</c-> <c- n>mechanical</c-><c- p>:</c-><c- nc>MassMagnitude</c-> <c- p>[</c->
    <c- n>vim4</c-><c- p>:</c-><c- n>hasDoubleNumber</c-> <c- s>"138"</c-><c- n>^^xsd</c-><c- p>:</c-><c- n>double</c->
    <c- n>vim4</c-><c- p>:</c-><c- n>characterizes</c-> <c- n>components</c-><c- p>:</c-><c- n>orbiter</c-><c- o>-</c-><c- n>harness</c->
  <c- p>]</c->

  <c- n>ref</c-> <c- n>instance</c-> <c- n>components</c-><c- p>:</c-><c- n>orbiter</c-><c- o>-</c-><c- n>thermal</c-><c- o>-</c-><c- n>subsystem</c-> <c- p>:</c-> <c- n>mechanical</c-><c- p>:</c-><c- nc>MechanicalComponent</c->
  <c- n>instance</c-> <c- n>orbiter</c-><c- o>-</c-><c- n>thermal</c-><c- o>-</c-><c- n>subsystem</c-><c- p>.</c-><c- n>mass</c-><c- p>.</c-><c- n>magnitude</c-> <c- p>:</c-> <c- n>mechanical</c-><c- p>:</c-><c- nc>MassMagnitude</c-> <c- p>[</c->
    <c- n>vim4</c-><c- p>:</c-><c- n>hasDoubleNumber</c-> <c- s>"307"</c-><c- n>^^xsd</c-><c- p>:</c-><c- n>double</c->
    <c- n>vim4</c-><c- p>:</c-><c- n>characterizes</c-> <c- n>components</c-><c- p>:</c-><c- n>orbiter</c-><c- o>-</c-><c- n>thermal</c-><c- o>-</c-><c- n>subsystem</c->
  <c- p>]</c->

  <c- n>ref</c-> <c- n>instance</c-> <c- n>components</c-><c- p>:</c-><c- n>orbiter</c-><c- o>-</c-><c- n>command</c-><c- o>-</c-><c- n>and</c-><c- o>-</c-><c- n>data</c-><c- o>-</c-><c- n>handling</c-><c- o>-</c-><c- n>subsystem</c-> <c- p>:</c-> <c- n>mechanical</c-><c- p>:</c-><c- nc>MechanicalComponent</c->
  <c- n>instance</c-> <c- n>orbiter</c-><c- o>-</c-><c- n>command</c-><c- o>-</c-><c- n>and</c-><c- o>-</c-><c- n>data</c-><c- o>-</c-><c- n>handling</c-><c- o>-</c-><c- n>subsystem</c-><c- p>.</c-><c- n>mass</c-><c- p>.</c-><c- n>magnitude</c-> <c- p>:</c-> <c- n>mechanical</c-><c- p>:</c-><c- nc>MassMagnitude</c-> <c- p>[</c->
    <c- n>vim4</c-><c- p>:</c-><c- n>hasDoubleNumber</c-> <c- s>"147"</c-><c- n>^^xsd</c-><c- p>:</c-><c- n>double</c->
    <c- n>vim4</c-><c- p>:</c-><c- n>characterizes</c-> <c- n>components</c-><c- p>:</c-><c- n>orbiter</c-><c- o>-</c-><c- n>command</c-><c- o>-</c-><c- n>and</c-><c- o>-</c-><c- n>data</c-><c- o>-</c-><c- n>handling</c-><c- o>-</c-><c- n>subsystem</c->
  <c- p>]</c->

  <c- n>ref</c-> <c- n>instance</c-> <c- n>components</c-><c- p>:</c-><c- n>orbiter</c-><c- o>-</c-><c- n>telecom</c-><c- o>-</c-><c- n>subsystem</c-> <c- p>:</c-> <c- n>mechanical</c-><c- p>:</c-><c- nc>MechanicalComponent</c->
  <c- n>instance</c-> <c- n>orbiter</c-><c- o>-</c-><c- n>telecom</c-><c- o>-</c-><c- n>subsystem</c-><c- p>.</c-><c- n>mass</c-><c- p>.</c-><c- n>magnitude</c-> <c- p>:</c-> <c- n>mechanical</c-><c- p>:</c-><c- nc>MassMagnitude</c-> <c- p>[</c->
    <c- n>vim4</c-><c- p>:</c-><c- n>hasDoubleNumber</c-> <c- s>"316"</c-><c- n>^^xsd</c-><c- p>:</c-><c- n>double</c->
    <c- n>vim4</c-><c- p>:</c-><c- n>characterizes</c-> <c- n>components</c-><c- p>:</c-><c- n>orbiter</c-><c- o>-</c-><c- n>telecom</c-><c- o>-</c-><c- n>subsystem</c->
  <c- p>]</c->

  <c- n>ref</c-> <c- n>instance</c-> <c- n>components</c-><c- p>:</c-><c- n>orbiter</c-><c- o>-</c-><c- n>guidance</c-><c- o>-</c-><c- n>navigation</c-><c- o>-</c-><c- n>control</c-><c- o>-</c-><c- n>subsystem</c-> <c- p>:</c-> <c- n>mechanical</c-><c- p>:</c-><c- nc>MechanicalComponent</c->
  <c- n>instance</c-> <c- n>orbiter</c-><c- o>-</c-><c- n>guidance</c-><c- o>-</c-><c- n>navigation</c-><c- o>-</c-><c- n>control</c-><c- o>-</c-><c- n>subsystem</c-><c- p>.</c-><c- n>mass</c-><c- p>.</c-><c- n>magnitude</c-> <c- p>:</c-> <c- n>mechanical</c-><c- p>:</c-><c- nc>MassMagnitude</c-> <c- p>[</c->
    <c- n>vim4</c-><c- p>:</c-><c- n>hasDoubleNumber</c-> <c- s>"156"</c-><c- n>^^xsd</c-><c- p>:</c-><c- n>double</c->
    <c- n>vim4</c-><c- p>:</c-><c- n>characterizes</c-> <c- n>components</c-><c- p>:</c-><c- n>orbiter</c-><c- o>-</c-><c- n>guidance</c-><c- o>-</c-><c- n>navigation</c-><c- o>-</c-><c- n>control</c-><c- o>-</c-><c- n>subsystem</c->
  <c- p>]</c->

  <c- n>ref</c-> <c- n>instance</c-> <c- n>components</c-><c- p>:</c-><c- n>orbiter</c-><c- o>-</c-><c- n>mechanical</c-><c- o>-</c-><c- n>subsystem</c-> <c- p>:</c-> <c- n>mechanical</c-><c- p>:</c-><c- nc>MechanicalComponent</c->
  <c- n>instance</c-> <c- n>orbiter</c-><c- o>-</c-><c- n>mechanical</c-><c- o>-</c-><c- n>subsystem</c-><c- p>.</c-><c- n>mass</c-><c- p>.</c-><c- n>magnitude</c-> <c- p>:</c-> <c- n>mechanical</c-><c- p>:</c-><c- nc>MassMagnitude</c-> <c- p>[</c->
    <c- n>vim4</c-><c- p>:</c-><c- n>hasDoubleNumber</c-> <c- s>"325"</c-><c- n>^^xsd</c-><c- p>:</c-><c- n>double</c->
    <c- n>vim4</c-><c- p>:</c-><c- n>characterizes</c-> <c- n>components</c-><c- p>:</c-><c- n>orbiter</c-><c- o>-</c-><c- n>mechanical</c-><c- o>-</c-><c- n>subsystem</c->
  <c- p>]</c->

  <c- n>ref</c-> <c- n>instance</c-> <c- n>components</c-><c- p>:</c-><c- n>orbiter</c-><c- o>-</c-><c- n>spacraft</c-><c- o>-</c-><c- n>flight</c-><c- o>-</c-><c- n>software</c-> <c- p>:</c-> <c- n>mechanical</c-><c- p>:</c-><c- nc>MechanicalComponent</c->
  <c- n>instance</c-> <c- n>orbiter</c-><c- o>-</c-><c- n>spacraft</c-><c- o>-</c-><c- n>flight</c-><c- o>-</c-><c- n>software</c-><c- p>.</c-><c- n>mass</c-><c- p>.</c-><c- n>magnitude</c-> <c- p>:</c-> <c- n>mechanical</c-><c- p>:</c-><c- nc>MassMagnitude</c-> <c- p>[</c->
    <c- n>vim4</c-><c- p>:</c-><c- n>hasDoubleNumber</c-> <c- s>"165"</c-><c- n>^^xsd</c-><c- p>:</c-><c- n>double</c->
    <c- n>vim4</c-><c- p>:</c-><c- n>characterizes</c-> <c- n>components</c-><c- p>:</c-><c- n>orbiter</c-><c- o>-</c-><c- n>spacraft</c-><c- o>-</c-><c- n>flight</c-><c- o>-</c-><c- n>software</c->
  <c- p>]</c->

  <c- n>ref</c-> <c- n>instance</c-> <c- n>components</c-><c- p>:</c-><c- n>orbiter</c-><c- o>-</c-><c- n>propulsion</c-><c- o>-</c-><c- n>subsystem</c-> <c- p>:</c-> <c- n>mechanical</c-><c- p>:</c-><c- nc>MechanicalComponent</c->
  <c- n>instance</c-> <c- n>orbiter</c-><c- o>-</c-><c- n>propulsion</c-><c- o>-</c-><c- n>subsystem</c-><c- p>.</c-><c- n>mass</c-><c- p>.</c-><c- n>magnitude</c-> <c- p>:</c-> <c- n>mechanical</c-><c- p>:</c-><c- nc>MassMagnitude</c-> <c- p>[</c->
    <c- n>vim4</c-><c- p>:</c-><c- n>hasDoubleNumber</c-> <c- s>"6"</c-><c- n>^^xsd</c-><c- p>:</c-><c- n>double</c->
    <c- n>vim4</c-><c- p>:</c-><c- n>characterizes</c-> <c- n>components</c-><c- p>:</c-><c- n>orbiter</c-><c- o>-</c-><c- n>propulsion</c-><c- o>-</c-><c- n>subsystem</c->
  <c- p>]</c->
<c- p>}</c->
</pre>
    <p class="note" role="note"><span class="marker">Note:</span> how in OML code above, instances already typed by <code>mission:Components</code> in P3 are referenced (with <code>ref</code>) in this description and declared with another type <code>mechanical:MechanicalComponent</code>. This ability to add multiple types (whether related to each other by specialization or not) to an instance is a powerful feature of OML called multi-classification. Being able to add those other types from a different description is yet another nice feature, since it allows separation of concerns. (Alternatively, we could have changed the original type of those instances from <code>mission:Component</code> to <code>mechanical:MechanicalComponent</code>).</p>
    <p class="note" role="note"><span class="marker">Note:</span> how the magnitude of each component is specified with a double literal. The literal type here specifies the precision of the value. Recall how the <code>unit</code> of the value has been restricted to <code>iso-80000-4.1:kilogram</code> in type <code>mechanical:MassMagnitude</code>. This means all those magnitudes values above have this unit. If the restriction was omitted, each instance could have specified its own unit. But, restricting units makes it easier to unify them in the same system, and manage this in one place, without losing precision (by ignoring to specify a unit) or inviting inconsistencies (by specifying them with every value).</p>
    <ol start="6">
     <li data-md>
      <p>The following is a visualization of the <code>masses</code> description:</p>
      <p><img src="assets/tutorial2/P5-Masses-Description.png" width="100%"></p>
     <li data-md>
      <p>Append the following OML code to the body of <code>description/bundle</code> to include the new <code>masses</code> ontology. Save the editor.</p>
    </ol>
<pre class="language-scala highlight"><c- n>includes</c-> <c- o>&lt;</c-><c- n>http</c-><c- p>:</c-><c- c1>//example.com/tutorial2/description/masses#></c->
</pre>
    <ol start="8">
     <li data-md>
      <p>Let us check that our ontologies are good so far, by running the task <code>tutorial2/oml/build</code> from the <a data-link-type="dfn" href="#gradle-tasks-view" id="ref-for-gradle-tasks-view①⑧">Gradle Tasks view</a>, and waiting for it to finish running in the <a data-link-type="dfn" href="#gradle-executions-view" id="ref-for-gradle-executions-view②①">Gradle Executions view</a>. This should run with no errors.</p>
    </ol>
    <p><strong>New Queries</strong></p>
    <p>Let us now create a query that extracts component, their compositions (if any), and their mass characterizations (if any).</p>
    <ol start="9">
     <li data-md>
      <p>Create the file <code>src/sparql/components.sparql</code> and copy the following SPARQL code as its content.</p>
    </ol>
<pre class="language-scala highlight"><c- nc>PREFIX</c-> <c- n>base</c-><c- p>:</c->        <c- o>&lt;</c-><c- n>http</c-><c- p>:</c-><c- c1>//example.com/tutorial2/vocabulary/base#></c->
<c- nc>PREFIX</c-> <c- n>mission</c-><c- p>:</c->     <c- o>&lt;</c-><c- n>http</c-><c- p>:</c-><c- c1>//example.com/tutorial2/vocabulary/mission#></c->
<c- nc>PREFIX</c-> <c- n>vim4</c-><c- p>:</c->    <c- o>&lt;</c-><c- n>http</c-><c- p>:</c-><c- c1>//bipm.org/jcgm/vim4#></c->

<c- nc>SELECT</c-> <c- nc>DISTINCT</c-> <c- o>?</c-><c- n>c1_id</c-> <c- o>?</c-><c- n>c1_name</c-> <c- o>?</c-><c- n>c1_mass</c-> <c- o>?</c-><c- n>c2_id</c-> <c- o>?</c-><c- n>c2_name</c->
<c- nc>WHERE</c-> <c- p>{</c->
  <c- o>?</c-><c- n>c1</c-> <c- n>a</c-> <c- n>mission</c-><c- p>:</c-><c- nc>Component</c-> <c- p>;</c->
    <c- n>base</c-><c- p>:</c-><c- n>hasIdentifier</c-> <c- o>?</c-><c- n>c1_id</c-> <c- p>;</c->
    <c- n>base</c-><c- p>:</c-><c- n>hasCanonicalName</c-> <c- o>?</c-><c- n>c1_name</c-> <c- p>.</c->
  <c- nc>OPTIONAL</c-> <c- p>{</c->
    <c- o>?</c-><c- n>c1</c-> <c- n>base</c-><c- p>:</c-><c- n>isContainedIn</c-> <c- o>?</c-><c- n>c2</c-> <c- p>.</c->
    <c- o>?</c-><c- n>c2</c-> <c- n>base</c-><c- p>:</c-><c- n>hasIdentifier</c-> <c- o>?</c-><c- n>c2_id</c-> <c- p>;</c->
      <c- n>base</c-><c- p>:</c-><c- n>hasCanonicalName</c-> <c- o>?</c-><c- n>c2_name</c-> <c- p>.</c->
  <c- p>}</c->
  <c- nc>OPTIONAL</c-> <c- p>{</c->
    <c- o>?</c-><c- n>c1_mass_mag</c-> <c- n>vim4</c-><c- p>:</c-><c- n>characterizes</c-> <c- o>?</c-><c- n>c1</c-> <c- p>;</c->
      <c- n>vim4</c-><c- p>:</c-><c- n>hasDoubleNumber</c-> <c- o>?</c-><c- n>c1_mass</c-> <c- p>.</c->
  <c- p>}</c->
<c- p>}</c->
<c- nc>ORDER</c-> <c- nc>BY</c-> <c- o>?</c-><c- n>c1_id</c-> <c- o>?</c-><c- n>c2_id</c->
</pre>
    <ol start="10">
     <li data-md>
      <p>Let’s now run this query by running the task <code>tutorial2/oml/owlQuery</code> from the <a data-link-type="dfn" href="#gradle-tasks-view" id="ref-for-gradle-tasks-view①⑨">Gradle Tasks view</a> and waiting for it to finish execution in the <a data-link-type="dfn" href="#gradle-executions-view" id="ref-for-gradle-executions-view②②">Gradle Executions view</a>. It should run with no errors.</p>
     <li data-md>
      <p>Right click on the project in the <a data-link-type="dfn" href="#model-explorer-view" id="ref-for-model-explorer-view②②">Model Explorer view</a> and select <code>Refresh</code>. Navigate to the file <code>build/results/components.json</code> and double click it to open its editor. You should see the following results in JSON.</p>
      <p><img src="assets/tutorial2/P5-Query-Results.png" width="100%"></p>
     <li data-md>
      <p>With this JSON results, one could develop visualizations like the following:</p>
    </ol>
    <p class="note" role="note"><span class="marker">Note:</span> the visualization code is not part of this tutorial</p>
    <table id="table3">
     <thead>
      <tr>
       <th>c1_name
       <th>c1_id
       <th>c1_mass
       <th>c2_name
       <th>c2_id
     <tbody>
      <tr>
       <td>Orbiter Launch System
       <td>C.01
       <td>2000.0
       <td>
       <td>
      <tr>
       <td>Orbiter Spacecraft
       <td>C.02
       <td>
       <td>
       <td>
      <tr>
       <td>Orbiter Power Subsystem
       <td>C.02.01
       <td>297.0
       <td>Orbiter Spacecraft
       <td>C.02
      <tr>
       <td>Orbiter Harness
       <td>C.02.02
       <td>138.0
       <td>Orbiter Spacecraft
       <td>C.02
      <tr>
       <td>Orbiter Thermal Subsystem
       <td>C.02.03
       <td>307.0
       <td>Orbiter Spacecraft
       <td>C.02
      <tr>
       <td>Orbiter CDH subsystem
       <td>C.02.04
       <td>147.0
       <td>Orbiter Spacecraft
       <td>C.02
      <tr>
       <td>Orbiter Telecom Subsystem
       <td>C.02.05
       <td>316.0
       <td>Orbiter Spacecraft
       <td>C.02
      <tr>
       <td>Orbiter GNC subsystem
       <td>C.02.06
       <td>156.0
       <td>Orbiter Spacecraft
       <td>C.02
      <tr>
       <td>Orbiter Mechanical Subsystem
       <td>C.02.07
       <td>325.0
       <td>Orbiter Spacecraft
       <td>C.02
      <tr>
       <td>Orbiter Spacraft Flight Software
       <td>C.02.08
       <td>165.0
       <td>Orbiter Spacecraft
       <td>C.02
      <tr>
       <td>Orbiter Propulsion Subsystem
       <td>C.02.09
       <td>6.0
       <td>Orbiter Spacecraft
       <td>C.02
      <tr>
       <td>Orbiter Ground Data System
       <td>C.03
       <td>
       <td>
       <td>
      <tr>
       <td>Mission Operations System
       <td>C.04
       <td>
       <td>
       <td>
      <tr>
       <td>Lander Launch System
       <td>C.05
       <td>3500.0
       <td>
       <td>
      <tr>
       <td>Lander Spacecraft
       <td>C.06
       <td>1200.0
       <td>
       <td>
      <tr>
       <td>Lander Ground Data System
       <td>C.07
       <td>
       <td>
       <td>
    </table>
    <p></p>
    <svg height="500" width="960">
     <g transform="translate(120,20)">
      <g fill="none" stroke="#555" stroke-opacity="0.4" stroke-width="1.5">
       <path class="link" d="M0,281.11111111111114C90,281.11111111111114,90,127.77777777777779,180,127.77777777777779"></path>
       <path class="link" d="M0,281.11111111111114C90,281.11111111111114,90,178.8888888888889,180,178.8888888888889"></path>
       <path class="link" d="M0,281.11111111111114C90,281.11111111111114,90,230,180,230"></path>
       <path class="link" d="M0,281.11111111111114C90,281.11111111111114,90,281.11111111111114,180,281.11111111111114"></path>
       <path class="link" d="M0,281.11111111111114C90,281.11111111111114,90,332.22222222222223,180,332.22222222222223"></path>
       <path class="link" d="M0,281.11111111111114C90,281.11111111111114,90,383.33333333333337,180,383.33333333333337"></path>
       <path class="link" d="M0,281.11111111111114C90,281.11111111111114,90,434.44444444444446,180,434.44444444444446"></path>
       <path class="link" d="M180,230C270,230,270,25.555555555555557,360,25.555555555555557"></path>
       <path class="link" d="M180,230C270,230,270,76.66666666666667,360,76.66666666666667"></path>
       <path class="link" d="M180,230C270,230,270,127.77777777777779,360,127.77777777777779"></path>
       <path class="link" d="M180,230C270,230,270,178.8888888888889,360,178.8888888888889"></path>
       <path class="link" d="M180,230C270,230,270,230,360,230"></path>
       <path class="link" d="M180,230C270,230,270,281.11111111111114,360,281.11111111111114"></path>
       <path class="link" d="M180,230C270,230,270,332.22222222222223,360,332.22222222222223"></path>
       <path class="link" d="M180,230C270,230,270,383.33333333333337,360,383.33333333333337"></path>
       <path class="link" d="M180,230C270,230,270,434.44444444444446,360,434.44444444444446"></path>
      </g>
      <g class="node" transform="translate(360, 434.4444580078125)">
       <circle r="10" style="fill: rgb(255, 255, 255);"></circle>
       <text dy="0.35em" text-anchor="start" x="13">Orbiter Propulsion Subsystem(6)</text>
      </g>
      <g class="node" transform="translate(360, 383.3333435058594)">
       <circle r="10" style="fill: rgb(255, 255, 255);"></circle>
       <text dy="0.35em" text-anchor="start" x="13">Orbiter Harness(138)</text>
      </g>
      <g class="node" transform="translate(360, 332.22222900390625)">
       <circle r="10" style="fill: rgb(255, 255, 255);"></circle>
       <text dy="0.35em" text-anchor="start" x="13">Orbiter CDH Subsystem(147)</text>
      </g>
      <g class="node" transform="translate(360, 281.1111145019531)">
       <circle r="10" style="fill: rgb(255, 255, 255);"></circle>
       <text dy="0.35em" text-anchor="start" x="13">Orbiter GNC Subsystem(156)</text>
      </g>
      <g class="node" transform="translate(360, 230)">
       <circle r="10" style="fill: rgb(255, 255, 255);"></circle>
       <text dy="0.35em" text-anchor="start" x="13">Orbiter Spacraft Flight Software(165)</text>
      </g>
      <g class="node" transform="translate(360, 178.88888549804688)">
       <circle r="10" style="fill: rgb(255, 255, 255);"></circle>
       <text dy="0.35em" text-anchor="start" x="13">Orbiter Power Subsystem(297)</text>
      </g>
      <g class="node" transform="translate(360, 127.77777862548828)">
       <circle r="10" style="fill: rgb(255, 255, 255);"></circle>
       <text dy="0.35em" text-anchor="start" x="13">Orbiter Thermal Subsystem(307)</text>
      </g>
      <g class="node" transform="translate(360, 76.66666412353516)">
       <circle r="10" style="fill: rgb(255, 255, 255);"></circle>
       <text dy="0.35em" text-anchor="start" x="13">Orbiter Telecom Subsystem(316)</text>
      </g>
      <g class="node" transform="translate(360, 25.55555534362793)">
       <circle r="10" style="fill: rgb(255, 255, 255);"></circle>
       <text dy="0.35em" text-anchor="start" x="13">orbiter-mechanical-subsystem(325)</text>
      </g>
      <g class="node" transform="translate(180, 434.4444580078125)">
       <circle r="10" style="fill: rgb(255, 255, 255);"></circle>
       <text dy="0.35em" text-anchor="start" x="13">Lander Ground Data System(0)</text>
      </g>
      <g class="node" transform="translate(180, 383.3333435058594)">
       <circle r="10" style="fill: rgb(255, 255, 255);"></circle>
       <text dy="0.35em" text-anchor="start" x="13">Mission Operations System(0)</text>
      </g>
      <g class="node" transform="translate(180, 332.22222900390625)">
       <circle r="10" style="fill: rgb(255, 255, 255);"></circle>
       <text dy="0.35em" text-anchor="start" x="13">Orbiter Ground Data System(0)</text>
      </g>
      <g class="node" transform="translate(180, 281.1111145019531)">
       <circle r="10" style="fill: rgb(255, 255, 255);"></circle>
       <text dy="0.35em" text-anchor="start" x="13">Lander Spacecraft(1200)</text>
      </g>
      <g class="node" transform="translate(180, 230)">
       <circle r="10" style="fill: rgb(255, 255, 255);"></circle>
       <text dy="0.35em" text-anchor="end" x="-13">Orbiter Spacecraft(1857)</text>
      </g>
      <g class="node" transform="translate(180, 178.88888549804688)">
       <circle r="10" style="fill: rgb(255, 255, 255);"></circle>
       <text dy="0.35em" text-anchor="start" x="13">Orbiter Launch System(2000)</text>
      </g>
      <g class="node" transform="translate(180, 127.77777862548828)">
       <circle r="10" style="fill: rgb(255, 255, 255);"></circle>
       <text dy="0.35em" text-anchor="start" x="13">Lander Launch System(3500)</text>
      </g>
      <g class="node" transform="translate(0, 281.1111145019531)">
       <circle r="10" style="fill: rgb(255, 255, 255);"></circle>
       <text dy="0.35em" text-anchor="end" x="-13">Root</text>
      </g>
     </g>
    </svg>
    <p class="note" role="note"><span class="marker">Note:</span> that in the second visualization above, each node in the tree rolls up the mass from the levels below (if any). Such computation would be part of an analysis that runs on the query results before producing the visualization.</p>
    <h3 class="heading settled" data-level="2.8" id="tutorial2-p6"><span class="secno">2.8. </span><span class="content">P6: Component presents Interface</span><a class="self-link" href="#tutorial2-p6"></a></h3>
    <p><strong>Pattern Synopsis</strong></p>
    <p><em>Components</em> contain other components. These subcomponents interact in ways that lead to emergent behavior. The interactions are sometimes the result of purposeful interconnection. Components may be designed with specific features to allow or enact interconnection. These features we call <em>Interfaces</em>. We say Components present Interfaces. Note that an interface is on one side or the other; it’s not the connection itself.</p>
    <p><strong>New Vocabularies</strong></p>
    <ol>
     <li data-md>
      <p>In the <code>vocabulary/mission</code> ontology, append the following OML code to the body. Save the editor.</p>
    </ol>
<pre class="language-scala highlight"><c- nd>@rdfs</c-><c- p>:</c-><c- n>comment</c-> <c- s>"An Interface represents a set of features that describe some Component's interaction with another Component."</c->
<c- n>concept</c-> <c- nc>Interface</c-> <c- o>&lt;</c-> <c- n>base</c-><c- p>:</c-><c- nc>IdentifiedThing</c->

<c- nd>@rdfs</c-><c- p>:</c-><c- n>comment</c-> <c- s>"A Component presents zero or more Interfaces."</c->
<c- n>relation</c-> <c- n>entity</c-> <c- nc>Presents</c-> <c- p>[</c->
  <c- n>from</c-> <c- nc>Component</c->
  <c- n>to</c-> <c- nc>Interface</c->
  <c- n>forward</c-> <c- n>presents</c->
  <c- n>reverse</c-> <c- n>isPresentedBy</c->
  <c- n>inverse</c-> <c- n>functional</c->
  <c- n>asymmetric</c->
  <c- n>irreflexive</c->
<c- p>]</c->
</pre>
    <ol start="2">
     <li data-md>
      <p>The following is a visualization of the <code>mission</code> vocabulary so far:</p>
      <p><img src="assets/tutorial2/P6-Mission-Vocabulary.png" width="100%"></p>
     <li data-md>
      <p>Let us check that our ontologies are good so far, by running the task <code>tutorial2/oml/build</code> from the <a data-link-type="dfn" href="#gradle-tasks-view" id="ref-for-gradle-tasks-view②⓪">Gradle Tasks view</a>, and waiting for it to finish running in the <a data-link-type="dfn" href="#gradle-executions-view" id="ref-for-gradle-executions-view②③">Gradle Executions view</a>. This should run with no errors.</p>
    </ol>
    <p><strong>New Description</strong></p>
    <p>With this pattern, we can model the interfaces of some of the components in kepler16b.</p>
    <ol start="4">
     <li data-md>
      <p>Create a description with the IRI &lt;<code>http://example.com/tutorial2/description/interfaces#</code>> and prefix <code>interfaces</code>. Copy the following OML code as its contents. Save the editor.</p>
    </ol>
<pre class="language-scala highlight"><c- n>description</c-> <c- o>&lt;</c-><c- n>http</c-><c- p>:</c-><c- c1>//example.com/tutorial2/description/interfaces#> as interfaces {</c->

  <c- n>uses</c-> <c- o>&lt;</c-><c- n>http</c-><c- p>:</c-><c- c1>//example.com/tutorial2/vocabulary/base#> as base</c->
  <c- n>uses</c-> <c- o>&lt;</c-><c- n>http</c-><c- p>:</c-><c- c1>//example.com/tutorial2/vocabulary/mission#> as mission</c->
  <c- k>extends</c-> <c- o>&lt;</c-><c- n>http</c-><c- p>:</c-><c- c1>//example.com/tutorial2/description/components#> as components</c->

  <c- n>instance</c-> <c- n>orbiter</c-><c- o>-</c-><c- n>ground</c-><c- o>-</c-><c- n>data</c-><c- o>-</c-><c- n>system</c-><c- p>.</c-><c- n>telemetryIn</c-> <c- p>:</c-> <c- n>mission</c-><c- p>:</c-><c- nc>Interface</c-> <c- p>[</c->
    <c- n>base</c-><c- p>:</c-><c- n>hasIdentifier</c-> <c- s>"I.04"</c->
    <c- n>base</c-><c- p>:</c-><c- n>hasCanonicalName</c-> <c- s>"Telemetry In"</c->
  <c- p>]</c->
  <c- n>relation</c-> <c- n>instance</c-> <c- n>orbiter</c-><c- o>-</c-><c- n>ground</c-><c- o>-</c-><c- n>data</c-><c- o>-</c-><c- n>system</c-><c- p>.</c-><c- n>presents</c-><c- p>.</c-><c- n>telemetryIn</c-> <c- p>:</c-> <c- n>mission</c-><c- p>:</c-><c- nc>Presents</c-> <c- p>[</c->
    <c- n>from</c-> <c- n>components</c-><c- p>:</c-><c- n>orbiter</c-><c- o>-</c-><c- n>ground</c-><c- o>-</c-><c- n>data</c-><c- o>-</c-><c- n>system</c->
    <c- n>to</c-> <c- n>orbiter</c-><c- o>-</c-><c- n>ground</c-><c- o>-</c-><c- n>data</c-><c- o>-</c-><c- n>system</c-><c- p>.</c-><c- n>telemetryIn</c->
  <c- p>]</c->
  <c- n>instance</c-> <c- n>orbiter</c-><c- o>-</c-><c- n>ground</c-><c- o>-</c-><c- n>data</c-><c- o>-</c-><c- n>system</c-><c- p>.</c-><c- n>commandOut</c-> <c- p>:</c-> <c- n>mission</c-><c- p>:</c-><c- nc>Interface</c-> <c- p>[</c->
    <c- n>base</c-><c- p>:</c-><c- n>hasIdentifier</c-> <c- s>"I.03"</c->
    <c- n>base</c-><c- p>:</c-><c- n>hasCanonicalName</c-> <c- s>"Command Out"</c->
  <c- p>]</c->
  <c- n>relation</c-> <c- n>instance</c-> <c- n>orbiter</c-><c- o>-</c-><c- n>ground</c-><c- o>-</c-><c- n>data</c-><c- o>-</c-><c- n>system</c-><c- p>.</c-><c- n>presents</c-><c- p>.</c-><c- n>commandOut</c-> <c- p>:</c-> <c- n>mission</c-><c- p>:</c-><c- nc>Presents</c-> <c- p>[</c->
    <c- n>from</c-> <c- n>components</c-><c- p>:</c-><c- n>orbiter</c-><c- o>-</c-><c- n>ground</c-><c- o>-</c-><c- n>data</c-><c- o>-</c-><c- n>system</c->
    <c- n>to</c-> <c- n>orbiter</c-><c- o>-</c-><c- n>ground</c-><c- o>-</c-><c- n>data</c-><c- o>-</c-><c- n>system</c-><c- p>.</c-><c- n>commandOut</c->
  <c- p>]</c->

  <c- n>instance</c-> <c- n>orbiter</c-><c- o>-</c-><c- n>spacecraft</c-><c- p>.</c-><c- n>commandIn</c-> <c- p>:</c-> <c- n>mission</c-><c- p>:</c-><c- nc>Interface</c-> <c- p>[</c->
    <c- n>base</c-><c- p>:</c-><c- n>hasIdentifier</c-> <c- s>"I.01"</c->
    <c- n>base</c-><c- p>:</c-><c- n>hasCanonicalName</c-> <c- s>"Command In"</c->
  <c- p>]</c->
  <c- n>relation</c-> <c- n>instance</c-> <c- n>orbiter</c-><c- o>-</c-><c- n>spacecraft</c-><c- p>.</c-><c- n>presents</c-><c- p>.</c-><c- n>commandIn</c-> <c- p>:</c-> <c- n>mission</c-><c- p>:</c-><c- nc>Presents</c-> <c- p>[</c->
    <c- n>from</c-> <c- n>components</c-><c- p>:</c-><c- n>orbiter</c-><c- o>-</c-><c- n>spacecraft</c->
    <c- n>to</c-> <c- n>orbiter</c-><c- o>-</c-><c- n>spacecraft</c-><c- p>.</c-><c- n>commandIn</c->
  <c- p>]</c->
  <c- n>instance</c-> <c- n>orbiter</c-><c- o>-</c-><c- n>spacecraft</c-><c- p>.</c-><c- n>telemetryOut</c-> <c- p>:</c-> <c- n>mission</c-><c- p>:</c-><c- nc>Interface</c-> <c- p>[</c->
    <c- n>base</c-><c- p>:</c-><c- n>hasIdentifier</c-> <c- s>"I.02"</c->
    <c- n>base</c-><c- p>:</c-><c- n>hasCanonicalName</c-> <c- s>"Telemetry Out"</c->
  <c- p>]</c->
  <c- n>relation</c-> <c- n>instance</c-> <c- n>orbiter</c-><c- o>-</c-><c- n>spacecraft</c-><c- p>.</c-><c- n>presents</c-><c- p>.</c-><c- n>telemetryOut</c-> <c- p>:</c-> <c- n>mission</c-><c- p>:</c-><c- nc>Presents</c-> <c- p>[</c->
    <c- n>from</c-> <c- n>components</c-><c- p>:</c-><c- n>orbiter</c-><c- o>-</c-><c- n>spacecraft</c->
    <c- n>to</c-> <c- n>orbiter</c-><c- o>-</c-><c- n>spacecraft</c-><c- p>.</c-><c- n>telemetryOut</c->
  <c- p>]</c->
<c- p>}</c->
</pre>
    <p class="note" role="note"><span class="marker">Note:</span> in the OML code above a new element defined with the keywords <code>relation instance</code>. This is a named instance that represents a reified link between two instances. A relation instance is typed by one or more relation entity (comparable to a concept instance being typed by one or more concepts). For example, the first relation instance above  named <code>orbiter-ground-data-system.presents.telemetryIn</code> is typed by the <code>mission:Presents</code> relation entity and is <code>from</code> concept instance <code>components:orbiter-ground-data-system</code> (a component) to concept instance <code>orbiter-ground-data-system.telemetryIn</code> (an interface).</p>
    <p class="note" role="note"><span class="marker">Note:</span> Creating a relation instance is an alternative to creating an unreified (simple) link as we have doing so far. It is done when the link needs to be referenced by other statements (as we will see in P7), or when it needs to be characterized by values to its properties (defined in the domain of relation entity types).</p>
    <ol start="5">
     <li data-md>
      <p>The following is a visualization of the <code>interfaces</code> description:</p>
      <p><img src="assets/tutorial2/P6-Interfaces-Description.png" width="100%"></p>
     <li data-md>
      <p>Append the following OML code to the body of <code>description/bundle</code> to include the new <code>interfaces</code> ontology. Save the editor.</p>
    </ol>
<pre class="language-scala highlight"><c- n>includes</c-> <c- o>&lt;</c-><c- n>http</c-><c- p>:</c-><c- c1>//example.com/tutorial2/description/interfaces#></c->
</pre>
    <ol start="7">
     <li data-md>
      <p>Let us check that our ontologies are good so far, by running the task <code>tutorial2/oml/build</code> from the <a data-link-type="dfn" href="#gradle-tasks-view" id="ref-for-gradle-tasks-view②①">Gradle Tasks view</a>, and waiting for it to finish running in the <a data-link-type="dfn" href="#gradle-executions-view" id="ref-for-gradle-executions-view②④">Gradle Executions view</a>. This should run with no errors.</p>
    </ol>
    <p><strong>New Queries</strong></p>
    <p class="note" role="note"><span class="marker">Note:</span> No new queries for this pattern. We will incorporate it with another pattern below.</p>
    <h3 class="heading settled" data-level="2.9" id="tutorial2-p7"><span class="secno">2.9. </span><span class="content">P7: Requirement specifies Presents</span><a class="self-link" href="#tutorial2-p7"></a></h3>
    <p><strong>Pattern Synopsis</strong></p>
    <p><em>Requirements</em> specify conditions that must be true of the system. One thing a requirement may specify is that some component presents an interface of a certain type or with certain properties. We say this with the reification pattern: (<em>Requirement specifies (Component presents Interface)</em>), in which (<em>Component presents Interface</em>) is reified with a member of class <em>Presents</em> (as seen above in P6).</p>
    <p><strong>New Vocabulary</strong></p>
    <ol>
     <li data-md>
      <p>In the <code>vocabulary/mission</code> ontology, append the following OML code to the body. Save the editor.</p>
    </ol>
<pre class="language-scala highlight"><c- nd>@rdfs</c-><c- p>:</c-><c- n>comment</c-> <c- s>"SpecifiedThing is something that isSpecifiedBy a Requirement"</c->
<c- n>aspect</c-> <c- nc>SpecifiedThing</c->

<c- nd>@rdfs</c-><c- p>:</c-><c- n>comment</c-> <c- s>"Presents is a relation that can be specified by a requirement."</c->
<c- n>ref</c-> <c- n>relation</c-> <c- n>entity</c-> <c- nc>Presents</c-> <c- o>&lt;</c-> <c- nc>SpecifiedThing</c->

<c- nd>@rdfs</c-><c- p>:</c-><c- n>comment</c-> <c- s>"A Requirement specifies that something must be true about something."</c->
<c- n>concept</c-> <c- nc>Requirement</c-> <c- o>&lt;</c-> <c- n>base</c-><c- p>:</c-><c- nc>IdentifiedThing</c->

<c- nd>@rdfs</c-><c- p>:</c-><c- n>comment</c-> <c- s>"A Requirement specifies zero or more SpecifiedThings."</c->
<c- n>relation</c-> <c- n>entity</c-> <c- nc>Specifies</c-> <c- p>[</c->
  <c- n>from</c-> <c- nc>Requirement</c->
  <c- n>to</c-> <c- nc>SpecifiedThing</c->
  <c- n>forward</c-> <c- n>specifies</c->
  <c- n>reverse</c-> <c- n>isSpecifiedBy</c->
  <c- n>functional</c->
  <c- n>asymmetric</c->
  <c- n>irreflexive</c->
<c- p>]</c->
</pre>
    <p class="note" role="note"><span class="marker">Note:</span> how we added aspect <code>SpecifiedThing</code> as another supertype to relation entity <code>Presents</code>, which was previous defined. This says that its relation instances can be ranges of <code>Specifies</code> links.</p>
    <ol start="2">
     <li data-md>
      <p>The following is a visualization of the <code>mission</code> vocabulary so far:</p>
      <p><img src="assets/tutorial2/P7-Mission-Vocabulary.png" width="100%"></p>
     <li data-md>
      <p>Let us check that our ontologies are good so far, by running the task <code>tutorial2/oml/build</code> from the <a data-link-type="dfn" href="#gradle-tasks-view" id="ref-for-gradle-tasks-view②②">Gradle Tasks view</a>, and waiting for it to finish running in the <a data-link-type="dfn" href="#gradle-executions-view" id="ref-for-gradle-executions-view②⑤">Gradle Executions view</a>. This should run with no errors.</p>
    </ol>
    <p><strong>New Description</strong></p>
    <p>With this pattern in the vocabulary, and with (Component <code>Presents</code> Interface) relation instances specified in P6 before, we can now create requirements that specify those instances.</p>
    <ol start="4">
     <li data-md>
      <p>Create a description with the IRI &lt;<code>http://example.com/tutorial2/description/requirements#</code>> and prefix <code>requirements</code>. Copy the following OML code as its contents. Save the editor.</p>
    </ol>
<pre class="language-scala highlight"><c- n>description</c-> <c- o>&lt;</c-><c- n>http</c-><c- p>:</c-><c- c1>//example.com/tutorial2/description/requirements#> as requirements {</c->

  <c- n>uses</c-> <c- o>&lt;</c-><c- n>http</c-><c- p>:</c-><c- c1>//example.com/tutorial2/vocabulary/base#> as base</c->
  <c- n>uses</c-> <c- o>&lt;</c-><c- n>http</c-><c- p>:</c-><c- c1>//example.com/tutorial2/vocabulary/mission#> as mission</c->
  <c- k>extends</c-> <c- o>&lt;</c-><c- n>http</c-><c- p>:</c-><c- c1>//example.com/tutorial2/description/interfaces#> as interfaces</c->

  <c- n>instance</c-> <c- n>orbiter</c-><c- o>-</c-><c- n>ground</c-><c- o>-</c-><c- n>data</c-><c- o>-</c-><c- n>system</c-><c- o>-</c-><c- n>command</c-><c- o>-</c-><c- n>to</c-><c- o>-</c-><c- n>spacecraft</c-> <c- p>:</c-> <c- n>mission</c-><c- p>:</c-><c- nc>Requirement</c-> <c- p>[</c->
    <c- n>base</c-><c- p>:</c-><c- n>hasIdentifier</c-> <c- s>"R.04"</c->
    <c- n>mission</c-><c- p>:</c-><c- n>specifies</c-> <c- n>interfaces</c-><c- p>:</c-><c- n>orbiter</c-><c- o>-</c-><c- n>ground</c-><c- o>-</c-><c- n>data</c-><c- o>-</c-><c- n>system</c-><c- p>.</c-><c- n>presents</c-><c- p>.</c-><c- n>commandOut</c->
  <c- p>]</c->

  <c- n>instance</c-> <c- n>orbiter</c-><c- o>-</c-><c- n>spacecraft</c-><c- o>-</c-><c- n>command</c-><c- o>-</c-><c- n>from</c-><c- o>-</c-><c- n>ground</c-><c- o>-</c-><c- n>data</c-><c- o>-</c-><c- n>system</c-> <c- p>:</c-> <c- n>mission</c-><c- p>:</c-><c- nc>Requirement</c-> <c- p>[</c->
    <c- n>base</c-><c- p>:</c-><c- n>hasIdentifier</c-> <c- s>"R.05"</c->
    <c- n>mission</c-><c- p>:</c-><c- n>specifies</c-> <c- n>interfaces</c-><c- p>:</c-><c- n>orbiter</c-><c- o>-</c-><c- n>spacecraft</c-><c- p>.</c-><c- n>presents</c-><c- p>.</c-><c- n>commandIn</c->
  <c- p>]</c->

  <c- n>instance</c-> <c- n>orbiter</c-><c- o>-</c-><c- n>ground</c-><c- o>-</c-><c- n>data</c-><c- o>-</c-><c- n>system</c-><c- o>-</c-><c- n>telemetry</c-><c- o>-</c-><c- n>from</c-><c- o>-</c-><c- n>spacecraft</c-> <c- p>:</c-> <c- n>mission</c-><c- p>:</c-><c- nc>Requirement</c-> <c- p>[</c->
    <c- n>base</c-><c- p>:</c-><c- n>hasIdentifier</c-> <c- s>"R.06"</c->
    <c- n>mission</c-><c- p>:</c-><c- n>specifies</c-> <c- n>interfaces</c-><c- p>:</c-><c- n>orbiter</c-><c- o>-</c-><c- n>ground</c-><c- o>-</c-><c- n>data</c-><c- o>-</c-><c- n>system</c-><c- p>.</c-><c- n>presents</c-><c- p>.</c-><c- n>telemetryIn</c->
  <c- p>]</c->

  <c- n>instance</c-> <c- n>orbiter</c-><c- o>-</c-><c- n>spacecraft</c-><c- o>-</c-><c- n>telemetry</c-><c- o>-</c-><c- n>to</c-><c- o>-</c-><c- n>ground</c-><c- o>-</c-><c- n>data</c-><c- o>-</c-><c- n>system</c-> <c- p>:</c-> <c- n>mission</c-><c- p>:</c-><c- nc>Requirement</c-> <c- p>[</c->
    <c- n>base</c-><c- p>:</c-><c- n>hasIdentifier</c-> <c- s>"R.07"</c->
    <c- n>mission</c-><c- p>:</c-><c- n>specifies</c-> <c- n>interfaces</c-><c- p>:</c-><c- n>orbiter</c-><c- o>-</c-><c- n>spacecraft</c-><c- p>.</c-><c- n>presents</c-><c- p>.</c-><c- n>telemetryOut</c->
  <c- p>]</c->
<c- p>}</c->
</pre>
    <ol start="5">
     <li data-md>
      <p>The following is a visualization of the <code>requirements</code> description:</p>
      <p><img src="assets/tutorial2/P7-Requirements-Description.png" width="100%"></p>
     <li data-md>
      <p>Append the following OML code to the body of <code>description/bundle</code> to include the new <code>requirements</code> ontology. Save the editor.</p>
    </ol>
<pre class="language-scala highlight"><c- n>includes</c-> <c- o>&lt;</c-><c- n>http</c-><c- p>:</c-><c- c1>//example.com/tutorial2/description/requirements#></c->
</pre>
    <ol start="7">
     <li data-md>
      <p>Let us check that our ontologies are good so far, by running the task <code>tutorial2/oml/build</code> from the <a data-link-type="dfn" href="#gradle-tasks-view" id="ref-for-gradle-tasks-view②③">Gradle Tasks view</a>, and waiting for it to finish running in the <a data-link-type="dfn" href="#gradle-executions-view" id="ref-for-gradle-executions-view②⑥">Gradle Executions view</a>. This should run with no errors.</p>
    </ol>
    <p><strong>New Queries</strong></p>
    <p>Let us now develop a query that extracts the requirements on components presenting interfaces.</p>
    <ol start="9">
     <li data-md>
      <p>Create the file <code>src/sparql/requirements.sparql</code> and copy the following SPARQL code as its content.</p>
    </ol>
<pre class="language-scala highlight"><c- nc>PREFIX</c-> <c- n>base</c-><c- p>:</c->        <c- o>&lt;</c-><c- n>http</c-><c- p>:</c-><c- c1>//example.com/tutorial2/vocabulary/base#></c->
<c- nc>PREFIX</c-> <c- n>mission</c-><c- p>:</c->     <c- o>&lt;</c-><c- n>http</c-><c- p>:</c-><c- c1>//example.com/tutorial2/vocabulary/mission#></c->
<c- nc>PREFIX</c-> <c- n>oml</c-><c- p>:</c->       <c- o>&lt;</c-><c- n>http</c-><c- p>:</c-><c- c1>//opencaesar.io/oml#></c->
<c- nc>PREFIX</c-> <c- n>rdfs</c-><c- p>:</c->       <c- o>&lt;</c-><c- n>http</c-><c- p>:</c-><c- c1>//www.w3.org/2000/01/rdf-schema#></c->

<c- nc>SELECT</c-> <c- nc>DISTINCT</c-> <c- o>?</c-><c- n>r_id</c-> <c- o>?</c-><c- n>c_name</c-> <c- o>?</c-><c- n>i_name</c->
<c- nc>WHERE</c-> <c- p>{</c->
  <c- o>?</c-><c- n>r</c-> <c- n>a</c-> <c- n>mission</c-><c- p>:</c-><c- nc>Requirement</c-> <c- p>;</c->
    <c- n>base</c-><c- p>:</c-><c- n>hasIdentifier</c-> <c- o>?</c-><c- n>r_id</c-> <c- p>;</c->
    <c- n>mission</c-><c- p>:</c-><c- n>specifies</c-> <c- p>[</c->
      <c- n>a</c-> <c- n>mission</c-><c- p>:</c-><c- nc>Presents</c-> <c- p>;</c->
      <c- n>oml</c-><c- p>:</c-><c- n>hasSource</c-> <c- p>[</c->
        <c- n>base</c-><c- p>:</c-><c- n>hasCanonicalName</c-> <c- o>?</c-><c- n>c_name</c->
      <c- p>]</c-> <c- p>;</c->
      <c- n>oml</c-><c- p>:</c-><c- n>hasTarget</c-> <c- p>[</c->
        <c- n>base</c-><c- p>:</c-><c- n>hasCanonicalName</c-> <c- o>?</c-><c- n>i_name</c->
      <c- p>]</c->
    <c- p>]</c->
<c- p>}</c->
<c- nc>ORDER</c-> <c- nc>BY</c-> <c- o>?</c-><c- n>r_id</c-> <c- o>?</c-><c- n>c_name</c-> <c- o>?</c-><c- n>i_name</c->
</pre>
    <ol start="10">
     <li data-md>
      <p>Let’s now run this query by running the task <code>tutorial2/oml/owlQuery</code> from the <a data-link-type="dfn" href="#gradle-tasks-view" id="ref-for-gradle-tasks-view②④">Gradle Tasks view</a> and waiting for it to finish execution in the <a data-link-type="dfn" href="#gradle-executions-view" id="ref-for-gradle-executions-view②⑦">Gradle Executions view</a>. It should run with no errors.</p>
     <li data-md>
      <p>Right click on the project in the <a data-link-type="dfn" href="#model-explorer-view" id="ref-for-model-explorer-view②③">Model Explorer view</a> and select <code>Refresh</code>. Navigate to the file <code>build/results/requirements.json</code> and double click it to open its editor. You should see the following results in JSON.</p>
      <p><img src="assets/tutorial2/P7-Query-Results.png" width="100%"></p>
     <li data-md>
      <p>With this JSON results, one could develop a requirement doc generator that would generate the following:</p>
    </ol>
    <p class="note" role="note"><span class="marker">Note:</span> the doc generator code is not part of the tutorial.</p>
<pre>Requirement 'R.04' specifies that component 'Orbiter Ground Data System' shall present interface 'Command Out'.
Requirement 'R.05' specifies that component 'Orbiter Spacecraft' shall present interface 'Command In'.
Requirement 'R.06' specifies that component 'Orbiter Ground Data System' shall present interface 'Telemetry In'.
Requirement 'R.07' specifies that component 'Orbiter Spacecraft' shall present interface 'Telemetry Out'.
</pre>
    <h3 class="heading settled" data-level="2.10" id="tutorial2-p8"><span class="secno">2.10. </span><span class="content">P8: Interface joins Interface</span><a class="self-link" href="#tutorial2-p8"></a></h3>
    <p><strong>Pattern Synopsis</strong></p>
    <p><em>Junctions</em> represent actual connections between <em>Interfaces</em> presented by <em>Components</em>. When a component has an interface that joins an interface of another component, we infer that there is a Connection between these components.</p>
    <p><strong>New Vocabulary</strong></p>
    <ol>
     <li data-md>
      <p>In the <code>vocabulary/mission</code> ontology, append the following OML code to the body. Save the editor.</p>
    </ol>
<pre class="language-scala highlight"><c- nd>@rdfs</c-><c- p>:</c-><c- n>comment</c-> <c- s>"A Junction joins two or more Interfaces."</c->
<c- n>relation</c-> <c- n>entity</c-> <c- nc>Junction</c-> <c- p>[</c->
  <c- n>from</c-> <c- nc>Interface</c->
  <c- n>to</c-> <c- nc>Interface</c->
  <c- n>forward</c-> <c- n>joins</c->
  <c- n>symmetric</c->
  <c- n>irreflexive</c->
<c- p>]</c-> <c- o>&lt;</c-> <c- n>base</c-><c- p>:</c-><c- nc>IdentifiedThing</c->

<c- nd>@rdfs</c-><c- p>:</c-><c- n>comment</c-> <c- s>"A Component connects to zero or more components."</c->
<c- n>relation</c-> <c- n>entity</c-> <c- nc>Connection</c-> <c- p>[</c->
  <c- n>from</c-> <c- nc>Component</c->
  <c- n>to</c-> <c- nc>Component</c->
  <c- n>forward</c-> <c- n>connectsTo</c->
  <c- n>symmetric</c->
<c- p>]</c->

<c- nd>@rdfs</c-><c- p>:</c-><c- n>comment</c-> <c- s>"When interfaces presented by components are joined, we infer that the components are connected."</c->
<c- n>rule</c-> <c- nc>Junction</c-><c- o>-</c-><c- n>infers</c-><c- o>-</c-><c- nc>Connection</c-> <c- p>[</c->
  <c- n>presents</c-><c- p>(</c-><c- n>c1</c-><c- p>,</c-> <c- n>i1</c-><c- p>)</c-> <c- n>&amp;</c-> <c- n>joins</c-><c- p>(</c-><c- n>i1</c-><c- p>,</c-> <c- n>i2</c-><c- p>)</c-> <c- n>&amp;</c-> <c- n>isPresentedBy</c-><c- p>(</c-><c- n>i2</c-><c- p>,</c-> <c- n>c2</c-><c- p>)</c-> <c- o>-></c-> <c- n>connectsTo</c-><c- p>(</c-><c- n>c1</c-><c- p>,</c-> <c- n>c2</c-><c- p>)</c->
<c- p>]</c->
</pre>
    <p class="note" role="note"><span class="marker">Note:</span> how the rule <code>Junction-infers-Connection</code> says that when a component presents an interface that joins another interface, which is presented by another component, then the former component is said to connect to the latter component. Since both relation entities <code>Junction</code> and <code>Connection</code> are flagged as symmetric, a single assertion that a junction joins one interface to another is sufficient to make a DL reasoner infer that both their components connect to one another.</p>
    <ol start="2">
     <li data-md>
      <p>The following is a visualization of the <code>mission</code> vocabulary so far:</p>
      <p><img src="assets/tutorial2/P8-Mission-Vocabulary.png" width="100%"></p>
     <li data-md>
      <p>Let us check that our ontologies are good so far, by running the task <code>tutorial2/oml/build</code> from the <a data-link-type="dfn" href="#gradle-tasks-view" id="ref-for-gradle-tasks-view②⑤">Gradle Tasks view</a>, and waiting for it to finish running in the <a data-link-type="dfn" href="#gradle-executions-view" id="ref-for-gradle-executions-view②⑧">Gradle Executions view</a>. This should run with no errors.</p>
    </ol>
    <p><strong>New Description</strong></p>
    <p>With this pattern in the vocabulary, we can specify <code>Junction</code> relation instances between some interfaces.</p>
    <ol start="4">
     <li data-md>
      <p>Create a description with the IRI &lt;<code>http://example.com/tutorial2/description/junctions#</code>> and prefix <code>junctions</code>. Copy the following OML code as its contents. Save the editor.</p>
    </ol>
<pre class="language-scala highlight"><c- n>description</c-> <c- o>&lt;</c-><c- n>http</c-><c- p>:</c-><c- c1>//example.com/tutorial2/description/junctions#> as junctions {</c->

  <c- n>uses</c-> <c- o>&lt;</c-><c- n>http</c-><c- p>:</c-><c- c1>//example.com/tutorial2/vocabulary/base#> as base</c->
  <c- n>uses</c-> <c- o>&lt;</c-><c- n>http</c-><c- p>:</c-><c- c1>//example.com/tutorial2/vocabulary/mission#> as mission</c->
  <c- k>extends</c-> <c- o>&lt;</c-><c- n>http</c-><c- p>:</c-><c- c1>//example.com/tutorial2/description/interfaces#> as interfaces</c->

  <c- n>relation</c-> <c- n>instance</c-> <c- n>orbiter</c-><c- o>-</c-><c- n>ground</c-><c- o>-</c-><c- n>data</c-><c- o>-</c-><c- n>system</c-><c- p>.</c-><c- n>orbiter</c-><c- o>-</c-><c- n>spacecraft</c-><c- p>.</c-><c- n>command</c-><c- p>.</c-><c- n>uplink</c-> <c- p>:</c-> <c- n>mission</c-><c- p>:</c-><c- nc>Junction</c-> <c- p>[</c->
    <c- n>from</c-> <c- n>interfaces</c-><c- p>:</c-><c- n>orbiter</c-><c- o>-</c-><c- n>ground</c-><c- o>-</c-><c- n>data</c-><c- o>-</c-><c- n>system</c-><c- p>.</c-><c- n>commandOut</c->
    <c- n>to</c-> <c- n>interfaces</c-><c- p>:</c-><c- n>orbiter</c-><c- o>-</c-><c- n>spacecraft</c-><c- p>.</c-><c- n>commandIn</c->
    <c- n>base</c-><c- p>:</c-><c- n>hasIdentifier</c-> <c- s>"J.01"</c->
    <c- n>base</c-><c- p>:</c-><c- n>hasCanonicalName</c-> <c- s>"Orbiter Command Uplink"</c->
  <c- p>]</c->

  <c- n>relation</c-> <c- n>instance</c-> <c- n>orbiter</c-><c- o>-</c-><c- n>ground</c-><c- o>-</c-><c- n>data</c-><c- o>-</c-><c- n>system</c-><c- p>.</c-><c- n>orbiter</c-><c- o>-</c-><c- n>spacecraft</c-><c- p>.</c-><c- n>telemetry</c-><c- p>.</c-><c- n>downlink</c-> <c- p>:</c-> <c- n>mission</c-><c- p>:</c-><c- nc>Junction</c-> <c- p>[</c->
    <c- n>from</c-> <c- n>interfaces</c-><c- p>:</c-><c- n>orbiter</c-><c- o>-</c-><c- n>spacecraft</c-><c- p>.</c-><c- n>telemetryOut</c->
    <c- n>to</c-> <c- n>interfaces</c-><c- p>:</c-><c- n>orbiter</c-><c- o>-</c-><c- n>ground</c-><c- o>-</c-><c- n>data</c-><c- o>-</c-><c- n>system</c-><c- p>.</c-><c- n>telemetryIn</c->
    <c- n>base</c-><c- p>:</c-><c- n>hasIdentifier</c-> <c- s>"J.02"</c->
    <c- n>base</c-><c- p>:</c-><c- n>hasCanonicalName</c-> <c- s>"Orbiter Telemetry Downlink"</c->
  <c- p>]</c->
<c- p>}</c->
</pre>
    <ol start="5">
     <li data-md>
      <p>The following is a visualization of the <code>junctions</code> description:</p>
      <p><img src="assets/tutorial2/P8-Junctions-Description.png" width="100%"></p>
     <li data-md>
      <p>Append the following OML code to the body of <code>description/bundle</code> to include the new <code>junctions</code> ontology. Save the editor.</p>
    </ol>
<pre class="language-scala highlight"><c- n>includes</c-> <c- o>&lt;</c-><c- n>http</c-><c- p>:</c-><c- c1>//example.com/tutorial2/description/junctions#></c->
</pre>
    <ol start="7">
     <li data-md>
      <p>Let us check that our ontologies are good so far, by running the task <code>tutorial2/oml/build</code> from the <a data-link-type="dfn" href="#gradle-tasks-view" id="ref-for-gradle-tasks-view②⑥">Gradle Tasks view</a>, and waiting for it to finish running in the <a data-link-type="dfn" href="#gradle-executions-view" id="ref-for-gradle-executions-view②⑨">Gradle Executions view</a>. This should run with no errors.</p>
    </ol>
    <p><strong>New Queries</strong></p>
    <p>Let us now develop a query that extracts the requirements on components presenting interfaces.</p>
    <ol start="8">
     <li data-md>
      <p>Creat the file <code>src/sparql/connections.sparql</code> and copy the following SPARQL code as its content.</p>
    </ol>
<pre class="language-scala highlight"><c- nc>PREFIX</c-> <c- n>base</c-><c- p>:</c->        <c- o>&lt;</c-><c- n>http</c-><c- p>:</c-><c- c1>//example.com/tutorial2/vocabulary/base#></c->
<c- nc>PREFIX</c-> <c- n>mission</c-><c- p>:</c->     <c- o>&lt;</c-><c- n>http</c-><c- p>:</c-><c- c1>//example.com/tutorial2/vocabulary/mission#></c->

<c- nc>SELECT</c-> <c- nc>DISTINCT</c-> <c- o>?</c-><c- n>c1_name</c-> <c- o>?</c-><c- n>c2_name</c->
<c- nc>WHERE</c-> <c- p>{</c->
  <c- o>?</c-><c- n>c1</c-> <c- n>a</c-> <c- n>mission</c-><c- p>:</c-><c- nc>Component</c-> <c- p>;</c->
    <c- n>base</c-><c- p>:</c-><c- n>hasCanonicalName</c-> <c- o>?</c-><c- n>c1_name</c-> <c- p>;</c->
    <c- n>mission</c-><c- p>:</c-><c- n>connectsTo</c-> <c- p>[</c->
      <c- n>base</c-><c- p>:</c-><c- n>hasCanonicalName</c-> <c- o>?</c-><c- n>c2_name</c->
    <c- p>]</c->
<c- p>}</c->
<c- nc>ORDER</c-> <c- nc>BY</c-> <c- o>?</c-><c- n>c1_name</c-> <c- o>?</c-><c- n>c2_name</c->
</pre>
    <ol start="10">
     <li data-md>
      <p>Let’s now run this query by running the task <code>tutorial2/oml/owlQuery</code> from the <a data-link-type="dfn" href="#gradle-tasks-view" id="ref-for-gradle-tasks-view②⑦">Gradle Tasks view</a> and waiting for it to finish execution in the <a data-link-type="dfn" href="#gradle-executions-view" id="ref-for-gradle-executions-view③⓪">Gradle Executions view</a>. It should run with no errors.</p>
     <li data-md>
      <p>Right click on the project in the <a data-link-type="dfn" href="#model-explorer-view" id="ref-for-model-explorer-view②④">Model Explorer view</a> and select <code>Refresh</code>. Navigate to the file <code>build/results/connections.json</code> and double click it to open its editor. You should see the following results in JSON.</p>
      <p><img src="assets/tutorial2/P8-Query-Results.png" width="100%"></p>
    </ol>
    <p class="note" role="note"><span class="marker">Note:</span> how the entailments generated by the DL reasoner allowed us to write concise queries that would otherwise have had to encode all the logical semantics.</p>
    <h3 class="heading settled" data-level="2.11" id="tutorial2-summary"><span class="secno">2.11. </span><span class="content">Summary</span><a class="self-link" href="#tutorial2-summary"></a></h3>
    <p>This tutorial introduced the pattern-based approach of modeling with OML. It demonstrated how vocabulary can be designed in terms of patterns with well-defined syntax and semantics that allow useful analysis to be carried out on a model in support of a particular methodology of systems modeling. It also demonstrated how descriptions can be organized into loosely coupled fragments that declare minimum dependencies on each other. This can help scalability when specifying large models (by loading the minimum information only). It can also improve reusability of models (by reusing the minimum information only). Finally, the tutorial also covered some more syntax and semantics of OML that makes modeling and reasoning flexible and powerful. We saw the use of aspects as mix-in types to add capabilities to concepts and relation entities, relation entities and how they can be used to create both reified and unreified links, scalar properties and how they are typed by datatypes, restrictions and how they can be used to tighten the range or values of properties, and rules and semantic flags of relation entities and how they can influence logical entailments and reasoning.</p>
    <h2 class="heading settled" data-level="3" id="tutorial3"><span class="secno">3. </span><span class="content">Tutorial 3: OML CI</span><a class="self-link" href="#tutorial3"></a></h2>
    <p class="note" role="note"><span class="marker">Note:</span> This tutorial builds on the project developed in <a href="#tutorial2">Tutorial 2</a>. Please do that first before proceeding.</p>
    <h3 class="heading settled" data-level="3.1" id="tutorial3-learning-objectives"><span class="secno">3.1. </span><span class="content">Learning Objectives</span><a class="self-link" href="#tutorial3-learning-objectives"></a></h3>
    <p>Managing an OML project in a git repository makes a lot of sense since OML models are textual artifacts. One of the biggest advantages of managing source files in a git repo is that it is easy to setup a continuous integration (CI) pipeline that builds the source on every commit. This mechanism to centralize and automate the build process is especially important to help foster collaboration on a project without sacrificing its quality as it detects problems early.</p>
    <p>By the end of this tutorial, readers will be able to:</p>
    <ol>
     <li data-md>
      <p>Setup a Git repository for OML projects:</p>
     <li data-md>
      <p>Setup CI pipelines for OML repositories</p>
     <li data-md>
      <p>Use CI pipeline to detect OML syntactic errors</p>
     <li data-md>
      <p>Use CI pipeline to detect OML semantic errors</p>
    </ol>
    <p class="note" role="note"><span class="marker">Note:</span> The source files created in this tutorial are available for reference in this <a href="https://github.com/opencaesar/kepler16b-example">repository</a>, but we encourage the reader to recreate them by following the instructions below.</p>
    <h3 class="heading settled" data-level="3.2" id="tutorial3-setup-git-repository"><span class="secno">3.2. </span><span class="content">Setup Git Repository</span><a class="self-link" href="#tutorial3-setup-git-repository"></a></h3>
    <p>In this step, we will create a new Github repo and push the OML project from <a href="#tutorial2">Tutorial 2</a> to it using the <a href="https://git-scm.com/book/en/v2/Getting-Started-Installing-Git">Git CLI</a>.</p>
    <ol>
     <li data-md>
      <p>Open a web browser. navigate to your favorite Github organization and select the <code>New Repository</code> button. Set the name of the repo to <code>kepler16b-example</code> and the other settings as shown below. Finally, click the <code>Create Repository</code> button.</p>
      <p><img src="assets/tutorial3/Create-New-Repo.png" style="border:1px groove black;" width="100%"></p>
     <li data-md>
      <p>In your OML Rosetta workspace, right-click on the <code>tutorial2</code> project, select Proprties action, and note the <code>Location</code> path.</p>
      <p><img src="assets/tutorial3/Select-Project-Properties.png" style="border:1px groove black;" width="100%"></p>
     <li data-md>
      <p>Open the <code>Terminal</code> application on your machine, navigate to the project’s path, and initialize the repo using the following commands:</p>
    </ol>
<pre class="language-shell highlight">$ cd path/to/tutorial2
$ git init
$ git remote add origin git@github.com:OWNER/kepler16b-example.git
$ git pull
</pre>
    <p>Replace OWNER by your new Github repo’s owner.</p>
    <ol start="4">
     <li data-md>
      <p>Stage, commit, and push the project to the Github remote repository using the following commands:</p>
    </ol>
<pre class="language-shell highlight">$ git add .
$ git commit -m <c- u>"initial commit"</c->
$ git push --set-upstream origin main -f
</pre>
    <ol start="5">
     <li data-md>
      <p>In your web browser, refresh the repo’s page. You should now see the repository looking like this:</p>
      <p><img src="assets/tutorial3/Refresh-Repository.png" style="border:1px groove black;" width="100%"></p>
     <li data-md>
      <p>In the OML Rosetta workspace, right click on the project and choose Refresh.</p>
      <p><img src="assets/tutorial3/Refresh-Project.png" style="border:1px groove black;" width="100%"></p>
    </ol>
    <blockquote>
     <p>Your project should now show as being managed in the github repo.</p>
    </blockquote>
    <p><img src="assets/tutorial3/Post-Refresh-Project.png" style="border:1px groove black;" width="50%"></p>
    <h3 class="heading settled" data-level="3.3" id="tutorial3-setup-ci-pipeline"><span class="secno">3.3. </span><span class="content">Setup CI Pipeline</span><a class="self-link" href="#tutorial3-setup-ci-pipeline"></a></h3>
    <p>In this step, we will create a CI pipeline for the repository using Github Actions. The pipeline (called a workflow in Github Actions) will build the project on every commit.</p>
    <ol>
     <li data-md>
      <p>In a web browser, navigate to your repo’s web page, and click on the Actions tab.</p>
      <p><img src="assets/tutorial3/Select-Actions.png" style="border:1px groove black;" width="100%"></p>
     <li data-md>
      <p>In the Actions page, click on the <code>Configure</code> button of the <code>Simple workflow</code>.</p>
      <p><img src="assets/tutorial3/Select-Simple-Worflow.png" style="border:1px groove black;" width="100%"></p>
     <li data-md>
      <p>In the path, rename the file to <code>ci.yml</code>.</p>
      <p><img src="assets/tutorial3/Rename-Workflow.png" style="border:1px groove black;" width="100%"></p>
     <li data-md>
      <p>Replace the file contents by the following code:</p>
    </ol>
<pre class="language-yaml highlight"><c- f>name</c-><c- p>:</c-> CI/CD

<c- f>on</c-><c- p>:</c->
  <c- f>push</c-><c- p>:</c->
    <c- f>branches</c-><c- p>:</c-> [ <c- s>"main"</c-> ]
  <c- f>pull_request</c-><c- p>:</c->
    <c- f>branches</c-><c- p>:</c-> [ <c- s>"main"</c-> ]

<c- f>permissions</c-><c- p>:</c->
  <c- f>contents</c-><c- p>:</c-> read

<c- f>jobs</c-><c- p>:</c->
  <c- f>build</c-><c- p>:</c->
    <c- f>runs-on</c-><c- p>:</c-> ubuntu-latest
    <c- f>steps</c-><c- p>:</c->
    - <c- f>name</c-><c- p>:</c-> Checkout
      <c- f>uses</c-><c- p>:</c-> actions/checkout@v3
    - <c- f>name</c-><c- p>:</c-> Setup JDK
      <c- f>uses</c-><c- p>:</c-> actions/setup-java@v3
      <c- f>with</c-><c- p>:</c->
        <c- f>java-version</c-><c- p>:</c-> <c- s>'17'</c->
        <c- f>distribution</c-><c- p>:</c-> <c- s>'temurin'</c->
    - <c- f>name</c-><c- p>:</c-> Setup Gradle
      <c- f>uses</c-><c- p>:</c-> gradle/gradle-build-action@v2
    - <c- f>name</c-><c- p>:</c-> Build
      <c- f>run</c-><c- p>:</c-> ./gradlew build
    - <c- f>name</c-><c- p>:</c-> Upload
      <c- f>if</c-><c- p>:</c-> ${{ always() }}
      <c- f>uses</c-><c- p>:</c-> actions/upload-artifact@v3
      <c- f>with</c-><c- p>:</c->
        <c- f>name</c-><c- p>:</c-> build
        <c- f>path</c-><c- p>:</c-> build/
</pre>
    <p>The CI workflow above has a single job called <code>build</code> with 5 named: Check, Setup JDK, Setup Gradle, Build (runs the DL reasoner) and Upload (uploads the <code>build</code> folder as an artifact for later inspection in case of error).</p>
    <ol start="5">
     <li data-md>
      <p>Push the <code>cy.yml</code> file to the repo and watch the first workflow run complete successfully.</p>
      <video controls style="border:1px groove black;" width="100%">
       <source src="assets/tutorial3/First-CI-Build.mp4">
      </video>
     <li data-md>
      <p>Back in OML Rosetta,  Right click on the project and select Team -> Pull. A pull results dialog will open. Press the button to close it.</p>
    </ol>
    <p class="note" role="note"><span class="marker">Note:</span> this last step is needed to refresh the local clone of the repo with the changes we committed on the remote on Github.</p>
    <h3 class="heading settled" data-level="3.4" id="tutorial3-push-syntactic-error"><span class="secno">3.4. </span><span class="content">Detect Syntactic Error</span><a class="self-link" href="#tutorial3-push-syntactic-error"></a></h3>
    <p>In OML Rosetta, create a new branch, add a syntactic error (an invalid cross-reference) to the OML files, and push it. Watch how the CI workflow detects the error. Then, undo the change and push to watch how the workflow succeeds again.</p>
    <video controls style="border:1px groove black;" width="100%">
     <source src="assets/tutorial3/Second-CI-Build.mp4">
    </video>
    <h3 class="heading settled" data-level="3.5" id="tutorial3-push-semantic-error"><span class="secno">3.5. </span><span class="content">Detect Semantic Error</span><a class="self-link" href="#tutorial3-push-semantic-error"></a></h3>
    <p>In OML Rosetta, in the same branch (created in the previous step), add a semantic error (an assembly contained by two assemblies which is a violation of the <code>base:contains</code> relation being inverse functional) to the OML files to see how the CI workflow detects the error. Then, undo the change and push to watch how the workflow succeeds again.</p>
    <video controls style="border:1px groove black;" width="100%">
     <source src="assets/tutorial3/Third-CI-Build.mp4">
    </video>
    <h3 class="heading settled" data-level="3.6" id="tutorial3-summary"><span class="secno">3.6. </span><span class="content">Summary</span><a class="self-link" href="#tutorial3-summary"></a></h3>
    <p>In the realm of OML projects, efficient collaboration and project integrity are paramount. This tutorial serves as a comprehensive guide, detailing the strategic management of OML projects within Git repositories, fortified by Continuous Integration (CI) pipelines. Through a step-by-step approach, the tutorial expertly navigates learners through the intricacies of project management on GitHub repositories, followed by the establishment of robust CI pipelines using GitHub Actions. A focal point of the tutorial lies in the demonstration of how these pipelines can adeptly identify both syntactic and semantic errors in commits pushed to the repository. By embracing these methodologies, professionals can elevate project collaboration, fortify quality control, and ensure the consistent enhancement of OML projects within a collaborative environment.</p>
    <h2 class="heading settled" data-level="4" id="tutorial4"><span class="secno">4. </span><span class="content">Tutorial 4: OML Reports</span><a class="self-link" href="#tutorial4"></a></h2>
    <p class="note" role="note"><span class="marker">Note:</span> This tutorial builds on the project developed in <a href="#tutorial3">Tutorial 3</a>. Please do that first before proceeding.</p>
    <h3 class="heading settled" data-level="4.1" id="tutorial4-learning-objectives"><span class="secno">4.1. </span><span class="content">Learning Objectives</span><a class="self-link" href="#tutorial4-learning-objectives"></a></h3>
    <p>Modeling a system with OML would not be useful without the ability to analyze the model and share the analysis results with the project’s stakeholders. In <a href="#tutorial2">Tutorial 2</a>, we learned how an OML model can be analyzed with SPARQL queries, and the results visualized, but we did not see how those visualizations were created. Moreover, in <a href="#tutorial3">Tutorial 3</a>, we learned how a (CI or Continuous Integration) pipeline can run the build task automatically, but we did not see how it can also automate the analysis of the project and the deployment of the results to the project’s stakeholder (CD or Continuous Deployment).</p>
    <p>By the end of this tutorial, readers will be able to:</p>
    <ol>
     <li data-md>
      <p>Utilize Jupyter Notebook to create a rich report based on SPARQL query results (<a href="http://www.opencaesar.io/kepler16b-example/">final result</a>).</p>
     <li data-md>
      <p>Generate canonical OML documentation (OmlDoc) that can be cross referenced from the report.</p>
     <li data-md>
      <p>Evolve a CI pipeline to be a CI/CD pipeline that runs analysis and deploys its results.</p>
    </ol>
    <p class="note" role="note"><span class="marker">Note:</span> The source files created in this tutorial are available for reference in this <a href="https://github.com/opencaesar/kepler16b-example">repository</a>, but we encourage the reader to recreate them by following the instructions below.</p>
    <h3 class="heading settled" data-level="4.2" id="tutorial4-install-jupyter-notebook"><span class="secno">4.2. </span><span class="content">Install Jupyter Notebook</span><a class="self-link" href="#tutorial4-install-jupyter-notebook"></a></h3>
    <p>Jupyter is an open-source project that lets you easily combine Markdown text and executable Python source code on one canvas called a notebook. Many editors support working with Jupyter Notebooks; however, in this tutorial we will use VS Code.</p>
    <ol>
     <li data-md>
      <p>If you don’t already have Python with the Jupyter package, follow these <a href="https://noteable.io/jupyter-notebook/install-jupyter-notebook/">instructions</a>.</p>
     <li data-md>
      <p>If you don’t already have VS Code with Jupyter Notebook extension, follow these <a href="https://code.visualstudio.com/download">instructions</a>.</p>
     <li data-md>
      <p>Run VS Code client and if the Terminal window is not already visible, open it by selecting View -> Terminal from the main menu.</p>
    </ol>
    <p class="note" role="note"><span class="marker">Note:</span> for best experience in this tutorial, switch VS Code to the <code>Light Modern</code> <a href="https://code.visualstudio.com/docs/getstarted/themes">color theme</a>.</p>
    <p><img src="assets/tutorial4/VS-Code.png" style="border:1px groove black;" width="100%"></p>
    <ol start="4">
     <li data-md>
      <p>Select File -> Open Folder... and select the folder of the project you created in <a href="#tutorial2">Tutorial 2</a>.</p>
      <p><img src="assets/tutorial4/Open-Folder.png" style="border:1px groove black;" width="100%"></p>
    </ol>
    <p class="note" role="note"><span class="marker">Note:</span> Assuming you had also done <code>Tutorial 3</code>, this folder should be a clone of a git repository called <code>kepler16b-example</code>.</p>
    <h3 class="heading settled" data-level="4.3" id="tutorial4-run-sparql-queries"><span class="secno">4.3. </span><span class="content">Run SPARQL Queries</span><a class="self-link" href="#tutorial4-run-sparql-queries"></a></h3>
    <p>Recall from <a href="#tutorial2">Tutorial 2</a> that an OML project can create SPARQL query files in some path and store results in some other path. The code below is an excerpt from the project’s <code>./build.gradle</code> file showing a task called owlQuery that runs the SPARQL queries.</p>
<pre class="language-groovy highlight"><c- n>task</c-> <c- nf>owlQuery</c-><c- o>(</c-><c- nl>type:</c-><c- n>io</c-><c- o>.</c-><c- e>opencaesar</c-><c- o>.</c-><c- e>owl</c-><c- o>.</c-><c- e>query</c-><c- o>.</c-><c- e>OwlQueryTask</c-><c- o>,</c-> <c- nl>group:</c-><c- u>"oml"</c-><c- o>,</c-> <c- nl>dependsOn:</c-> <c- n>owlLoad</c-><c- o>)</c-> <c- o>{</c->
    <c- n>inputs</c-><c- o>.</c-><c- e>files</c-><c- o>(</c-><c- n>owlLoad</c-><c- o>.</c-><c- e>inputs</c-><c- o>.</c-><c- e>files</c-><c- o>)</c-> <c- c1>// rerun when the dataset changes</c->
    <c- n>endpointURL</c-> <c- o>=</c-> <c- u>"http://localhost:3030/$dataset"</c-><c- o>.</c-><c- e>toString</c-><c- o>()</c->
    <c- n>queryPath</c-> <c- o>=</c-> <c- n>file</c-><c- o>(</c-><c- t>'src/sparql'</c-><c- o>)</c->
    <c- n>resultPath</c-> <c- o>=</c-> <c- n>file</c-><c- o>(</c-><c- t>'build/results'</c-><c- o>)</c->
    <c- n>format</c-> <c- o>=</c-> <c- t>'json'</c->
<c- o>}</c->
</pre>
    <ol>
     <li data-md>
      <p>In the Terminal view, run the following command, then inspect the json files in the <code>build/results</code> folder.</p>
    </ol>
<pre class="language-shell highlight">$ ./gradlew owlQuery

> Task :startFuseki
Fuseki server is already running with <c- g>pid</c-><c- o>=</c-><c- m>56106</c->

BUILD SUCCESSFUL <c- k>in</c-> 6s
<c- m>6</c-> actionable tasks: <c- m>3</c-> executed, <c- m>3</c-> up-to-date
</pre>
    <p><img src="assets/tutorial4/Run-Qwl-Query.png" style="border:1px groove black;" width="100%"></p>
    <ol start="2">
     <li data-md>
      <p>Open the <code>.github/workflows/ci.yml</code> file (created in <a href="#tutorial3">Tutorial 3</a>) and insert the following step right before the <code>Upload</code> one:</p>
    </ol>
<pre class="language-yaml highlight">- <c- f>name</c-><c- p>:</c-> Query
  <c- f>run</c-><c- p>:</c-> ./gradlew owlQuery
</pre>
    <p><img src="assets/tutorial4/Add-Owl-Query-To-CI.png" style="border:1px groove black;" width="100%"></p>
    <ol start="3">
     <li data-md>
      <p>Click on the Source Control tab on the left; you should find the <code>ci.yml</code> file listed. Type a commit message and select <code>Commit &amp; Push</code> button. Answer <code>Yes</code> in the next dialog box. Wait for the operation to finish.</p>
     <li data-md>
      <p>In a web browser, navigate to the <code>kepler16b-example</code> Github repo you created in <a href="#tutorial3">Tutorial 3</a>. Click on the Actions tab. Wait until the CI workflow succeeds.</p>
      <p><img src="assets/tutorial4/Owl-Query-CI-Succeeds.png" style="border:1px groove black;" width="100%"></p>
    </ol>
    <h3 class="heading settled" data-level="4.4" id="tutorial4-generate-oml-doc"><span class="secno">4.4. </span><span class="content">Generate OML Doc</span><a class="self-link" href="#tutorial4-generate-oml-doc"></a></h3>
    <p>In this step, we will add a new task of type <code>OwlDoc</code> to the <code>build.gradle</code> file. This tool generates default documentation for an Oml dataset. We will also add it to the CI script.</p>
    <p>Not: An <a href="https://github.com/opencaesar/owl-tools/tree/master/owl-doc">OwlDoc</a> task requires the Oml dataset to be converted first to Owl, which we get when we chain it to an <a href="https://github.com/opencaesar/owl-adapter/blob/master/oml2owl/README.md">Oml2Owl</a> task.</p>
    <ol>
     <li data-md>
      <p>In VS Code, switch to the Explorer tab on the left. Open the <code>build.gradle</code> file. Find the <code>buildscript.dependencies</code> clause. Add a new dependency on the <code>owl-doc-gradle</code> tool on the top:</p>
    </ol>
<pre class="language-groovy highlight"><c- n>classpath</c-> <c- t>'io.opencaesar.owl:owl-doc-gradle:2.+'</c->
</pre>
    <p><img src="assets/tutorial4/Add-Owl-Doc-Dependency.png" style="border:1px groove black;" width="100%"></p>
    <ol start="2">
     <li data-md>
      <p>In the <code>build.gradle</code> file, insert the following <code>generateDocs</code> task right before the <code>startFuseki</code> task. Save.</p>
    </ol>
<pre class="language-groovy highlight"><c- d>/*</c->
<c- d> * A task to generate documentation for the OWL catalog</c->
<c- d> * @seeAlso https://github.com/opencaesar/owl-tools/blob/master/owl-doc/README.md</c->
<c- d> */</c->
<c- n>task</c-> <c- nf>generateDocs</c-><c- o>(</c-><c- nl>type:</c-> <c- n>io</c-><c- o>.</c-><c- e>opencaesar</c-><c- o>.</c-><c- e>owl</c-><c- o>.</c-><c- e>doc</c-><c- o>.</c-><c- e>OwlDocTask</c-><c- o>,</c-> <c- nl>dependsOn:</c-> <c- n>owlReason</c-><c- o>)</c-> <c- o>{</c->
    <c- c1>// OWL catalog</c->
    <c- n>inputCatalogPath</c-> <c- o>=</c-> <c- n>file</c-><c- o>(</c-><c- t>'build/owl/catalog.xml'</c-><c- o>)</c->
    <c- c1>// OWL catalog title</c->
    <c- n>inputCatalogTitle</c-> <c- o>=</c-> <c- t>'Kepler16b'</c->
    <c- c1>// OWL catalog version</c->
    <c- n>inputCatalogVersion</c-> <c- o>=</c-> <c- n>project</c-><c- o>.</c-><c- e>version</c->
    <c- c1>// OWL Ontology Iris</c->
    <c- n>inputOntologyIris</c-> <c- o>=</c-> <c- o>[</c-> <c- u>"$rootIri/classes"</c-><c- o>,</c-> <c- u>"$rootIri/properties"</c-><c- o>,</c->  <c- u>"$rootIri/individuals"</c-> <c- o>]</c->
    <c- c1>// Output folder</c->
    <c- n>outputFolderPath</c-> <c- o>=</c-> <c- n>file</c-><c- o>(</c-><c- t>'build/web/doc'</c-><c- o>)</c->
    <c- c1>// Output case sensitivie path</c->
    <c- n>outputCaseSensitive</c-> <c- o>=</c-> <c- n>org</c-><c- o>.</c-><c- e>gradle</c-><c- o>.</c-><c- e>internal</c-><c- o>.</c-><c- e>os</c-><c- o>.</c-><c- e>OperatingSystem</c-><c- o>.</c-><c- e>current</c-><c- o>().</c-><c- e>isLinux</c-><c- o>()</c->
<c- o>}</c->
</pre>
    <p><img src="assets/tutorial4/Add-Owl-Doc-Task.png" style="border:1px groove black;" width="100%"></p>
    <ol start="3">
     <li data-md>
      <p>In Terminal, run <code>./gradlew generateDocs</code>. Inspect the <code>build/web/doc</code> folder. You will find the generated HTML documentation.</p>
      <p><img src="assets/tutorial4/Run-Owl-Doc.png" style="border:1px groove black;" width="100%"></p>
     <li data-md>
      <p>Open the file <code>build/web/doc/index.html</code> in a web browser and browse through the generated documentation.</p>
      <p><img src="assets/tutorial4/Browse-Generated-Owl-Doc.png" style="border:1px groove black;" width="100%"></p>
     <li data-md>
      <p>Open the <code>.github/workflows/ci.yml</code> file and add the following step right after the <code>Upload</code> step.</p>
    </ol>
<pre class="language-yaml highlight">- <c- f>name</c-><c- p>:</c-> Generate Docs
  <c- f>run</c-><c- p>:</c-> ./gradlew generateDocs
</pre>
    <p><img src="assets/tutorial4/Add-Owl-Doc-To-CI.png" style="border:1px groove black;" width="100%"></p>
    <ol start="6">
     <li data-md>
      <p>Using the Source Control tab, commit and push both <code>build.gradle</code> and <code>ci.yml</code> files. Check that the CI workflow succeeded on the repository’s Actions tab.</p>
    </ol>
    <h3 class="heading settled" data-level="4.5" id="tutorial4-setup-github-pages"><span class="secno">4.5. </span><span class="content">Setup Github Pages</span><a class="self-link" href="#tutorial4-setup-github-pages"></a></h3>
    <p>In the next few sections, we will create a Jupyter Notebook, convert it to HTML, and publish (deploy) it. Before we can do that, we need to setup a web server to deploy it to.</p>
    <p>A convenient choice here is to deploy to the repository’s <a href="https://pages.github.com/">Github Pages</a>. This makes the page accessible at the address <code>http://OWNER.github.io/kepler16b-example/</code> (where OWNER is the repository’s owner on github).</p>
    <ul>
     <li data-md>
      <p>In your web browser, navigate to the repo’s URL, click on the Settings tab, then on the Pages tab (on the right).</p>
     <li data-md>
      <p>In the <code>Build and Deployment</code> section, click on the <code>Source</code> combo box, and select <code>Github Actions</code>.</p>
      <p><img src="assets/tutorial4/Setup-Github-Pages.png" style="border:1px groove black;" width="100%"></p>
    </ul>
    <p class="note" role="note"><span class="marker">Note:</span> This choice means that the content of Pages will be published by a Github Actions workflow. As we will see below, this will allow the repository’s CI script to publish it,</p>
    <h3 class="heading settled" data-level="4.6" id="tutorial4-create-jupyter-notebook"><span class="secno">4.6. </span><span class="content">Create Jupyter Notebook</span><a class="self-link" href="#tutorial4-create-jupyter-notebook"></a></h3>
    <p>In this step, we will create a simple Jupyter Notebook in the project and setup the CI workflow to publish it to Github Pages.</p>
    <ol>
     <li data-md>
      <p>In VS Code Explorer, right click on the <code>src</code> folder, select New Folder, and call it <code>ipynb</code>.</p>
     <li data-md>
      <p>Right click on the <code>ipynb</code> folder, select New File, and call it <code>index.ipynb</code>. This opens a Jupiter Notebook editor with a single empty cell.</p>
      <p><img src="assets/tutorial4/Setup-Github-Pages.png" style="border:1px groove black;" width="100%"></p>
     <li data-md>
      <p>In the top right corner of the editor, click on the <code>Select Kernel</code> button, select <code>Python Environments</code>, and select one of the available Python 3 environments. Notice that now the name of the selected kernel shows up in the top right corner.</p>
     <li data-md>
      <p>Hover over the first empty cell in the editor. A toolbar appears with a trash can. Click on the trash can to delete the cell.</p>
     <li data-md>
      <p>In place of the cell, you should now see two buttons, one says <code>Code</code> and the other says <code>Markdown</code>. Click on the latter. This adds a Markdown cell as the first cell.</p>
     <li data-md>
      <p>In the cell, type the following text, then click on the <code>✓</code> (tick) icon in the cell’s toolbar to apply. The editor should now look like the picture below.</p>
    </ol>
<pre class="language-markdown highlight"># Kepler16b
The Kepler16b project is developing a hypothetical mission to an exoplanet that is millions of light years away.
</pre>
    <p><img src="assets/tutorial4/Add-Notebook-Title.png" style="border:1px groove black;" width="100%"></p>
    <p>Before we go further, let us setup the CI script to publish this simple Notebook. This involves setting up a Python environment, installing some dependencies, running a couple of python tools to execute the notebook and convert it to HTML, then finally deploying that HTML to Github Pages.</p>
    <ol start="7">
     <li data-md>
      <p>In VS Code Explorer, right click on the <code>ipynb</code> folder, choose New File, and name it <code>requirements.txt</code>. Insert the following text as its contents and save.</p>
    </ol>
<pre class="language-python highlight"><c- n>ipykernel</c->
<c- n>nbconvert</c->
<c- n>pandas</c->
<c- n>plantuml</c->
<c- n>igraph</c->
<c- n>cairocffi</c->
</pre>
    <p class="note" role="note"><span class="marker">Note:</span> A <code>requirements.txt</code> file is a typical Python mechanism to declare dependencies. In this case, the first two dependencies are the minimum required to enable executing and converting the notebook to HTML. The rest of the dependencies are libraries that will be used in the steps below to visualize the analysis results.</p>
    <p><img src="assets/tutorial4/Add-Requirements.png" style="border:1px groove black;" width="100%"></p>
    <ol start="8">
     <li data-md>
      <p>In VS Code Terminal, activate the python environment used by the notebook’s kernel, then run the following command to install the dependencies locally:</p>
    </ol>
<pre class="language-shell highlight">pip install -r src/ipynb/requirements.txt
</pre>
    <ol start="9">
     <li data-md>
      <p>Open the <code>.github/workflows/ci.yml</code> file and add the following step right after the <code>Generate Docs</code> step.</p>
    </ol>
<pre class="language-yaml highlight">  - <c- f>name</c-><c- p>:</c-> Set up Python 3
    <c- f>uses</c-><c- p>:</c-> actions/setup-python@v4
    <c- f>with</c-><c- p>:</c-> 
      <c- f>python-version</c-><c- p>:</c-> <c- s>'3.10'</c->
  - <c- f>name</c-><c- p>:</c-> Install Requirements
    <c- f>run</c-><c- p>:</c-> pip install -r src/ipynb/requirements.txt
  - <c- f>name</c-><c- p>:</c-> Run Notebook
    <c- f>run</c-><c- p>:</c-> python -m nbconvert --execute --to notebook --no-input src/ipynb/index.ipynb --output-dir='build/web' 
  - <c- f>name</c-><c- p>:</c-> Convert Notebook to HTML
    <c- f>run</c-><c- p>:</c-> python -m nbconvert --to html --no-input build/web/index.ipynb
  - <c- f>name</c-><c- p>:</c-> Publish
    <c- f>uses</c-><c- p>:</c-> actions/upload-pages-artifact@v1
    <c- f>with</c-><c- p>:</c->
      <c- f>path</c-><c- p>:</c-> build/web
      
<c- f>deploy</c-><c- p>:</c->
  <c- f>needs</c-><c- p>:</c-> build
  <c- f>permissions</c-><c- p>:</c->
    <c- f>pages</c-><c- p>:</c-> write
    <c- f>id-token</c-><c- p>:</c-> write
  <c- f>environment</c-><c- p>:</c->
    <c- f>name</c-><c- p>:</c-> github-pages
    <c- f>url</c-><c- p>:</c-> ${{ steps.deployment.outputs.page_url }}
  <c- f>runs-on</c-><c- p>:</c-> ubuntu-latest
  <c- f>steps</c-><c- p>:</c->
    - <c- f>name</c-><c- p>:</c-> Deploy
      <c- f>id</c-><c- p>:</c-> deployment
      <c- f>uses</c-><c- p>:</c-> actions/deploy-pages@v1
</pre>
    <p><img src="assets/tutorial4/Add-Owl-Doc-To-CI.png" style="border:1px groove black;" width="100%"></p>
    <p class="note" role="note"><span class="marker">Note:</span> The first set of steps are added to the <code>build</code> job. They setup a Python 3 environment, install the dependencies, run the notebook, convert it to HTML in the <code>build/web</code> folder, then upload the folder as a Pages artifact. Then, a new job named <code>deploy</code> is added. This job runs after <code>build</code> is done and deploys the Pages artifact to the web server.</p>
    <ol start="10">
     <li data-md>
      <p>Using the Source Control tab, commit and push all the three files <code>index.ipynb</code>, <code>requirements.txt</code> and <code>ci.yml</code>. Check that the CI workflow succeeded on the repository’s Actions tab. You should see the following page in your browser:</p>
      <p><img src="assets/tutorial4/First-Noetbook-CI-Build.png" style="border:1px groove black;" width="100%"></p>
     <li data-md>
      <p>Click on the hyperlink in the <code>deploy</code> box to navigate the deployed Github Pages of the repository. This should open up a new page that looks like this:</p>
      <p><img src="assets/tutorial4/First-Notebook-Publish.png" style="border:1px groove black;" width="100%"></p>
    </ol>
    <h3 class="heading settled" data-level="4.7" id="tutorial4-reference-documentation"><span class="secno">4.7. </span><span class="content">P1: Reference Documentation</span><a class="self-link" href="#tutorial4-reference-documentation"></a></h3>
    <p>In this step, we will add to the notebook some cross references to the OML documentation that we generated previously for the project.</p>
    <ol>
     <li data-md>
      <p>In the <code>src/ipynb/index.ipynb</code> editor, add a new <em>Markdown</em> cell, and type the following text in it. Click the <code>✓</code> icon to apply.</p>
    </ol>
<pre class="language-markdown highlight">## Missions
The Kepler16b project delivers two missions: [<c- f>a Lander Mission</c->](<c- e>doc/example.com/tutorial2/description/missions/lander.html</c->) and an [<c- f>Orbiter Mission</c->](<c- e>doc/example.com/tutorial2/description/missions/orbiter.html</c->), each of which pursues a number of objectives. For details, check the [<c- f>full documentation</c->](<c- e>doc</c->).
</pre>
    <ol start="9">
     <li data-md>
      <p>Using the Source Control tab, commit <code>index.ipynb</code>. In the repository’s website, wait until the CI workflow succeeds, navigate to the Pages link and refresh the page.</p>
      <p><img src="assets/tutorial4/Second-Notebook-Publish.png" style="border:1px groove black;" width="100%"></p>
     <li data-md>
      <p>Click on the three hyperlinks and verify that you can navigate to them fine.</p>
    </ol>
    <h3 class="heading settled" data-level="4.8" id="tutorial4-visualize-missions"><span class="secno">4.8. </span><span class="content">P2: Visualize Missions</span><a class="self-link" href="#tutorial4-visualize-missions"></a></h3>
    <p>In this step, we will add the first visualization of SPARQL query results to the notebook. In this case, we will visualize data from the <code>build/results/missions.json</code> file, which holds the result of running the <code>missions.sparql</code> query, which matched missions and the objectives they pursue. We will use <a href="https://d3js.org/">d3.js</a> to code this visualization, but to make this easier to present here, we will copy and paste a python file called <code>utilities.py</code> (that has helpful utility functions) to the project.</p>
    <ol>
     <li data-md>
      <p>Navigate to the file <a href="https://github.com/opencaesar/kepler16b-example/blob/main/src/ipynb/utilities.py">utilities.py</a> and copy its contents.</p>
     <li data-md>
      <p>In VS Code Explorer, right click on the <code>ipynb</code> folder, select New File, name it <code>utilities.py</code>, and paste the contents to it. Save.</p>
      <p><img src="assets/tutorial4/Add-Utilities.png" style="border:1px groove black;" width="100%"></p>
     <li data-md>
      <p>In the <code>src/ipynb/index.ipynb</code> editor, add a new <em>Code</em> cell, and type the following code in it. Click on the execute button on the cell’s left side  to run.</p>
    </ol>
<pre class="language-python highlight"><c- kn>from</c-> <c- nn>utilities</c-> <c- kn>import</c-> <c- o>*</c->
<c- n>df</c-> <c- o>=</c-> <c- n>dataframe</c-><c- p>(</c-><c- u>"missions.json"</c-><c- p>)</c->
<c- n>data</c-> <c- o>=</c-> <c- n>df</c-><c- o>.</c-><c- n>to_json</c-><c- p>(</c-><c- n>orient</c-> <c- o>=</c-> <c- u>"records"</c-><c- p>)</c->
<c- n>HTML</c-><c- p>(</c-><c- n>tree</c-><c- o>.</c-><c- n>safe_substitute</c-><c- p>(</c-><c- n>data</c-><c- o>=</c-><c- n>data</c-><c- p>))</c->
</pre>
    <p><img src="assets/tutorial4/Add-Missions-Viz.png" style="border:1px groove black;" width="100%"></p>
    <p class="note" role="note"><span class="marker">Note:</span> Click on the circles to collapse/expand them</p>
    <ol start="4">
     <li data-md>
      <p>Using the Source Control tab, commit <code>index.ipynb</code> and <code>utilities.py</code>. In the repository’s website, wait until the CI workflow succeeds, navigate to the Pages link and refresh the page.</p>
      <p><img src="assets/tutorial4/Third-Notebook-Publish.png" style="border:1px groove black;" width="100%"></p>
    </ol>
    <h3 class="heading settled" data-level="4.9" id="tutorial4-visualize-objectives"><span class="secno">4.9. </span><span class="content">P3: Visualize Objectives</span><a class="self-link" href="#tutorial4-visualize-objectives"></a></h3>
    <p>In this step, we will add a visualization for the data in the <code>build/results/objectives.json</code> file, which holds the result of running the <code>objectives.sparql</code> query, which matched the objective aggregation hierarchy. We will use the <a href="https://www.plantuml.com/">PlantUml</a> tool to code this visualization.</p>
    <ol>
     <li data-md>
      <p>In the <code>src/ipynb/index.ipynb</code> editor, add a new <em>Markdown</em> cell, and type the following text in it. Click the <code>✓</code> icon to apply.</p>
    </ol>
<pre class="language-markdown highlight">## Objectives
The Kepler16b missions' objectives aggregate other lower-level objectives as depicted by the following diagram:
</pre>
    <ol start="2">
     <li data-md>
      <p>In the <code>src/ipynb/index.ipynb</code> editor, add a new <em>Code</em> cell, and type the following code in it. Click on the execute button on the cell’s left side  to run.</p>
    </ol>
<pre class="language-python highlight"><c- kn>from</c-> <c- nn>utilities</c-> <c- kn>import</c-> <c- o>*</c->
<c- n>df</c-> <c- o>=</c-> <c- n>dataframe</c-><c- p>(</c-><c- u>"objectives.json"</c-><c- p>)</c->
<c- n>objectives1</c-> <c- o>=</c-> <c- n>todict</c-><c- p>(</c-><c- n>df</c-><c- p>,</c-> <c- t>'o1_id'</c-><c- p>,</c-> <c- t>'o1_name'</c-><c- p>)</c->
<c- n>objectives2</c-> <c- o>=</c-> <c- n>todict</c-><c- p>(</c-><c- n>df</c-><c- p>,</c-> <c- t>'o2_id'</c-><c- p>,</c-> <c- t>'o2_name'</c-><c- p>)</c->
<c- n>aggregations</c-> <c- o>=</c-> <c- n>tolists</c-><c- p>(</c-><c- n>df</c-><c- p>,</c-> <c- t>'o1_id'</c-><c- p>,</c-> <c- t>'o2_id'</c-><c- p>)</c->
<c- n>diagram</c-><c- p>(</c-><c- n>objects</c-><c- p>(</c-><c- n>union</c-><c- p>(</c-><c- n>objectives1</c-><c- p>,</c-> <c- n>objectives2</c-><c- p>),</c-> <c- n>aggregations</c-><c- p>,</c-> <c- t>'o--'</c-><c- p>,</c-> <c- t>'objective'</c-><c- p>))</c->
</pre>
    <p><img src="assets/tutorial4/Add-Objectives-Viz.png" style="border:1px groove black;" width="100%"></p>
    <ol start="3">
     <li data-md>
      <p>Using the Source Control tab, commit <code>index.ipynb</code>. In the repository’s website, wait until the CI workflow succeeds, navigate to the Pages link and refresh the page.</p>
      <p><img src="assets/tutorial4/Fourth-Notebook-Publish.png" style="border:1px groove black;" width="100%"></p>
    </ol>
    <h3 class="heading settled" data-level="4.10" id="tutorial4-visualize-components"><span class="secno">4.10. </span><span class="content">P4: Visualize Components</span><a class="self-link" href="#tutorial4-visualize-components"></a></h3>
    <p>In this step, we will add a visualization for the data in the <code>build/results/components.json</code> file, which holds the result of running the <code>components.sparql</code> query, which matched the component physical decomposition hierarchy. We will use the <a href="https://www.plantuml.com/">PlantUml</a> tool to code this visualization.</p>
    <ol>
     <li data-md>
      <p>In the <code>src/ipynb/index.ipynb</code> editor, add a new <em>Markdown</em> cell, and type the following text in it. Click the <code>✓</code> icon to apply.</p>
    </ol>
<pre class="language-markdown highlight">## Components
The Kelper16 missions' components are organized in a physical decomposition hierarchy as shown below.
</pre>
    <ol start="2">
     <li data-md>
      <p>In the <code>src/ipynb/index.ipynb</code> editor, add a new <em>Code</em> cell, and type the following code in it. Click on the execute button on the cell’s left side  to run.</p>
    </ol>
<pre class="language-python highlight"><c- kn>from</c-> <c- nn>utilities</c-> <c- kn>import</c-> <c- o>*</c->
<c- n>df</c-> <c- o>=</c-> <c- n>dataframe</c-><c- p>(</c-><c- u>"components.json"</c-><c- p>)</c->
<c- n>components1</c-> <c- o>=</c-> <c- n>todict</c-><c- p>(</c-><c- n>df</c-><c- p>,</c-> <c- t>'c1_id'</c-><c- p>,</c-> <c- t>'c1_name'</c-><c- p>)</c->
<c- n>components2</c-> <c- o>=</c-> <c- n>todict</c-><c- p>(</c-><c- n>df</c-><c- p>,</c-> <c- t>'c2_id'</c-><c- p>,</c-> <c- t>'c2_name'</c-><c- p>)</c->
<c- n>compositions</c-> <c- o>=</c-> <c- n>tolists</c-><c- p>(</c-><c- n>df</c-><c- p>,</c-> <c- t>'c2_id'</c-><c- p>,</c-> <c- t>'c1_id'</c-><c- p>)</c->
<c- n>diagram</c-><c- p>(</c-><c- t>'left to right direction</c-><c- se>\n</c-><c- t>skinparam nodesep 10</c-><c- se>\n</c-><c- t>'</c-><c- o>+</c-><c- n>objects</c-><c- p>(</c-><c- n>union</c-><c- p>(</c-><c- n>components1</c-><c- p>,</c-> <c- n>components2</c-><c- p>),</c-> <c- n>compositions</c-><c- p>,</c-> <c- t>'*--'</c-><c- p>,</c-> <c- t>'component'</c-><c- p>))</c->
</pre>
    <p><img src="assets/tutorial4/Add-Components-Viz.png" style="border:1px groove black;" width="100%"></p>
    <ol start="3">
     <li data-md>
      <p>Using the Source Control tab, commit <code>index.ipynb</code>. In the repository’s website, wait until the CI workflow succeeds, navigate to the Pages link and refresh the page.</p>
      <p><img src="assets/tutorial4/Fifth-Notebook-Publish.png" style="border:1px groove black;" width="100%"></p>
    </ol>
    <h3 class="heading settled" data-level="4.11" id="tutorial4-visualize-mass-rollup"><span class="secno">4.11. </span><span class="content">P5: Visualize Mass Rollup</span><a class="self-link" href="#tutorial4-visualize-mass-rollup"></a></h3>
    <p>In this step, we will add another visualization for the data in the <code>build/results/components.json</code> file. This time, we will use the mass matched for each leaf component and roll them up the composition hierarchy. This means the masses of composed components are summed up and set as the mass of their composing component. The final mass of each component is then shown in a <a href="https://pandas.pydata.org/docs/index.html#">Pandas</a> table.</p>
    <ol>
     <li data-md>
      <p>In the <code>src/ipynb/index.ipynb</code> editor, add a new <em>Markdown</em> cell, and type the following text in it. Click the <code>✓</code> icon to apply.</p>
    </ol>
<pre class="language-markdown highlight">## Mass Rollup
The Kelper16 missions' components are characterized by their masses. Those masses are rolled up the physical decomposition hierarchy as shown below."
</pre>
    <ol start="2">
     <li data-md>
      <p>In the <code>src/ipynb/index.ipynb</code> editor, add a new <em>Code</em> cell, and type the following code in it. Click on the execute button on the cell’s left side  to run.</p>
    </ol>
<pre class="language-python highlight"><c- kn>from</c-> <c- nn>utilities</c-> <c- kn>import</c-> <c- o>*</c->
<c- n>df</c-> <c- o>=</c-> <c- n>dataframe</c-><c- p>(</c-><c- u>"components.json"</c-><c- p>)</c->
<c- n>components</c-> <c- o>=</c-> <c- n>tolist</c-><c- p>(</c-><c- n>df</c-><c- p>,</c-> <c- t>'c1_id'</c-><c- p>)</c->
<c- n>compositions</c-> <c- o>=</c-> <c- n>tolists</c-><c- p>(</c-><c- n>df</c-><c- p>,</c-> <c- t>'c2_id'</c-><c- p>,</c-> <c- t>'c1_id'</c-><c- p>)</c->
<c- n>masses</c-> <c- o>=</c-> <c- p>[</c->float<c- p>(</c-><c- n>x</c-><c- p>)</c-> <c- k>if</c-> <c- ow>not</c-> <c- n>pd</c-><c- o>.</c-><c- n>isna</c-><c- p>(</c-><c- n>x</c-><c- p>)</c-> <c- k>else</c-> <c- mi>0</c-> <c- k>for</c-> <c- n>x</c-> <c- ow>in</c-> <c- n>tolist</c-><c- p>(</c-><c- n>df</c-><c- p>,</c-> <c- t>'c1_mass'</c-><c- p>)]</c->
<c- n>graph</c-> <c- o>=</c-> <c- n>rollup</c-><c- p>(</c-><c- n>components</c-><c- p>,</c-> <c- n>compositions</c-><c- p>,</c-> <c- u>"mass"</c-><c- p>,</c-> <c- n>masses</c-><c- p>)</c->
<c- n>df</c-> <c- o>=</c-> <c- n>df</c-><c- p>[[</c-><c- t>'c1_id'</c-><c- p>,</c-> <c- t>'c1_name'</c-><c- p>,</c-> <c- t>'c1_mass'</c-><c- p>]]</c->
<c- n>df</c-><c- o>.</c-><c- n>loc</c-><c- p>[:,</c-> <c- t>'c1_mass'</c-><c- p>]</c-> <c- o>=</c-> <c- n>graph</c-><c- o>.</c-><c- n>vs</c-><c- p>[</c-><c- u>"mass"</c-><c- p>]</c->
<c- n>df</c-> <c- o>=</c-> <c- n>df</c-><c- o>.</c-><c- n>rename</c-><c- p>(</c-><c- n>columns</c-><c- o>=</c-><c- p>{</c-><c- u>"c1_id"</c-><c- p>:</c-> <c- u>"Id"</c-><c- p>,</c-> <c- u>"c1_name"</c-><c- p>:</c-> <c- u>"Name"</c-><c- p>,</c-> <c- u>"c1_mass"</c-><c- p>:</c-> <c- u>"Mass"</c-><c- p>})</c->
<c- n>style</c-> <c- o>=</c-> <c- n>df</c-><c- o>.</c-><c- n>style</c-><c- o>.</c-><c- n>hide</c-><c- p>(</c-><c- n>axis</c-><c- o>=</c-><c- u>"index"</c-><c- p>)</c-><c- o>.</c-><c- n>set_properties</c-><c- p>(</c-><c- o>**</c-><c- p>{</c-><c- t>'text-align'</c-><c- p>:</c-> <c- t>'left'</c-><c- p>,</c-> <c- t>'font-size'</c-><c- p>:</c-> <c- t>'12pt'</c-><c- p>,})</c->
<c- n>style</c-><c- o>.</c-><c- n>format</c-><c- p>(</c-><c- n>precision</c-><c- o>=</c-><c- mi>2</c-><c- p>)</c-><c- o>.</c-><c- n>set_table_styles</c-><c- p>([</c->dict<c- p>(</c-><c- n>selector</c-><c- o>=</c-><c- t>'th'</c-><c- p>,</c-> <c- n>props</c-><c- o>=</c-><c- p>[(</c-><c- t>'text-align'</c-><c- p>,</c-> <c- t>'left'</c-><c- p>)])])</c->
</pre>
    <p><img src="assets/tutorial4/Add-Mass-Rollup-Viz.png" style="border:1px groove black;" width="100%"></p>
    <ol start="3">
     <li data-md>
      <p>Using the Source Control tab, commit <code>index.ipynb</code>. In the repository’s website, wait until the CI workflow succeeds, navigate to the Pages link and refresh the page.</p>
      <p><img src="assets/tutorial4/Sixth-Notebook-Publish.png" style="border:1px groove black;" width="100%"></p>
    </ol>
    <h3 class="heading settled" data-level="4.12" id="tutorial4-change-the-model"><span class="secno">4.12. </span><span class="content">Change the Model</span><a class="self-link" href="#tutorial4-change-the-model"></a></h3>
    <p>Now that we have developed an interesting notebook as a report to share with stakeholders, we can now change the OML model and see the notebook getting updated automatically.</p>
    <ol>
     <li data-md>
      <p>In VS Code Exploer, edit the file <code>src/oml/example.com/tutorial2/description/missions.oml</code> by adding a new objective to the <code>lander</code> mission. Save.</p>
      <p><img src="assets/tutorial4/Make-Change-1.png" style="border:1px groove black;" width="100%"></p>
     <li data-md>
      <p>Using the Source Control tab, commit <code>mission.oml</code>. In the repository’s website, wait until the CI workflow succeeds, navigate to the Pages link and refresh the page.</p>
      <p><img src="assets/tutorial4/View-Change-1.png" style="border:1px groove black;" width="100%"></p>
     <li data-md>
      <p>In VS Code Exploer, edit the file <code>src/oml/example.com/tutorial2/description/masses.oml</code> by changing the mass of <code>components:orbiter-propulsion-subsystem</code> from 6 to 106.</p>
      <p><img src="assets/tutorial4/Make-Change-2.png" style="border:1px groove black;" width="100%"></p>
     <li data-md>
      <p>Using the Source Control tab, commit <code>mission.oml</code>. In the repository’s website, wait until the CI workflow succeeds, navigate to the Pages link and refresh the page. Notice the new mass for <code>C.02.09</code> and changed mass of the composing component <code>C.02</code> now 100 higher than before.</p>
      <p><img src="assets/tutorial4/View-Change-2.png" style="border:1px groove black;" width="100%"></p>
     <li data-md>
      <p>In VS Code Explorer, revert the changes you made to the two OML files above. Using the Source Control tab, commit <code>mission.oml</code> and <code>masses.oml</code>. In the repository’s website, wait until the CI workflow succeeds, navigate to the Pages link and refresh the page. Verify that the page returns to the original contents before the changes.</p>
    </ol>
    <h3 class="heading settled" data-level="4.13" id="tutorial4-summary"><span class="secno">4.13. </span><span class="content">Summary</span><a class="self-link" href="#tutorial4-summary"></a></h3>
    <p>This tutorial serves as a comprehensive guide, outlining the step-by-step process of utilizing Jupyter Notebook and GitHub Pages to visualize the results derived from querying OML datasets. Through clear and concise instructions, learners will gain practical insights into the seamless integration of these tools for efficient data exploration, analysis, and collaborative review. By employing automation techniques, the tutorial demonstrates how the generated notebook content and OML documentation can be effortlessly deployed onto GitHub Pages, facilitating real-time impact assessment, and fostering a collaborative environment for informed decision-making. This tutorial proves particularly valuable for professionals seeking enhanced methods of data visualization and streamlined peer review processes within the context of OML datasets.</p>
    <h2 class="heading settled" data-level="5" id="tutorial5"><span class="secno">5. </span><span class="content">Tutorial 5: OML Sirius</span><a class="self-link" href="#tutorial5"></a></h2>
    <p class="note" role="note"><span class="marker">Note:</span> This tutorial builds on the skills learned in <a href="#tutorial1">Tutorial 1</a>. Please do that first before proceeding.</p>
    <h3 class="heading settled" data-level="5.1" id="tutorial5-learning-objectives"><span class="secno">5.1. </span><span class="content">Learning Objectives</span><a class="self-link" href="#tutorial5-learning-objectives"></a></h3>
    <p>Welcome to this enlightening tutorial where we will explore the versatile capabilities of the <a href="https://eclipse.dev/sirius/">Sirius</a> framework and how it simplifies the process of authoring OML models within the <a href="https://github.com/opencaesar/oml-rosetta">Rosetta</a> workbench. Throughout this tutorial, we will embark on a journey to create an OML project, where we harness the power of built-in Sirius-based editors and viewers to not only author but also visually depict OML models. But that’s not all—our expedition continues as we venture into the creation of a Sirius viewpoint project, where we will craft user-friendly, domain-specific editors tailored for the seamless authoring of description models. This approach is a game-changer, significantly reducing the learning curve for OML users who may find working with a graphical user interface more intuitive than a traditional textual editor. Finally, we will get another glimpse of the powerful analysis capabilities of OML.</p>
    <p>Upon completing this tutorial, you will gain the following essential skills:</p>
    <ul>
     <li data-md>
      <p>Proficiency in utilizing the built-in OML diagram editors as a compelling alternative to the conventional OML text editor for authoring and visualizing OML models.</p>
     <li data-md>
      <p>The ability to craft tailor-made editors and viewers that cater to specific domains, ensuring an exceptionally user-friendly experience when authoring OML description models.</p>
     <li data-md>
      <p>Empowerment to conduct analyses seamlessly within the authoring views and as part of comprehensive analysis scripts.</p>
    </ul>
    <p>Prepare to embark on a transformative journey, as this tutorial equips you with the tools and knowledge to harness the full potential of OML with the assistance of the <a href="https://eclipse.dev/sirius/">Sirius</a> framework. By the end, you’ll be well-equipped to navigate the world of OML modeling and analysis with confidence and finesse. Let’s get started!</p>
    <p class="note" role="note"><span class="marker">Note:</span> The source files created in this tutorial are available for reference in this <a href="https://github.com/opencaesar/basicfamily-example">repository</a>, but we encourage the reader to recreate them by following the instructions below.</p>
    <h3 class="heading settled" data-level="5.2" id="tutorial5-create-oml-model-project"><span class="secno">5.2. </span><span class="content">Create OML Model Project</span><a class="self-link" href="#tutorial5-create-oml-model-project"></a></h3>
    <p>In this step, we will create a new OML project called <code>basicfamily-model</code> in the Rosetta workbench. This process should already be familiar from <a href="#tutorial1-create-oml-project">Tutorial 1</a>.</p>
    <ol>
     <li data-md>
      <p>Right click in the <a data-link-type="dfn" href="#model-explorer-view" id="ref-for-model-explorer-view②⑤">Model Explorer view</a> and select New -> OML Project.</p>
     <li data-md>
      <p>Enter the project name as <code>basicfamily-model</code>. Press Next.</p>
     <li data-md>
      <p>Enter the project details as shown below. Press Finish.</p>
      <p><img src="assets/tutorial5/Create-OML-Project.png" style="border:1px groove black;" width="75%"></p>
     <li data-md>
      <p>The <code>basicfamily-model</code> project should now be visible in the <a data-link-type="dfn" href="#model-explorer-view" id="ref-for-model-explorer-view②⑥">Model Explorer view</a>.</p>
     <li data-md>
      <p>Expand the <code>basicfamily-model</code> project node in the <a data-link-type="dfn" href="#model-explorer-view" id="ref-for-model-explorer-view②⑦">Model Explorer view</a> as shown in the image below.</p>
      <p><img src="assets/tutorial5/Expanded-Project.png" style="border:1px groove black;" width="50%"></p>
    </ol>
    <h3 class="heading settled" data-level="5.3" id="tutorial5-create-oml-vocabulary"><span class="secno">5.3. </span><span class="content">Create OML Vocabulary</span><a class="self-link" href="#tutorial5-create-oml-vocabulary"></a></h3>
    <p>In the step, we will create a vocabulary called <code>basicfamily</code>, which is the OML equivalent of an <a href="https://wiki.eclipse.org/Sirius/Tutorials/DomainModelTutorial">Ecore metamodel</a> that is published as an example with the Sirius framework. Unlike in previous tutorials, we will use the built-in Sirius-based OML vocabulary diagram editor.</p>
    <ol>
     <li data-md>
      <p>Right click on the <code>src/oml/example.com</code> subfolder in the <a data-link-type="dfn" href="#model-explorer-view" id="ref-for-model-explorer-view②⑧">Model Explorer view</a> and select New -> OML Model.</p>
     <li data-md>
      <p>Enter the details of the <code>basicfamily</code> vocabulary as shown below. Press Finish.</p>
      <p><img src="assets/tutorial5/Create-BasicFamily-Vocabulary.png" style="border:1px groove black;" width="100%"></p>
     <li data-md>
      <p>The <code>basicfamily</code> vocabulary will be created and its OML editor opens.</p>
      <p><img src="assets/tutorial5/BasicFamily-Vocabulary-Opens.png" style="border:1px groove black;" width="100%"></p>
    </ol>
    <blockquote>
     <p>Before we can use any Sirius-based viewpoints, we need to convert the project to what Sirius calls a <code>Modeling Project</code>.</p>
    </blockquote>
    <ol start="4">
     <li data-md>
      <p>Right-click on the <code>basicfamily-model</code> project in the <a data-link-type="dfn" href="#model-explorer-view" id="ref-for-model-explorer-view②⑨">Model Explorer view</a> and select "Configure -> Convert to Modeling Project".</p>
      <p><img src="assets/tutorial5/Convert-To-Modeling-Project.png" style="border:1px groove black;" width="75%"></p>
    </ol>
    <blockquote>
     <p>Before we can use the built-in Vocabulary viewpoint, which provides the vocabulary diagram editor, we need to enable the viewpoint on the project.</p>
    </blockquote>
    <ol start="5">
     <li data-md>
      <p>Right-click on the on the <code>basicfamily-model</code> project in the <a data-link-type="dfn" href="#model-explorer-view" id="ref-for-model-explorer-view③⓪">Model Explorer view</a> and select "Viewpoints Selection".</p>
      <p><img src="assets/tutorial5/Viewpoints-Selection.png" style="border:1px groove black;" width="75%"></p>
     <li data-md>
      <p>Check the "Vocabularies" box and click OK. This activates the ability to create vocabulary diagrams in the project.</p>
      <p><img src="assets/tutorial5/Select-Vocabularies-Viewpoint.png" style="border:1px groove black;" width="75%"></p>
    </ol>
    <blockquote>
     <p>Now, we are ready to create a vocabulary diagram for <code>basicfamily</code> vocabulary to use it as an alternative editor to the OML text editor.</p>
    </blockquote>
    <ol start="7">
     <li data-md>
      <p>Navigate to the <code>basicfamily.oml</code> file in the <a data-link-type="dfn" href="#model-explorer-view" id="ref-for-model-explorer-view③①">Model Explorer view</a> and expand it to show the root vocabulary element. Right-click on the element and select "New Representation -> Basicfamily Editor".</p>
      <p><img src="assets/tutorial5/Create-Basicfamily-Diagram.png" style="border:1px groove black;" width="100%"></p>
     <li data-md>
      <p>The New Vocabulary Editor dialog opens up to allow you to customize the diagram name. In this case, we will keep the default name and click OK.</p>
      <p><img src="assets/tutorial5/Initial-Vocabulary-Diagram.png" style="border:1px groove black;" width="100%"></p>
     <li data-md>
      <p>In order to observe how the graphical syntax is synchronized with the textual syntax, drag the diagram editor using its title bar and dock it to the right of the text editor.</p>
    </ol>
    <video controls style="border:1px groove black;" width="100%">
     <source src="assets/tutorial5/Dock-Vocabulary-Diagram.mov">
    </video>
    <ol start="10">
     <li data-md>
      <p>We will now use the Vocabulary diagram editor to author the vocabulary. Follow the steps in the video below and save the editor regularly to see the corresponding textual syntax.</p>
    </ol>
    <video controls style="border:1px groove black;" width="100%">
     <source src="assets/tutorial5/Create-Basicfamily-Vocabulary.mov">
    </video>
    <ol start="11">
     <li data-md>
      <p>If you have done the visual authoring all correct, you should end up with the following OML text in <code>basicfamily.oml</code>.</p>
    </ol>
    <p class="note" role="note"><span class="marker">Note:</span> that the order of the statements below may be slightly different for you if you created the diagram elements in different order from the video.</p>
<pre class="language-scala highlight"><c- n>vocabulary</c-> <c- o>&lt;</c-><c- n>http</c-><c- p>:</c-><c- c1>//example.com/vocabulary/basicfamily#> as basicfamily {</c->

  <c- k>extends</c-> <c- o>&lt;</c-><c- n>http</c-><c- p>:</c-><c- c1>//www.w3.org/2001/XMLSchema#> as xsd</c->

  <c- n>aspect</c-> <c- nc>Named</c->

  <c- n>scalar</c-> <c- n>property</c-> <c- n>name</c-> <c- p>[</c->
    <c- n>domain</c-> <c- nc>Named</c->
    <c- n>range</c-> <c- n>xsd</c-><c- p>:</c-><c- n>string</c->
    <c- n>functional</c->
  <c- p>]</c->

  <c- n>concept</c-> <c- nc>Family</c-> <c- o>&lt;</c-> <c- nc>Named</c->

  <c- n>concept</c-> <c- nc>Person</c-> <c- o>&lt;</c-> <c- nc>Named</c-> <c- p>[</c->
    <c- n>restricts</c-> <c- n>parents</c-> <c- n>to</c-> <c- n>max</c-> <c- mi>2</c->
  <c- p>]</c->

  <c- n>relation</c-> <c- n>members</c-> <c- p>[</c->
    <c- n>from</c-> <c- nc>Family</c->
    <c- n>to</c-> <c- nc>Person</c->
  <c- p>]</c->

  <c- n>concept</c-> <c- nc>Man</c-> <c- o>&lt;</c-> <c- nc>Person</c->

  <c- n>concept</c-> <c- nc>Woman</c-> <c- o>&lt;</c-> <c- nc>Person</c->

  <c- n>relation</c-> <c- n>parents</c-> <c- p>[</c->
    <c- n>from</c-> <c- nc>Person</c->
    <c- n>to</c-> <c- nc>Person</c->
    <c- n>reverse</c-> <c- n>children</c->
  <c- p>]</c->

  <c- n>relation</c-> <c- n>mother</c-> <c- p>[</c->
    <c- n>from</c-> <c- nc>Person</c->
    <c- n>to</c-> <c- nc>Woman</c->
    <c- n>functional</c->
  <c- p>]</c->

  <c- n>relation</c-> <c- n>father</c-> <c- p>[</c->
    <c- n>from</c-> <c- nc>Person</c->
    <c- n>to</c-> <c- nc>Man</c->
    <c- n>functional</c->
  <c- p>]</c->
<c- p>}</c->
</pre>
    <blockquote>
     <p>Notice that the vocabulary diagram editor does not yet have feature parity with the textual editor in terms of its ability to author the full OML syntax. However, we intend to make incremental progress towards this goal with every release (if you want us to prioritize this, let us know). On the other hand, the editor’s visualization capabilities are more complete. Since the textual and diagram editors are always in sync, a modeler could easily switch back and forth between them to edit the vocabulary.</p>
    </blockquote>
    <ol start="12">
     <li data-md>
      <p>In the OML textual editor for <code>basicfamily.oml</code>, add specialization from relations <code>mother</code> and <code>father</code> to relation <code>parents</code>.</p>
    </ol>
<pre class="language-scala highlight"><c- n>relation</c-> <c- n>mother</c-> <c- p>[</c->
  <c- n>from</c-> <c- nc>Person</c->
  <c- n>to</c-> <c- nc>Woman</c->
  <c- n>functional</c->
<c- p>]</c-> <c- o>&lt;</c-> <c- n>parents</c->

<c- n>relation</c-> <c- n>father</c-> <c- p>[</c->
  <c- n>from</c-> <c- nc>Person</c->
  <c- n>to</c-> <c- nc>Man</c->
  <c- n>functional</c->
<c- p>]</c-> <c- o>&lt;</c-> <c- n>parents</c->
</pre>
    <blockquote>
     <p>Finally, we want to create an OML vocabulary bundle that includes the <code>basicfamily</code> vocabulary.</p>
    </blockquote>
    <ol start="13">
     <li data-md>
      <p>The <code>basicfamily</code> vocabulary diagram now looks like this (notice the <code>{subsets parents}</code> on relation <code>mother</code> and <code>father</code>).</p>
      <p><img src="assets/tutorial5/Basicfamily-Diagram-1.png" style="border:1px groove black;" width="75%"></p>
     <li data-md>
      <p>Right-click on the <code>src/oml/example.com/vocabulary</code> folder in <a data-link-type="dfn" href="#model-explorer-view" id="ref-for-model-explorer-view③②">Model Explorer view</a> and select New -> OML Model. Fill in the diagram like in the picture. Click Finish.</p>
      <p><img src="assets/tutorial5/Create-Vocabulary-Bundle.png" style="border:1px groove black;" width="75%"></p>
     <li data-md>
      <p>In the open editor for <code>bundle.oml</code>, add an include statement for <code>basicfamily</code> like this:</p>
    </ol>
<pre class="language-scala highlight"><c- n>vocabulary</c-> <c- n>bundle</c-> <c- o>&lt;</c-><c- n>http</c-><c- p>:</c-><c- c1>//example.com/vocabulary/bundle#> as ^bundle {</c->
	
  <c- n>includes</c-> <c- o>&lt;</c-><c- n>http</c-><c- p>:</c-><c- c1>//example.com/vocabulary/basicfamily#></c->
<c- p>}</c->
</pre>
    <p class="note" role="note"><span class="marker">Note:</span> Recall that a vocabulary bundle automatically asserts disjointness between included concepts with no common subtypes.</p>
    <h3 class="heading settled" data-level="5.4" id="tutorial5-create-oml-description"><span class="secno">5.4. </span><span class="content">Create OML Description</span><a class="self-link" href="#tutorial5-create-oml-description"></a></h3>
    <p>In this step, we will create an OML description model using the OML textual editor, then visualize it with the built-on OML description diagram.</p>
    <blockquote>
     <p>Compared with the built-in vocabulary diagram which has authoring capabilities, th built-in OML description diagram only has visualization abilities (so far).</p>
    </blockquote>
    <ol>
     <li data-md>
      <p>Right click on the <code>src/oml/example.com/description</code> subfolder in the <a data-link-type="dfn" href="#model-explorer-view" id="ref-for-model-explorer-view③③">Model Explorer view</a> and select New -> OML Model.</p>
     <li data-md>
      <p>Enter the details of the <code>family1</code> description as shown below. Press Finish.</p>
      <p><img src="assets/tutorial5/Create-Family1-Description.png" style="border:1px groove black;" width="100%"></p>
     <li data-md>
      <p>The <code>family1</code> description will be created and its OML editor opens.</p>
      <p><img src="assets/tutorial5/Family1-Description-Opens.png" style="border:1px groove black;" width="100%"></p>
    </ol>
    <blockquote>
     <p>We will now use the text editor to create an OML description model defining <code>family1</code>, its men and women members, and their interrelationships.</p>
    </blockquote>
    <ol start="4">
     <li data-md>
      <p>Copy the following OML text and paste it as the new content of the open editor.</p>
    </ol>
<pre class="language-scala highlight"><c- n>description</c-> <c- o>&lt;</c-><c- n>http</c-><c- p>:</c-><c- c1>//example.com/description/family1#> as family1 {</c->

  <c- n>uses</c-> <c- o>&lt;</c-><c- n>http</c-><c- p>:</c-><c- c1>//example.com/vocabulary/basicfamily#> as basicfamily</c->

  <c- n>instance</c-> <c- n>family1</c-> <c- p>:</c-> <c- n>basicfamily</c-><c- p>:</c-><c- nc>Family</c-> <c- p>[</c->
    <c- n>basicfamily</c-><c- p>:</c-><c- n>members</c-> <c- nc>Paul</c->
    <c- n>basicfamily</c-><c- p>:</c-><c- n>members</c-> <c- nc>Isa</c->
    <c- n>basicfamily</c-><c- p>:</c-><c- n>members</c-> <c- nc>Elias</c->
    <c- n>basicfamily</c-><c- p>:</c-><c- n>members</c-> <c- nc>Lea</c->
    <c- n>basicfamily</c-><c- p>:</c-><c- n>members</c-> <c- nc>Dave</c->
    <c- n>basicfamily</c-><c- p>:</c-><c- n>members</c-> <c- nc>Alain</c->
    <c- n>basicfamily</c-><c- p>:</c-><c- n>members</c-> <c- nc>Bryan</c->
    <c- n>basicfamily</c-><c- p>:</c-><c- n>members</c-> <c- nc>Fiona</c->
    <c- n>basicfamily</c-><c- p>:</c-><c- n>members</c-> <c- nc>Katell</c->
    <c- n>basicfamily</c-><c- p>:</c-><c- n>members</c-> <c- nc>Clara</c->
    <c- n>basicfamily</c-><c- p>:</c-><c- n>members</c-> <c- nc>Albert</c->
    <c- n>basicfamily</c-><c- p>:</c-><c- n>members</c-> <c- nc>Jane</c->
    <c- n>basicfamily</c-><c- p>:</c-><c- n>members</c-> <c- nc>Peter</c->
  <c- p>]</c->

  <c- n>instance</c-> <c- nc>Paul</c-> <c- p>:</c-> <c- n>basicfamily</c-><c- p>:</c-><c- nc>Man</c->

  <c- n>instance</c-> <c- nc>Isa</c-> <c- p>:</c-> <c- n>basicfamily</c-><c- p>:</c-><c- nc>Woman</c->

  <c- n>instance</c-> <c- nc>Elias</c-> <c- p>:</c-> <c- n>basicfamily</c-><c- p>:</c-><c- nc>Man</c-> <c- p>[</c->
    <c- n>basicfamily</c-><c- p>:</c-><c- n>father</c-> <c- nc>Paul</c->
    <c- n>basicfamily</c-><c- p>:</c-><c- n>mother</c-> <c- nc>Isa</c->
  <c- p>]</c->

  <c- n>instance</c-> <c- nc>Lea</c-> <c- p>:</c-> <c- n>basicfamily</c-><c- p>:</c-><c- nc>Woman</c-> <c- p>[</c->
    <c- n>basicfamily</c-><c- p>:</c-><c- n>father</c-> <c- nc>Paul</c->
    <c- n>basicfamily</c-><c- p>:</c-><c- n>mother</c-> <c- nc>Isa</c->
  <c- p>]</c->

  <c- n>instance</c-> <c- nc>Dave</c-> <c- p>:</c-> <c- n>basicfamily</c-><c- p>:</c-><c- nc>Man</c-> <c- p>[</c->
    <c- n>basicfamily</c-><c- p>:</c-><c- n>father</c-> <c- nc>Elias</c->
  <c- p>]</c->

  <c- n>instance</c-> <c- nc>Alain</c-> <c- p>:</c-> <c- n>basicfamily</c-><c- p>:</c-><c- nc>Man</c-> <c- p>[</c->
    <c- n>basicfamily</c-><c- p>:</c-><c- n>father</c-> <c- nc>Dave</c->
    <c- n>basicfamily</c-><c- p>:</c-><c- n>mother</c-> <c- nc>Katell</c->
  <c- p>]</c->

  <c- n>instance</c-> <c- nc>Bryan</c-> <c- p>:</c-> <c- n>basicfamily</c-><c- p>:</c-><c- nc>Man</c-> <c- p>[</c->
    <c- n>basicfamily</c-><c- p>:</c-><c- n>father</c-> <c- nc>Elias</c->
  <c- p>]</c->

  <c- n>instance</c-> <c- nc>Fiona</c-> <c- p>:</c-> <c- n>basicfamily</c-><c- p>:</c-><c- nc>Woman</c-> <c- p>[</c->
    <c- n>basicfamily</c-><c- p>:</c-><c- n>father</c-> <c- nc>Elias</c->
  <c- p>]</c->

  <c- n>instance</c-> <c- nc>Katell</c-> <c- p>:</c-> <c- n>basicfamily</c-><c- p>:</c-><c- nc>Woman</c->

  <c- n>instance</c-> <c- nc>Clara</c-> <c- p>:</c-> <c- n>basicfamily</c-><c- p>:</c-><c- nc>Woman</c-> <c- p>[</c->
    <c- n>basicfamily</c-><c- p>:</c-><c- n>father</c-> <c- nc>Elias</c->
  <c- p>]</c->

  <c- n>instance</c-> <c- nc>Albert</c-> <c- p>:</c-> <c- n>basicfamily</c-><c- p>:</c-><c- nc>Man</c->

  <c- n>instance</c-> <c- nc>Jane</c-> <c- p>:</c-> <c- n>basicfamily</c-><c- p>:</c-><c- nc>Woman</c-> <c- p>[</c->
    <c- n>basicfamily</c-><c- p>:</c-><c- n>mother</c-> <c- nc>Fiona</c->
  <c- p>]</c->

  <c- n>instance</c-> <c- nc>Peter</c-> <c- p>:</c-> <c- n>basicfamily</c-><c- p>:</c-><c- nc>Man</c-> <c- p>[</c->
    <c- n>basicfamily</c-><c- p>:</c-><c- n>mother</c-> <c- nc>Clara</c->
  <c- p>]</c->
<c- p>}</c->
</pre>
    <blockquote>
     <p>We will now visualize the <code>family1.oml</code> model using the built-in Sirius-based description diagram.</p>
    </blockquote>
    <ol start="5">
     <li data-md>
      <p>Right-click on the <code>basicfamily-model</code> project in the <a data-link-type="dfn" href="#model-explorer-view" id="ref-for-model-explorer-view③④">Model Explorer view</a> and select "Viewpoints Selection". In the dialog, check the "Descriptions" box and click OK.</p>
      <p><img src="assets/tutorial5/Select-Description-Viewpoint.png" style="border:1px groove black;" width="100%"></p>
    </ol>
    <blockquote>
     <p>Now, we are ready to create a description diagram for <code>family1.oml</code>.</p>
    </blockquote>
    <ol start="6">
     <li data-md>
      <p>Navigate to <code>family1.oml</code> in the <a data-link-type="dfn" href="#model-explorer-view" id="ref-for-model-explorer-view③⑤">Model Explorer view</a> and expand it to reveal the root description. Right-click on the description and select "New Representation -> Family1 Viewer". In the opened dialog, leave the default name and click OK.</p>
      <p><img src="assets/tutorial5/Create-Family1-Diagram1.png" style="border:1px groove black;" width="100%"></p>
    </ol>
    <blockquote>
     <p>The <code>Family1 Viewer</code> diagram opens with visualization of the model content. You will notice that the diagram is a bit busy since the <code>family1</code> instance, which is related to all family members using the <code>members</code> relation is visualized. Deleting this node from the diagram and rearranging the remaining nodes improves the layout.</p>
    </blockquote>
    <ol start="7">
     <li data-md>
      <p>Follow the few steps in the video below to improve the layout of the diagram.</p>
    </ol>
    <video controls style="border:1px groove black;" width="100%">
     <source src="assets/tutorial5/Create-Family1-Diagram1.mov">
    </video>
    <ol start="8">
     <li data-md>
      <p>The final diagram should look like this now.</p>
      <p><img src="assets/tutorial5/Final-Family1-Diagram1.png" style="border:1px groove black;" width="100%"></p>
    </ol>
    <blockquote>
     <p>Notice that although the diagram looks reasonable is still hard to read. Also, while you can make notational/stylistic changes to the diagram, you cannot use it to edit the description model. In the next section, we will develop a custom diagram to improve both aspects.</p>
    </blockquote>
    <blockquote>
     <p>Finally, we want to add the <code>family1</code> description to the description bundle and make the latter use the <code>basicfamily</code> vocabulary.</p>
    </blockquote>
    <ol start="9">
     <li data-md>
      <p>Navigate in <a data-link-type="dfn" href="#model-explorer-view" id="ref-for-model-explorer-view③⑥">Model Explorer view</a> to the <code>src/oml/example.com/description/bundle.oml</code> file and double click it to open its OML textual editor.</p>
     <li data-md>
      <p>In the open editor for <code>bundle.oml</code>, replace the contents with the following. Save the editor.</p>
    </ol>
<pre class="language-scala highlight"><c- n>description</c-> <c- n>bundle</c-> <c- o>&lt;</c-><c- n>http</c-><c- p>:</c-><c- c1>//example.com/description/bundle#> as ^bundle {</c->
	
  <c- n>uses</c-> <c- o>&lt;</c-><c- n>http</c-><c- p>:</c-><c- c1>//example.com/vocabulary/basicfamily#></c->
	
  <c- n>includes</c-> <c- o>&lt;</c-><c- n>http</c-><c- p>:</c-><c- c1>//example.com/description/family1#></c->
<c- p>}</c->
</pre>
    <p class="note" role="note"><span class="marker">Note:</span> Recall that a description bundle represents a closed dataset that we want to reason on.</p>
    <h3 class="heading settled" data-level="5.5" id="tutorial5-create-sirius-viewpoint-project"><span class="secno">5.5. </span><span class="content">Create Sirius Viewpoint Project</span><a class="self-link" href="#tutorial5-create-sirius-viewpoint-project"></a></h3>
    <p>In this step, we will use Sirius to develop a custom diagram for the <code>basicfamily</code> vocabulary that a) improves the notation/style, and b) allows for editing the description model. In order to do this in Sirius, we need to define what Sirius calls a Viewpoint Specification Project.</p>
    <ol>
     <li data-md>
      <p>In the <a data-link-type="dfn" href="#model-explorer-view" id="ref-for-model-explorer-view③⑦">Model Explorer view</a>, right click on an empty area and choose New -> Project -> Sirius -> Viewpoint Specification Project.</p>
     <li data-md>
      <p>Give the project the name <code>basicfamily-viewpoint</code> and click Next.</p>
     <li data-md>
      <p>In the Viewpoint Specification Model page, rename the model to simply <code>basicfamily.odesign</code> then click Finish.</p>
    </ol>
    <blockquote>
     <p>The project shows up in the <a data-link-type="dfn" href="#model-explorer-view" id="ref-for-model-explorer-view③⑧">Model Explorer view</a> and its editor opens up.</p>
    </blockquote>
    <ol start="4">
     <li data-md>
      <p>Drag and dock it to the right of the working area. Your screen should now look like this.</p>
      <p><img src="assets/tutorial5/Initial-Viewpoint-Editor.png" style="border:1px groove black;" width="100%"></p>
     <li data-md>
      <p>In the odesign editor, expand the tree to reveal a viewpoint node called <code>MyViewpoint</code>. Select it and then in the Property Sheet view, rename it to <code>persons</code>. Also set the "Model File Extension" field to <code>oml</code>.</p>
      <p><img src="assets/tutorial5/Rename-Persons-Viewpoint.png" style="border:1px groove black;" width="100%"></p>
     <li data-md>
      <p>Under the <code>persons</code> node, you see another node for a Java service. Select it and edit it its text to <code>defaultpackage.Services</code>.</p>
    </ol>
    <blockquote>
     <p>This step is only needed since we chose the name of the project to be <code>basicfamily-viewpoint</code>, which contains an invalid Java character <code>-</code>. Eclipse could not use that name for the root package and instead named it <code>defaultpackage</code>.</p>
    </blockquote>
    <p><img src="assets/tutorial5/Rename-Default-Services.png" style="border:1px groove black;" width="100%"></p>
    <ol start="7">
     <li data-md>
      <p>Double click the <code>defaultpackage.Services</code> node in the tree. It should open a Java editor for the Services class. This is how you know you have configured this correctly. Close the Java editor.</p>
    </ol>
    <blockquote>
     <p>We will add a few more Java services from the <a href="https://www.opencaesar.io/oml/javadoc/index.html">openCAESAR public API</a>.</p>
    </blockquote>
    <ol start="8">
     <li data-md>
      <p>Navigate in the <a data-link-type="dfn" href="#model-explorer-view" id="ref-for-model-explorer-view③⑨">Model Explorer view</a> to the file <code>basicfamily-viewpoint/META-INF/MANIFEST.MF</code> and double click on it. In the open editor, switch to the <code>Dependencies</code> tab. Click the Add button. In the Plug-in Selection dialog, search for <code>oml</code> and select the <code>io.opencaesar.oml</code> item and click Add.</p>
     <li data-md>
      <p>Click the Add button again in the <code>Dependencies</code> tab and in the dialog search for <code>rosetta</code> and select the <code>io.opencaesar.rosetta.sirius.viewpoint</code> item and click Add. Save the <code>MANIFEST.MF</code> editor and close it.</p>
    </ol>
    <p class="note" role="note"><span class="marker">Note:</span> The versions of the new dependencies you added will correspond to the version of Rosetta you installed (i.e., they do not have to match the picture).</p>
    <p><img src="assets/tutorial5/Add-Manifest-Dependencies.png" style="border:1px groove black;" width="100%"></p>
    <ol start="10">
     <li data-md>
      <p>Back in the odesign editor, right click on the <code>defaultpackage.Services</code> node and select Copy. Then, right click on the <code>persons</code> node, and select Paste. Repeat the paste a total of 4 times. Now, click on each of the pasted services and edit them in the Property Sheet view to the following class names. Save the editor after.</p>
    </ol>
    <ul>
     <li data-md>
      <p>io.opencaesar.oml.util.OmlRead</p>
     <li data-md>
      <p>io.opencaesar.oml.util.OmlSearch</p>
     <li data-md>
      <p>io.opencaesar.oml.util.OmlDelete</p>
     <li data-md>
      <p>io.opencaesar.rosetta.sirius.viewpoint.OmlServices</p>
      <p><img src="assets/tutorial5/Add-Java-Services.png" style="border:1px groove black;" width="100%"></p>
    </ul>
    <blockquote>
     <p>We need to copy some icons to the <code>basicfamily-viewpoint</code> project, so we use them in the definition of the viewpoint.</p>
    </blockquote>
    <ol start="11">
     <li data-md>
      <p>Download <a href="assets/tutorial5/icons.zip">icons.zip</a> and unzip it. Move the <code>icons</code> folder to the root of the <code>basicfamily-viewpoint</code> project.</p>
      <p><img src="assets/tutorial5/Copy-Icons.png" style="border:1px groove black;" width="75%"></p>
    </ol>
    <blockquote>
     <p>Finally, we need to activate the new <code>persons</code> viewpoint on the <code>basicfamily-model</code> project.</p>
    </blockquote>
    <ol start="12">
     <li data-md>
      <p>Right click on the <code>basicfamily-model</code> project in the <a data-link-type="dfn" href="#model-explorer-view" id="ref-for-model-explorer-view④⓪">Model Explorer view</a> and select Viewpoint Selection. Check the <code>persons</code> box in the dialog and click OK.</p>
      <p><img src="assets/tutorial5/Activate-Custom-Viewpoint.png" style="border:1px groove black;" width="100%"></p>
    </ol>
    <blockquote>
     <p>Now, all the editors we will define in the <code>persons</code> viewpoint can be used in the <code>basicfamily-model</code> project.</p>
    </blockquote>
    <h3 class="heading settled" data-level="5.6" id="tutorial5-create-diagram-editor"><span class="secno">5.6. </span><span class="content">Create Diagram Editor</span><a class="self-link" href="#tutorial5-create-diagram-editor"></a></h3>
    <p>In this step, we will define a custom diagram editor for OML description models that use the <code>basicfamily</code> OML vocabulary.</p>
    <ol>
     <li data-md>
      <p>In the <code>basicfamily.odesign</code> editor, right click on the <code>persons</code> viewpoint and select New Representation -> Diagram Description.</p>
      <p><img src="assets/tutorial5/Create-Diagram-Editor.png" style="border:1px groove black;" width="100%"></p>
     <li data-md>
      <p>Select the newly created diagram node in the editor then click on the Property Sheet view to edit its properties. Switch first on the <em>Metamodels</em> tab, click on <code>Add from registry</code> button (on the right), type <code>oml</code> in the edit box, and select the <code>http://opencaesar.io/oml</code> item and click OK.</p>
      <p><img src="assets/tutorial5/Add-Metamodel-to-Diagram.png" style="border:1px groove black;" width="100%"></p>
    </ol>
    <blockquote>
     <p>Now, we will specify that this diagram can be created for a <code>oml.ConceptInstance</code> that is typed by the <code>basicfamily:Family</code> concept from the vocabulary.</p>
    </blockquote>
    <ol start="3">
     <li data-md>
      <p>In the Property Sheet view, switch to the <em>General</em> tab and make the following modifications:</p>
<pre no-line-numbers style="background: rgba(0, 0, 0, .03)"><b>General</b>:
- <b>Id</b>: Persons diagram
- <b>Domain Class</b>: oml.ConceptInstance
- <b>Precondition Expression</b>: aql:self.findIsKindOf('basicfamily:Family')
</pre>
      <p><img src="assets/tutorial5/Add-Diagram-Details.png" style="border:1px groove black;" width="100%"></p>
    </ol>
    <blockquote>
     <p>We will now create two kinds of nodes within the diagram, one for a Man and one for a Woman (the two kind of Person from the vocabulary).</p>
    </blockquote>
    <ol start="4">
     <li data-md>
      <p>In the <code>basicfamily.odesign</code> editor, expand the <code>Persons diagram</code> node to reveal the <code>Default</code> node. Right click on that node and select New Diagram Element -> Node. In the Property Sheet, enter the following information for the node:</p>
<pre no-line-numbers style="background: rgba(0, 0, 0, .03)"><b>General</b>:
- <b>Id</b>: ManNode
- <b>Domain Class</b>: oml.ConceptInstance
- <b>Semantic Candidates Expression</b>: aql:self.findTargetInstances('basicfamily:members')
<b>Advanced</b>:
- <b>Precondition Expression</b>: aql:self.findIsKindOf('basicfamily:Man')
</pre>
     <li data-md>
      <p>In the <code>basicfamily.odesign</code> editor, right click on the <code>ManNode</code> node and select New Style -> Workspace Image. In the Property Sheet, change the following:</p>
<pre no-line-numbers style="background: rgba(0, 0, 0, .03)"><b>General</b>:
- <b>Image Path</b>: /basicfamily-viewpoint/icons/man.svg
<b>Label</b>:
- <b>Show Icon</b>: false
- <b>Label Position</b>: border
<b>Corner</b>:
- <b>Arc Height</b>: 1
- <b>Arc Width</b>: 1
<b>Advanced</b>:
- <b>Size Computation Expression</b>: 4
</pre>
     <li data-md>
      <p>In the <code>basicfamily.odesign</code> editor, right click on the <code>ManNode</code> node and select Copy. Select the <code>Default</code> node, right click and select Paste. In the Property Sheet, change the following information only:</p>
<pre no-line-numbers style="background: rgba(0, 0, 0, .03)"><b>General</b>:
- <b>Id</b>: WomanNode
<b>Advanced</b>
- <b>Precondition Expression</b>: aql:self.findIsKindOf('basicfamily:Woman')
</pre>
    </ol>
    <blockquote>
     <p>We will now create two kinds of edges within the diagram, one for the <code>basicfamily:father</code> relation and one for a <code>basicfamily:mother</code> relation (from the vocabulary).</p>
    </blockquote>
    <ol start="7">
     <li data-md>
      <p>In the <code>basicfamily.odesign</code> editor, right click on the <code>Default</code> node and select New Diagram Element -> Relation Based Edge. In the Property Sheet, change the following:</p>
<pre no-line-numbers style="background: rgba(0, 0, 0, .03)"><b>General</b>:
- <b>Id</b>: FatherEdge
- <b>Source Mapping</b>: ManNode, WomanNode
- <b>Target Mapping</b>: ManNode
- <b>Target Finder Expression</b>: aql:self.findTargetInstances('basicfamily:father')
</pre>
     <li data-md>
      <p>In the <code>basicfamily.odesign</code> editor, expand the <code>fatherEdge</code> node and select the nested Edge Style node. In the Property Sheet, change the following:</p>
<pre no-line-numbers style="background: rgba(0, 0, 0, .03)"><b>Color</b>:
- <b>Stroke Color</b>: blue
</pre>
     <li data-md>
      <p>In the <code>basicfamily.odesign</code> editor, right click on the <code>fatherEdge</code> node and select Copy. Select the <code>Default</code> node, right click and select Paste. In the Property Sheet, change the following information only:</p>
<pre no-line-numbers style="background: rgba(0, 0, 0, .03)"><b>General</b>:
- <b>Id</b>: MotherEdge
- <b>Target Mapping</b>: WomanNode
- <b>Target Finder Expression</b>: aql:self.findTargetInstances('basicfamily:mother')
</pre>
     <li data-md>
      <p>In the <code>basicfamily.odesign</code> editor, expand the <code>motherEdge</code> node and select the nested Edge Style node. In the Property Sheet, change the following:</p>
<pre no-line-numbers style="background: rgba(0, 0, 0, .03)"><b>Color</b>:
- <b>Stroke Color</b>: purple
</pre>
    </ol>
    <blockquote>
     <p>Save the <code>basicfamily.odesign</code> editor. Now, we will create an instance of this diagram editor in the description model.</p>
    </blockquote>
    <ol start="11">
     <li data-md>
      <p>In the <a data-link-type="dfn" href="#model-explorer-view" id="ref-for-model-explorer-view④①">Model Explorer view</a>, navigate to the file <code>basicfamily-model/src/oml/example.com/description/family1.oml</code>. Expand the file’s node to reveal the root <code>description</code> node. Right click the nested <code>family1</code> node and select New Representation -> new Persons diagram. Rename the diagram to <code>Persons diagram</code>. Click OK.</p>
      <p><img src="assets/tutorial5/Create-Family1-Diagram2.png" style="border:1px groove black;" width="100%"></p>
     <li data-md>
      <p>The new diagram editor opens. Drag it and dock it to the right editor stack. It should look like this:</p>
      <p><img src="assets/tutorial5/Initial-Family1-Diagram2.png" style="border:1px groove black;" width="100%"></p>
    </ol>
    <blockquote>
     <p>When compared to the built-in description diagram, the new custom diagram is much more concise and readable. So far, this is a viewer only, now we will turn it into an editor. We will start by adding tools to create Man and Woman nodes.</p>
    </blockquote>
    <ol start="13">
     <li data-md>
      <p>In the <code>basicfamily.odesign</code> editor, right click on the <code>Default</code> node and select New Tool -> Section. In the property sheet, change the following:</p>
<pre no-line-numbers style="background: rgba(0, 0, 0, .03)"><b>General</b>:
- <b>Id</b>: Tools
</pre>
     <li data-md>
      <p>Right click on the <code>Tools</code> node and select New Element Creation -> Node Creation. In the property sheet, change the following:</p>
<pre no-line-numbers style="background: rgba(0, 0, 0, .03)"><b>General</b>:
- <b>Id</b>: createMan
- <b>Label</b>: Man
- <b>Node Mapping</b>: ManNode
<b>Advanced</b>:
- <b>Icon Path</b>: /basicfamily-viewpoint/icons/man.gif
</pre>
     <li data-md>
      <p>Expand the <code>Node Creation Man</code> node and right click on the nested <code>container</code> node and select New Variable -> Expression Variable. In the property sheet, change the following:</p>
<pre no-line-numbers style="background: rgba(0, 0, 0, .03)"><b>General</b>:
- <b>Name</b>: context
- <b>Label</b>: aql:container.getDescription()
</pre>
     <li data-md>
      <p>Copy the <code>context</code> variable and paste it under the same <code>container</code> variable. In the property sheet, change the following:</p>
<pre no-line-numbers style="background: rgba(0, 0, 0, .03)"><b>General</b>:
- <b>Name</b>: containerInstance
- <b>Label</b>: aql:container.oclAsType(oml::ConceptInstance)
</pre>
     <li data-md>
      <p>Right click on the nested <code>Begin</code> node, select New Operation -> Change Context. In the property sheet, change the following:</p>
<pre no-line-numbers style="background: rgba(0, 0, 0, .03)"><b>General</b>:
- <b>Browse Expression</b>: aql:context.createConceptInstance('basicfamily:Man', containerInstance, 'basicfamily:members')
</pre>
     <li data-md>
      <p>Right click on the new <code>Change Context...</code> node, select New Operation -> Set. In the property sheet, change the following:</p>
<pre no-line-numbers style="background: rgba(0, 0, 0, .03)"><b>General</b>:
- <b>Feature Name</b>: name
- <b>Value Expression</b>: aql:context.getNewMemberName('man')
</pre>
     <li data-md>
      <p>Copy the <code>Node Creation Man</code> node and paste it in the <code>Section Tools</code> node. In the property sheet, change the following:</p>
<pre no-line-numbers style="background: rgba(0, 0, 0, .03)"><b>General</b>:
- <b>Id</b>: createWoman
- <b>Label</b>: Woman
- <b>Node Mapping</b>: WomanNode
<b>Advanced</b>:
- <b>Icon Path</b>: /basicfamily-viewpoint/icons/woman.gif
</pre>
     <li data-md>
      <p>Expand the <code>Node Creation Woman</code> node and select the nested <code>Change Context...</code> node. In the property sheet, change the following:</p>
<pre no-line-numbers style="background: rgba(0, 0, 0, .03)"><b>General</b>:
- <b>Browse Expression</b>: aql:context.createConceptInstance('basicfamily:Woman', containerInstance, 'basicfamily:members')
</pre>
     <li data-md>
      <p>Select the nested <code>Set</code> node. In the property sheet, change the following:</p>
<pre no-line-numbers style="background: rgba(0, 0, 0, .03)"><b>General</b>:
- <b>Value Expression</b>: aql:context.getNewMemberName('woman')
</pre>
    </ol>
    <blockquote>
     <p>Now, we will add tools to create Father and Mother edges.</p>
    </blockquote>
    <ol start="22">
     <li data-md>
      <p>Right click on the <code>Tools</code> node and select New Element Creation -> Edge Creation. In the property sheet, change the following:</p>
<pre no-line-numbers style="background: rgba(0, 0, 0, .03)"><b>General</b>:
- <b>Id</b>: createFather
- <b>Label</b>: Father
- <b>Edge Mapping</b>: FatherEdge
<b>Advanced</b>:
- <b>Icon Path</b>: /basicfamily-viewpoint/icons/father.png
</pre>
     <li data-md>
      <p>Expand the <code>Edge Creation Father</code> node and right click on the nested <code>source</code> node and select New Variable -> Expression Variable. In the property sheet, change the following:</p>
<pre no-line-numbers style="background: rgba(0, 0, 0, .03)"><b>General</b>:
- <b>Name</b>: context
- <b>Label</b>: aql:source.getDescription()
</pre>
     <li data-md>
      <p>Copy the <code>context</code> variable and paste it under the <code>source</code> variable. In the property sheet, change the following:</p>
<pre no-line-numbers style="background: rgba(0, 0, 0, .03)"><b>General</b>:
- <b>Name</b>: sourceInstance
- <b>Label</b>: aql:source.oclAsType(oml::ConceptInstance)
</pre>
     <li data-md>
      <p>Copy the <code>sourceInstance</code> variable and paste it under the <code>target</code> variable. In the property sheet, change the following:</p>
<pre no-line-numbers style="background: rgba(0, 0, 0, .03)"><b>General</b>:
- <b>Name</b>: targetInstance
- <b>Label</b>: aql:target.oclAsType(oml::ConceptInstance)
</pre>
     <li data-md>
      <p>Right click on the <code>Begin</code> node of the tool and select New Operation -> Change Context. In the property sheet, change the following:</p>
<pre no-line-numbers style="background: rgba(0, 0, 0, .03)"><b>General</b>:
- <b>Browse Expression</b>: aql:context.addPropertyValue(sourceInstance, 'basicfamily:father', targetInstance)
</pre>
     <li data-md>
      <p>Copy the <code>Edge Creation Fatehr</code> node and paste it under the <code>Tools</code> node. In the property sheet, change the following:</p>
<pre no-line-numbers style="background: rgba(0, 0, 0, .03)"><b>General</b>:
- <b>Id</b>: createMother
- <b>Label</b>: Mother
- <b>Edge Mapping</b>: MotherEdge
<b>Advanced</b>:
- <b>Icon Path</b>: /basicfamily-viewpoint/icons/mother.png
</pre>
     <li data-md>
      <p>Navigate to the nested <code>Begin</code> -> <code>Change Context...</code> node. In the property sheet, change the following:</p>
<pre no-line-numbers style="background: rgba(0, 0, 0, .03)"><b>General</b>:
- <b>Browse Expression</b>: aql:context.addPropertyValue(sourceInstance, 'basicfamily:mother', targetInstance)
</pre>
    </ol>
    <blockquote>
     <p>Now that we created four create tools, we will create a couple of delete (from model) tools.</p>
    </blockquote>
    <blockquote>
     <p>The first is <code>Recursive</code> delete, which when run on an instance, it deletes the instance and recursively its links (e.g., deleting a Man instance deletes its incoming and outgoing father and mother links).</p>
    </blockquote>
    <ol start="29">
     <li data-md>
      <p>Right click on the <code>Section Tools</code> node and select New Element Edition -> Delete Element. In the property sheet, change the following:</p>
<pre no-line-numbers style="background: rgba(0, 0, 0, .03)"><b>General</b>:
- <b>Id</b>: Recursive
- <b>Mappings</b>: ManNode, WomanNode, FatherEdge, MotherEdge
</pre>
     <li data-md>
      <p>Expand the <code>Delete Element Recursive</code> node, right click on the <code>Begin</code> node and select New Operation -> Change Context. In the property sheet, change the following:</p>
<pre no-line-numbers style="background: rgba(0, 0, 0, .03)"><b>General</b>:
- <b>Browse Expression</b>: aql:self.recursiveDelete()
</pre>
    </ol>
    <blockquote>
     <p>The second is <code>Cascade</code> delete, which when run on an instance, it deletes the instance, its links, and its related instances based on cascade delete rules. For example, when deleting a <code>Man</code> or <code>Woman</code> instance, we can configure it to cascade the delete to their children recursively.</p>
    </blockquote>
    <ol start="31">
     <li data-md>
      <p>Right click on the <code>Section Tools</code> node and select New Menu -> Operation Action. In the property sheet, change the following:</p>
<pre no-line-numbers style="background: rgba(0, 0, 0, .03)"><b>General</b>:
- <b>Id</b>: Cascade Delete
- <b>Precondition</b>: ManNode, WomanNode, FatherEdge, MotherEdge
</pre>
     <li data-md>
      <p>Expand the <code>Operation Action Cascade Delete</code> node, right click on the <code>Begin</code> node and select New Operation -> Change Context. In the property sheet, change the following:</p>
<pre no-line-numbers style="background: rgba(0, 0, 0, .03)"><b>General</b>:
- <b>Browse Expression</b>: aql:self.cascadeDelete()
</pre>
    </ol>
    <blockquote>
     <p>The <code>recursiveDelete</code> function used in the expression is not provided by the openCAEASR API. Instead, we need to implement it as a service in the viewpoint project itself.</p>
    </blockquote>
    <ol start="33">
     <li data-md>
      <p>In the <code>basicfamily.odesign</code> editor, double click on the <code>defaultpackage.Services</code> node. This opens a Java editor for the Services class. Replace the content by the following. Save the editor after.</p>
    </ol>
<pre class="language-java highlight"><c- kn>package</c-> <c- nn>defaultpackage</c-><c- p>;</c->

<c- kn>import</c-> <c- nn>java.util.ArrayList</c-><c- p>;</c->
<c- kn>import</c-> <c- nn>java.util.HashSet</c-><c- p>;</c->

<c- kn>import</c-> <c- nn>io.opencaesar.oml.NamedInstance</c-><c- p>;</c->
<c- kn>import</c-> <c- nn>io.opencaesar.oml.Relation</c-><c- p>;</c->
<c- kn>import</c-> <c- nn>io.opencaesar.oml.util.OmlDelete</c-><c- p>;</c->
<c- kn>import</c-> <c- nn>io.opencaesar.oml.util.OmlDelete.CascadeDirection</c-><c- p>;</c->
<c- kn>import</c-> <c- nn>io.opencaesar.oml.util.OmlDelete.CascadeRule</c-><c- p>;</c->
<c- kn>import</c-> <c- nn>io.opencaesar.oml.util.OmlRead</c-><c- p>;</c->
<c- kn>import</c-> <c- nn>io.opencaesar.rosetta.sirius.viewpoint.OmlServices</c-><c- p>;</c->

<c- a>public</c-> <c- a>class</c-> <c- nc>Services</c-> <c- p>{</c->
    
    <c- a>public</c-> <c- b>void</c-> <c- nf>cascadeDelete</c-><c- p>(</c-><c- n>NamedInstance</c-> <c- n>instance</c-><c- p>)</c-> <c- p>{</c->
      <c- a>var</c-> <c- n>cascadeRules</c-> <c- o>=</c-> <c- k>new</c-> <c- n>ArrayList</c-><c- o>&lt;</c-><c- n>CascadeRule</c-><c- o>></c-><c- p>();</c->
    	
      <c- n>Relation</c-> <c- n>parents</c-> <c- o>=</c-> <c- p>(</c-><c- n>Relation</c-><c- p>)</c-> <c- n>OmlRead</c-><c- p>.</c-><c- e>getMemberByAbbreviatedIri</c-><c- p>(</c-><c- n>instance</c-><c- p>.</c-><c- e>getOntology</c-><c- p>(),</c-> <c- s>"basicfamily:parents"</c-><c- p>);</c->
      <c- n>cascadeRules</c-><c- p>.</c-><c- e>add</c-><c- p>(</c-><c- k>new</c-> <c- n>CascadeRule</c-><c- p>(</c-><c- n>CascadeDirection</c-><c- p>.</c-><c- e>TARGET_TO_SOURCE</c-><c- p>,</c-> <c- kc>null</c-><c- p>,</c-> <c- n>parents</c-><c- p>,</c-> <c- kc>null</c-><c- p>,</c-> <c- s>"delete children"</c-><c- p>));</c->
    	
      <c- a>var</c-> <c- n>result</c-> <c- o>=</c-> <c- n>OmlDelete</c-><c- p>.</c-><c- e>cascadeDelete</c-><c- p>(</c-><c- n>instance</c-><c- p>,</c-> <c- n>cascadeRules</c-><c- p>);</c->
      <c- n>OmlDelete</c-><c- p>.</c-><c- e>recursiveDelete</c-><c- p>(</c-><c- n>result</c-><c- p>);</c->
    <c- p>}</c->
<c- p>}</c->
</pre>
    <blockquote>
     <p>Now that we created the tools, we can use them on the <code>family1</code> diagram.</p>
    </blockquote>
    <ol start="34">
     <li data-md>
      <p>In the <code>family1</code> diagram, click the palette arrow on the right-hand-side to reveal the node/edge creation tools. Then use the tools to create a <code>man</code> and a <code>woman</code> that are father and mother of another <code>man</code>.</p>
    </ol>
    <video controls style="border:1px groove black;" width="100%">
     <source src="assets/tutorial5/Use-Diagram-Tools.mov">
    </video>
    <ol start="35">
     <li data-md>
      <p>Save the diagram and inspect the <code>family1.oml</code> file with the OML text editor. It should have the following at the end:</p>
    </ol>
<pre class="language-scala highlight"><c- n>instance</c-> <c- n>man</c-> <c- p>:</c-> <c- n>basicfamily</c-><c- p>:</c-><c- nc>Man</c->

<c- n>instance</c-> <c- n>woman</c-> <c- p>:</c-> <c- n>basicfamily</c-><c- p>:</c-><c- nc>Woman</c->

<c- n>instance</c-> <c- n>man1</c-> <c- p>:</c-> <c- n>basicfamily</c-><c- p>:</c-><c- nc>Man</c-> <c- p>[</c->
  <c- n>basicfamily</c-><c- p>:</c-><c- n>father</c-> <c- n>man</c->
  <c- n>basicfamily</c-><c- p>:</c-><c- n>mother</c-> <c- n>woman</c->
<c- p>]</c->
</pre>
    <ol start="36">
     <li data-md>
      <p>Select the family1 diagram editor again, and from the main menu run Undo a few times until the new changes are all undone. Save the editor. Look at the <code>family1.oml</code> text editor and observe how the new statements got deleted.</p>
    </ol>
    <video controls style="border:1px groove black;" width="100%">
     <source src="assets/tutorial5/Undo-Basicfamily-Diagram.mov">
    </video>
    <blockquote>
     <p>Now, we will try the delete tools.</p>
    </blockquote>
    <ol start="37">
     <li data-md>
      <p>In the <code>family1</code> diagram, select <code>Paul</code> and from the diagram’s toolbar select the Delete from Model button. This invokes the Recursive delete tool. After this, undo the delete.</p>
    </ol>
    <video controls style="border:1px groove black;" width="100%">
     <source src="assets/tutorial5/Recursive-Delete-Paul.mov">
    </video>
    <ol start="38">
     <li data-md>
      <p>Select <code>Paul</code> again and this time right click on it and select Cascade Delete action in the menu. This invokes the Cascade delete tool where it deletes Paul and his offspring. After this, undo the delete. Save the editor.</p>
    </ol>
    <video controls style="border:1px groove black;" width="100%">
     <source src="assets/tutorial5/Cascade-Delete-Paul.mov">
    </video>
    <h3 class="heading settled" data-level="5.7" id="tutorial5-create-table-editor"><span class="secno">5.7. </span><span class="content">Create Table Editor</span><a class="self-link" href="#tutorial5-create-table-editor"></a></h3>
    <p>In this step, we will define a custom table editor for OML description models that use the <code>basicfamily</code> OML vocabulary.</p>
    <ol>
     <li data-md>
      <p>In the <code>basicfamily.odesign</code> editor, right click on the <code>persons</code> viewpoint and select New Representation -> Edition Table Description. In the Property Sheet, change the following information:</p>
<pre no-line-numbers style="background: rgba(0, 0, 0, .03)"><b>General</b>:
- <b>Id</b>: Persons table
- <b>Domain Class</b>: oml.ConceptInstance
<b>Metamodels</b>:
- Click <code>Add from registry</code> and select <code>http://opencaesar.io/oml</code>.
<b>Advanced</b>:
- <b>Precondition Expression</b>: aql:self.findIsKindOf('basicfamily:Family')
</pre>
    </ol>
    <blockquote>
     <p>Similar to the custom diagram, this enables the custom table to be createable on concept instances of type <code>basicfamily:Family</code>. Next, we creat a Line (Row) in the table.</p>
    </blockquote>
    <ol start="2">
     <li data-md>
      <p>Right click on the <code>Persons table</code> node and select New Table Element -> Line. In the Property Sheet, change the following:</p>
<pre no-line-numbers style="background: rgba(0, 0, 0, .03)"><b>General</b>:
- <b>Id</b>: PersonLine
- <b>Domain Class</b>: oml.ConceptInstance
- <b>Semantic Candidates Expression</b>: aql:self.findTargetInstances('basicfamily:members')
<b>Label</b>:
- <b>Header Label Expression</b>: feature:name
</pre>
     <li data-md>
      <p>Right click on the <code>PersonLine</code> node and select New Style -> Foreground. In the property sheet, change the following:</p>
<pre no-line-numbers style="background: rgba(0, 0, 0, .03)"><b>Label</b>:
- <b>Label Size</b>: 11
</pre>
     <li data-md>
      <p>Right click on the <code>Persons table</code> node and select New Table Element -> Feature Column. In the property sheet, change the following:</p>
<pre no-line-numbers style="background: rgba(0, 0, 0, .03)"><b>General</b>:
- <b>Id</b>: FatherColumn
- <b>Feature Name</b>: name
<b>Label</b>:
- <b>Header Label Expression</b>: Father
<b>Advanced</b>:
- <b>Feature Parent Expression</b>: aql:self.findTargetInstance('basicfamily:father')
</pre>
     <li data-md>
      <p>Right click on the <code>Persons table</code> node and select New Table Element -> Feature Column. In the property sheet, change the following:</p>
<pre no-line-numbers style="background: rgba(0, 0, 0, .03)"><b>General</b>:
- <b>Id</b>: MotherColumn
- <b>Feature Name</b>: name
<b>Label</b>:
- <b>Header Label Expression</b>: Mother
<b>Advanced</b>:
- <b>Feature Parent Expression</b>: aql:self.findTargetInstance('basicfamily:mother')
</pre>
     <li data-md>
      <p>Right click on the <code>Persons table</code> node and select New Table Element -> Feature Column. In the property sheet, change the following:</p>
<pre no-line-numbers style="background: rgba(0, 0, 0, .03)"><b>General</b>:
- <b>Id</b>: ChildrenColumn
- <b>Feature Name</b>: *
<b>Label</b>:
- <b>Header Label Expression</b>: Children
- <b>Label Expression</b>: aql:self.findSourceInstances('basicfamily:parents')->size()
</pre>
     <li data-md>
      <p>Right click on the <code>Persons table</code> node and select New Table Element -> Feature Column. In the property sheet, change the following:</p>
<pre no-line-numbers style="background: rgba(0, 0, 0, .03)"><b>General</b>:
- <b>Id</b>: SiblingsColumn
- <b>Feature Name</b>: *
<b>Label</b>:
- <b>Header Label Expression</b>: Siblings
- <b>Label Expression</b>: aql:self.calculateSiblingsCount()
</pre>
    </ol>
    <blockquote>
     <p>This last label expression is not a standard API from openCAESAR, but rather a custom Java function in <code>basicfamily-viewpoint</code> project.</p>
    </blockquote>
    <ol start="8">
     <li data-md>
      <p>In <code>basicfamily.odesign</code> editor, double click on <code>defaultpackage.Services</code> node. This opens a Java editor for <code>Services</code> class. Add the following function to the class:</p>
    </ol>
<pre class="language-java highlight"><c- a>public</c-> <c- b>int</c-> <c- nf>calculateSiblingsCount</c-><c- p>(</c-><c- n>NamedInstance</c-> <c- n>self</c-><c- p>)</c-> <c- p>{</c->
  <c- a>var</c-> <c- n>siblings</c-> <c- o>=</c-> <c- k>new</c-> <c- n>HashSet</c-><c- o>&lt;></c-><c- p>();</c->

  <c- a>var</c-> <c- n>parents</c-> <c- o>=</c-> <c- n>OmlServices</c-><c- p>.</c-><c- e>findTargetInstances</c-><c- p>(</c-><c- n>self</c-><c- p>,</c-> <c- s>"basicfamily:parents"</c-><c- p>);</c->
  <c- k>for</c-> <c- p>(</c-><c- a>var</c-> <c- n>parent</c-> <c- p>:</c-> <c- n>parents</c-><c- p>)</c-> <c- p>{</c->
    <c- n>siblings</c-><c- p>.</c-><c- e>addAll</c-><c- p>(</c-><c- n>OmlServices</c-><c- p>.</c-><c- e>findSourceInstances</c-><c- p>(</c-><c- n>parent</c-><c- p>,</c-> <c- s>"basicfamily:parents"</c-><c- p>));</c->
  <c- p>}</c->
    	
  <c- n>siblings</c-><c- p>.</c-><c- e>remove</c-><c- p>(</c-><c- n>self</c-><c- p>);</c->
    	
  <c- k>return</c-> <c- n>siblings</c-><c- p>.</c-><c- e>size</c-><c- p>();</c->
<c- p>}</c->
</pre>
    <blockquote>
     <p>Now, we are now ready to create an instance of the table for the <code>family1</code> instance.</p>
    </blockquote>
    <ol start="9">
     <li data-md>
      <p>In the <a data-link-type="dfn" href="#model-explorer-view" id="ref-for-model-explorer-view④②">Model Explorer view</a>, navigate to the file <code>basicfamily-model/src/oml/example.com/description/family1.oml</code>. Expand the file’s node to reveal the root <code>description</code> node. Right click the nested <code>family1</code> node and select New Representation -> new Persons table. Rename the diagram to <code>Persons table</code>. Click OK.</p>
     <li data-md>
      <p>The new table editor opens. Drag it and dock it to the right editor stack while docking the diagram to the left stack. Compare the info presented in both the table and the diagram to verify they are in sync.</p>
      <p><img src="assets/tutorial5/Create-Basicfamily-Table.png" style="border:1px groove black;" width="100%"></p>
    </ol>
    <blockquote>
     <p>So far, this table is a viewer only, now we will turn it into an editor. We will start by adding tools to create Man and Woman nodes.</p>
    </blockquote>
    <ol start="11">
     <li data-md>
      <p>In the <code>basicfamily.odesign</code> editor, right click on the <code>Persons table</code> node and select New Tool -> Create Line Tool. In the property sheet, change the following:</p>
<pre no-line-numbers style="background: rgba(0, 0, 0, .03)"><b>General</b>:
- <b>Id</b>: createManLine
- <b>Label</b>: New Man
- <b>Mapping</b>: PersonLine
</pre>
    </ol>
    <blockquote>
     <p>Expand the <code>New Man</code> node to reveal the variable nodes.</p>
    </blockquote>
    <ol start="12">
     <li data-md>
      <p>Right click on the <code>root</code> variable and select New Variable -> Expression Variable. In the property sheet, change the following:</p>
<pre no-line-numbers style="background: rgba(0, 0, 0, .03)"><b>General</b>:
- <b>Name</b>: context
- <b>Computation Expression</b>: aql:root.getDescription()
</pre>
     <li data-md>
      <p>Right click on the <code>root</code> variable and select New Variable -> Expression Variable. In the property sheet, change the following:</p>
<pre no-line-numbers style="background: rgba(0, 0, 0, .03)"><b>General</b>:
- <b>Name</b>: containerInstance
- <b>Computation Expression</b>: aql:root.oclAsType(oml::ConceptInstance)
</pre>
     <li data-md>
      <p>Right click on the <code>New Man</code> node and select New Operation -> Change Context. In the property sheet, change the following:</p>
<pre no-line-numbers style="background: rgba(0, 0, 0, .03)"><b>General</b>:
- <b>Browse Expression</b>: aql:context.createConceptInstance('basicfamily:Man', containerInstance, 'basicfamily:members')
</pre>
     <li data-md>
      <p>Right click on the last <code>Change Context</code> node and select New Operation -> Set. In the property sheet, change the following:</p>
<pre no-line-numbers style="background: rgba(0, 0, 0, .03)"><b>General</b>:
- <b>Feature Name</b>: name
- <b>Value Expression</b>: aql:context.getNewMemberName('man')
</pre>
     <li data-md>
      <p>Copy the <code>New Man</code> node and paste it under the <code>Persons table</code> node. In the property sheet, change the following:</p>
<pre no-line-numbers style="background: rgba(0, 0, 0, .03)"><b>General</b>:
- <b>Id</b>: createWomanLine
- <b>Label</b>: New Woman
- <b>Mapping</b>: PersonLine
</pre>
     <li data-md>
      <p>Expand the <code>New Woman</code> node and navigate to the nested <code>Change Context</code> node. In the property sheet, change the following:</p>
<pre no-line-numbers style="background: rgba(0, 0, 0, .03)"><b>General</b>:
- <b>Value Expression</b>: aql:context.createConceptInstance('basicfamily:Woman', containerInstance, 'basicfamily:members')
</pre>
     <li data-md>
      <p>Navigate to the nested <code>Set</code> node. In the property sheet, change the following:</p>
<pre no-line-numbers style="background: rgba(0, 0, 0, .03)"><b>General</b>:
- <b>Value Expression</b>: aql:context.getNewMemberName('woman')
</pre>
    </ol>
    <blockquote>
     <p>We will now add a Delete tool</p>
    </blockquote>
    <ol start="19">
     <li data-md>
      <p>Right click on the <code>PersonsLine</code> node and select New Tool -> Delete Line Tool. In the property sheet, change the following:</p>
<pre no-line-numbers style="background: rgba(0, 0, 0, .03)"><b>General</b>:
- <b>Id</b>: Delete
</pre>
     <li data-md>
      <p>Right click on the <code>Delete</code> node and select New Operation -> Change Context. In the property sheet, change the following:</p>
<pre no-line-numbers style="background: rgba(0, 0, 0, .03)"><b>General</b>:
- <b>Browse Expression</b>: aql:self.recursiveDelete()
</pre>
    </ol>
    <blockquote>
     <p>Now, let us use these tools to add and delete persons from the table and observe the diagram in the same time.</p>
    </blockquote>
    <ol start="21">
     <li data-md>
      <p>In the <code>Persons table</code>, right click on any row and select from the popup menu New Man. Notice that a new row gets added to the end of the table and on the diagram in the same time. Repeat the step creating a New Woman this time. Finally select both new rows, right click and choose Delete Line.</p>
    </ol>
    <video controls style="border:1px groove black;" width="100%">
     <source src="assets/tutorial5/Edit-Basicfamily-Table1.mov">
    </video>
    <ol start="22">
     <li data-md>
      <p>Similarly, in the <code>Persons diagram</code>, use the pallette tools to create a man and a woman. Observe how the table stays in sync and shows new rows. Then, use the delete tool on the diagram to delete them and observe them being deleted from the table. Save the editor after.</p>
    </ol>
    <video controls style="border:1px groove black;" width="100%">
     <source src="assets/tutorial5/Edit-Basicfamily-Table2.mov">
    </video>
    <h3 class="heading settled" data-level="5.8" id="tutorial5-create-sparql-queries"><span class="secno">5.8. </span><span class="content">Create SPARQL Queries</span><a class="self-link" href="#tutorial5-create-sparql-queries"></a></h3>
    <p>In this step, we will add a couple of SPARQL queries to the <code>basicfamily-model</code> project to explore how OML has powerful query and reasoning capabilities. One of the queries is meant to replicate the <code>sibling</code> relation in the table above. The other queries for a <code>cousin</code> relation in a couple of ways.</p>
    <ol>
     <li data-md>
      <p>In the <a data-link-type="dfn" href="#model-explorer-view" id="ref-for-model-explorer-view④③">Model Explorer view</a>, navigate to <code>basicfamily-model/src</code> folder, right click and choose New -> Folder, and name it <code>sparql</code>.</p>
     <li data-md>
      <p>Right click on the <code>sparql</code> folder and choose New -> File, and name it <code>siblings.sparql</code>. Click Finish. A text editor opens up.</p>
     <li data-md>
      <p>In the <code>siblings.sparql</code> editor, copy/paste the following SPARQL code. Save the editor.</p>
    </ol>
<pre class="language-sparql highlight"><c- k>PREFIX</c-> <c- nn>basicfamily</c-><c- p>:</c->        <c- nl>&lt;http://example.com/vocabulary/basicfamily#></c->

<c- k>SELECT</c-> <c- k>DISTINCT</c-> <c- g>?person</c-> <c- p>(</c-><c- nf>COUNT</c-><c- p>(</c-><c- g>?sibling</c-><c- p>)</c-> <c- k>as</c-> <c- g>?siblings</c-><c- p>)</c->
<c- k>WHERE</c-> <c- p>{</c->
  <c- g>?person</c-> <c- k>a</c-> <c- nn>basicfamily</c-><c- p>:</c-><c- f>Person</c-> <c- p>.</c->
  <c- k>OPTIONAL</c-> <c- p>{</c->
    <c- g>?person</c-> <c- nn>basicfamily</c-><c- p>:</c-><c- f>parents</c-> <c- g>?parent</c-> <c- p>.</c->
    <c- g>?parent</c-> <c- nn>basicfamily</c-><c- p>:</c-><c- f>children</c-> <c- g>?sibling</c-> <c- p>.</c->
    <c- k>FILTER</c-> <c- p>(</c-><c- g>?person</c-> <c- o>!=</c-> <c- g>?sibling</c-><c- p>)</c->
  <c- p>}</c->
<c- p>}</c->
<c- k>GROUP BY</c-> <c- g>?person</c-> <c- g>?parent</c->
<c- k>ORDER BY</c-> <c- g>?person</c->
</pre>
    <ol start="4">
     <li data-md>
      <p>Click in the <a data-link-type="dfn" href="#gradle-tasks-view" id="ref-for-gradle-tasks-view②⑧">Gradle Tasks view</a> and double click on the task <code>basicfamily-model/oml/owlQuery</code>. Execution runs in the <a data-link-type="dfn" href="#gradle-executions-view" id="ref-for-gradle-executions-view③①">Gradle Executions view</a>.</p>
     <li data-md>
      <p>Inspect the results by navigating in the <a data-link-type="dfn" href="#model-explorer-view" id="ref-for-model-explorer-view④④">Model Explorer view</a> to the <code>basicfamily-model/build</code> folder. Right click on it and select Refresh. Navigate to the <code>basicfamily-model/build/results/silblings.json</code> file. Double-click to open it. You should see the following result:</p>
    </ol>
<pre class="language-json highlight"><c- p>{</c-> <c- f>"head"</c-><c- p>:</c-> <c- p>{</c->
    <c- f>"vars"</c-><c- p>:</c-> <c- p>[</c-> <c- u>"person"</c-> <c- p>,</c-> <c- u>"siblings"</c-> <c- p>]</c->
  <c- p>}</c-> <c- p>,</c->
  <c- f>"results"</c-><c- p>:</c-> <c- p>{</c->
    <c- f>"bindings"</c-><c- p>:</c-> <c- p>[</c->
      <c- p>{</c-> 
        <c- f>"person"</c-><c- p>:</c-> <c- p>{</c-> <c- f>"type"</c-><c- p>:</c-> <c- u>"uri"</c-> <c- p>,</c-> <c- f>"value"</c-><c- p>:</c-> <c- u>"http://example.com/description/family1#Alain"</c-> <c- p>}</c-> <c- p>,</c->
        <c- f>"siblings"</c-><c- p>:</c-> <c- p>{</c-> <c- f>"type"</c-><c- p>:</c-> <c- u>"literal"</c-> <c- p>,</c-> <c- f>"datatype"</c-><c- p>:</c-> <c- u>"http://www.w3.org/2001/XMLSchema#integer"</c-> <c- p>,</c-> <c- f>"value"</c-><c- p>:</c-> <c- u>"0"</c-> <c- p>}</c->
      <c- p>}</c-> <c- p>,</c->
      <c- p>{</c-> 
        <c- f>"person"</c-><c- p>:</c-> <c- p>{</c-> <c- f>"type"</c-><c- p>:</c-> <c- u>"uri"</c-> <c- p>,</c-> <c- f>"value"</c-><c- p>:</c-> <c- u>"http://example.com/description/family1#Albert"</c-> <c- p>}</c-> <c- p>,</c->
        <c- f>"siblings"</c-><c- p>:</c-> <c- p>{</c-> <c- f>"type"</c-><c- p>:</c-> <c- u>"literal"</c-> <c- p>,</c-> <c- f>"datatype"</c-><c- p>:</c-> <c- u>"http://www.w3.org/2001/XMLSchema#integer"</c-> <c- p>,</c-> <c- f>"value"</c-><c- p>:</c-> <c- u>"0"</c-> <c- p>}</c->
      <c- p>}</c-> <c- p>,</c->
      <c- p>{</c-> 
        <c- f>"person"</c-><c- p>:</c-> <c- p>{</c-> <c- f>"type"</c-><c- p>:</c-> <c- u>"uri"</c-> <c- p>,</c-> <c- f>"value"</c-><c- p>:</c-> <c- u>"http://example.com/description/family1#Bryan"</c-> <c- p>}</c-> <c- p>,</c->
        <c- f>"siblings"</c-><c- p>:</c-> <c- p>{</c-> <c- f>"type"</c-><c- p>:</c-> <c- u>"literal"</c-> <c- p>,</c-> <c- f>"datatype"</c-><c- p>:</c-> <c- u>"http://www.w3.org/2001/XMLSchema#integer"</c-> <c- p>,</c-> <c- f>"value"</c-><c- p>:</c-> <c- u>"3"</c-> <c- p>}</c->
      <c- p>}</c-> <c- p>,</c->
      <c- p>{</c-> 
        <c- f>"person"</c-><c- p>:</c-> <c- p>{</c-> <c- f>"type"</c-><c- p>:</c-> <c- u>"uri"</c-> <c- p>,</c-> <c- f>"value"</c-><c- p>:</c-> <c- u>"http://example.com/description/family1#Clara"</c-> <c- p>}</c-> <c- p>,</c->
        <c- f>"siblings"</c-><c- p>:</c-> <c- p>{</c-> <c- f>"type"</c-><c- p>:</c-> <c- u>"literal"</c-> <c- p>,</c-> <c- f>"datatype"</c-><c- p>:</c-> <c- u>"http://www.w3.org/2001/XMLSchema#integer"</c-> <c- p>,</c-> <c- f>"value"</c-><c- p>:</c-> <c- u>"3"</c-> <c- p>}</c->
      <c- p>}</c-> <c- p>,</c->
      <c- p>{</c-> 
        <c- f>"person"</c-><c- p>:</c-> <c- p>{</c-> <c- f>"type"</c-><c- p>:</c-> <c- u>"uri"</c-> <c- p>,</c-> <c- f>"value"</c-><c- p>:</c-> <c- u>"http://example.com/description/family1#Dave"</c-> <c- p>}</c-> <c- p>,</c->
        <c- f>"siblings"</c-><c- p>:</c-> <c- p>{</c-> <c- f>"type"</c-><c- p>:</c-> <c- u>"literal"</c-> <c- p>,</c-> <c- f>"datatype"</c-><c- p>:</c-> <c- u>"http://www.w3.org/2001/XMLSchema#integer"</c-> <c- p>,</c-> <c- f>"value"</c-><c- p>:</c-> <c- u>"3"</c-> <c- p>}</c->
      <c- p>}</c-> <c- p>,</c->
      <c- p>{</c-> 
        <c- f>"person"</c-><c- p>:</c-> <c- p>{</c-> <c- f>"type"</c-><c- p>:</c-> <c- u>"uri"</c-> <c- p>,</c-> <c- f>"value"</c-><c- p>:</c-> <c- u>"http://example.com/description/family1#Elias"</c-> <c- p>}</c-> <c- p>,</c->
        <c- f>"siblings"</c-><c- p>:</c-> <c- p>{</c-> <c- f>"type"</c-><c- p>:</c-> <c- u>"literal"</c-> <c- p>,</c-> <c- f>"datatype"</c-><c- p>:</c-> <c- u>"http://www.w3.org/2001/XMLSchema#integer"</c-> <c- p>,</c-> <c- f>"value"</c-><c- p>:</c-> <c- u>"1"</c-> <c- p>}</c->
      <c- p>}</c-> <c- p>,</c->
      <c- p>{</c-> 
        <c- f>"person"</c-><c- p>:</c-> <c- p>{</c-> <c- f>"type"</c-><c- p>:</c-> <c- u>"uri"</c-> <c- p>,</c-> <c- f>"value"</c-><c- p>:</c-> <c- u>"http://example.com/description/family1#Fiona"</c-> <c- p>}</c-> <c- p>,</c->
        <c- f>"siblings"</c-><c- p>:</c-> <c- p>{</c-> <c- f>"type"</c-><c- p>:</c-> <c- u>"literal"</c-> <c- p>,</c-> <c- f>"datatype"</c-><c- p>:</c-> <c- u>"http://www.w3.org/2001/XMLSchema#integer"</c-> <c- p>,</c-> <c- f>"value"</c-><c- p>:</c-> <c- u>"3"</c-> <c- p>}</c->
      <c- p>}</c-> <c- p>,</c->
      <c- p>{</c-> 
        <c- f>"person"</c-><c- p>:</c-> <c- p>{</c-> <c- f>"type"</c-><c- p>:</c-> <c- u>"uri"</c-> <c- p>,</c-> <c- f>"value"</c-><c- p>:</c-> <c- u>"http://example.com/description/family1#Isa"</c-> <c- p>}</c-> <c- p>,</c->
        <c- f>"siblings"</c-><c- p>:</c-> <c- p>{</c-> <c- f>"type"</c-><c- p>:</c-> <c- u>"literal"</c-> <c- p>,</c-> <c- f>"datatype"</c-><c- p>:</c-> <c- u>"http://www.w3.org/2001/XMLSchema#integer"</c-> <c- p>,</c-> <c- f>"value"</c-><c- p>:</c-> <c- u>"0"</c-> <c- p>}</c->
      <c- p>}</c-> <c- p>,</c->
      <c- p>{</c-> 
        <c- f>"person"</c-><c- p>:</c-> <c- p>{</c-> <c- f>"type"</c-><c- p>:</c-> <c- u>"uri"</c-> <c- p>,</c-> <c- f>"value"</c-><c- p>:</c-> <c- u>"http://example.com/description/family1#Jane"</c-> <c- p>}</c-> <c- p>,</c->
        <c- f>"siblings"</c-><c- p>:</c-> <c- p>{</c-> <c- f>"type"</c-><c- p>:</c-> <c- u>"literal"</c-> <c- p>,</c-> <c- f>"datatype"</c-><c- p>:</c-> <c- u>"http://www.w3.org/2001/XMLSchema#integer"</c-> <c- p>,</c-> <c- f>"value"</c-><c- p>:</c-> <c- u>"0"</c-> <c- p>}</c->
      <c- p>}</c-> <c- p>,</c->
      <c- p>{</c-> 
        <c- f>"person"</c-><c- p>:</c-> <c- p>{</c-> <c- f>"type"</c-><c- p>:</c-> <c- u>"uri"</c-> <c- p>,</c-> <c- f>"value"</c-><c- p>:</c-> <c- u>"http://example.com/description/family1#Katell"</c-> <c- p>}</c-> <c- p>,</c->
        <c- f>"siblings"</c-><c- p>:</c-> <c- p>{</c-> <c- f>"type"</c-><c- p>:</c-> <c- u>"literal"</c-> <c- p>,</c-> <c- f>"datatype"</c-><c- p>:</c-> <c- u>"http://www.w3.org/2001/XMLSchema#integer"</c-> <c- p>,</c-> <c- f>"value"</c-><c- p>:</c-> <c- u>"0"</c-> <c- p>}</c->
      <c- p>}</c-> <c- p>,</c->
      <c- p>{</c-> 
        <c- f>"person"</c-><c- p>:</c-> <c- p>{</c-> <c- f>"type"</c-><c- p>:</c-> <c- u>"uri"</c-> <c- p>,</c-> <c- f>"value"</c-><c- p>:</c-> <c- u>"http://example.com/description/family1#Lea"</c-> <c- p>}</c-> <c- p>,</c->
        <c- f>"siblings"</c-><c- p>:</c-> <c- p>{</c-> <c- f>"type"</c-><c- p>:</c-> <c- u>"literal"</c-> <c- p>,</c-> <c- f>"datatype"</c-><c- p>:</c-> <c- u>"http://www.w3.org/2001/XMLSchema#integer"</c-> <c- p>,</c-> <c- f>"value"</c-><c- p>:</c-> <c- u>"1"</c-> <c- p>}</c->
      <c- p>}</c-> <c- p>,</c->
      <c- p>{</c-> 
        <c- f>"person"</c-><c- p>:</c-> <c- p>{</c-> <c- f>"type"</c-><c- p>:</c-> <c- u>"uri"</c-> <c- p>,</c-> <c- f>"value"</c-><c- p>:</c-> <c- u>"http://example.com/description/family1#Paul"</c-> <c- p>}</c-> <c- p>,</c->
        <c- f>"siblings"</c-><c- p>:</c-> <c- p>{</c-> <c- f>"type"</c-><c- p>:</c-> <c- u>"literal"</c-> <c- p>,</c-> <c- f>"datatype"</c-><c- p>:</c-> <c- u>"http://www.w3.org/2001/XMLSchema#integer"</c-> <c- p>,</c-> <c- f>"value"</c-><c- p>:</c-> <c- u>"0"</c-> <c- p>}</c->
      <c- p>}</c-> <c- p>,</c->
      <c- p>{</c-> 
        <c- f>"person"</c-><c- p>:</c-> <c- p>{</c-> <c- f>"type"</c-><c- p>:</c-> <c- u>"uri"</c-> <c- p>,</c-> <c- f>"value"</c-><c- p>:</c-> <c- u>"http://example.com/description/family1#Peter"</c-> <c- p>}</c-> <c- p>,</c->
        <c- f>"siblings"</c-><c- p>:</c-> <c- p>{</c-> <c- f>"type"</c-><c- p>:</c-> <c- u>"literal"</c-> <c- p>,</c-> <c- f>"datatype"</c-><c- p>:</c-> <c- u>"http://www.w3.org/2001/XMLSchema#integer"</c-> <c- p>,</c-> <c- f>"value"</c-><c- p>:</c-> <c- u>"0"</c-> <c- p>}</c->
      <c- p>}</c->
    <c- p>]</c->
  <c- p>}</c->
<c- p>}</c->
</pre>
    <blockquote>
     <p>Compare this result to the one we got previously in the <code>Persons table</code>. It should be the same.</p>
    </blockquote>
    <ol start="6">
     <li data-md>
      <p>In the <a data-link-type="dfn" href="#model-explorer-view" id="ref-for-model-explorer-view④⑤">Model Explorer view</a>, right click on the <code>sparql</code> folder and choose New -> File, and name it <code>cousins.sparql</code>. Click Finish. A text editor opens up.</p>
     <li data-md>
      <p>In the <code>cousins.sparql</code> editor, copy/paste the following SPARQL code. Save the editor.</p>
    </ol>
<pre class="language-sparql highlight"><c- k>PREFIX</c-> <c- nn>basicfamily</c-><c- p>:</c->        <c- nl>&lt;http://example.com/vocabulary/basicfamily#></c->

<c- k>SELECT</c-> <c- k>DISTINCT</c-> <c- g>?person</c-> <c- p>(</c-><c- nf>COUNT</c-><c- p>(</c-><c- g>?cousin</c-><c- p>)</c-> <c- k>as</c-> <c- g>?cousins</c-><c- p>)</c->
<c- k>WHERE</c-> <c- p>{</c->
  <c- g>?person</c-> <c- k>a</c-> <c- nn>basicfamily</c-><c- p>:</c-><c- f>Person</c-> <c- p>.</c->
  <c- k>OPTIONAL</c-> <c- p>{</c->
    <c- g>?person</c-> <c- nn>basicfamily</c-><c- p>:</c-><c- f>parents</c-> <c- g>?parent</c-> <c- p>.</c->
    <c- g>?parent</c-> <c- nn>basicfamily</c-><c- p>:</c-><c- f>parents</c-> <c- g>?grandparent</c-> <c- p>.</c->
    <c- g>?grandparent</c-> <c- nn>basicfamily</c-><c- p>:</c-><c- f>children</c-> <c- g>?uncleOrAunt</c-> <c- p>.</c->
    <c- g>?uncleOrAunt</c-> <c- nn>basicfamily</c-><c- p>:</c-><c- f>children</c-> <c- g>?cousin</c-> <c- p>.</c->
    <c- k>FILTER</c-><c- p>(</c-><c- g>?uncleOrAunt</c-> <c- o>!=</c-> <c- g>?parent</c-><c- p>)</c->
  <c- p>}</c->
<c- p>}</c->
<c- k>GROUP BY</c-> <c- g>?person</c->
<c- k>ORDER BY</c-> <c- g>?person</c->
</pre>
    <ol start="8">
     <li data-md>
      <p>Click in the <a data-link-type="dfn" href="#gradle-tasks-view" id="ref-for-gradle-tasks-view②⑨">Gradle Tasks view</a> and double click on the task <code>basicfamily-model/oml/owlQuery</code>. Execution runs in the <a data-link-type="dfn" href="#gradle-executions-view" id="ref-for-gradle-executions-view③②">Gradle Executions view</a>.</p>
     <li data-md>
      <p>Inspect the results by navigating in the <a data-link-type="dfn" href="#model-explorer-view" id="ref-for-model-explorer-view④⑥">Model Explorer view</a> to the <code>basicfamily-model/build</code> folder. Right click on it and select Refresh. Navigate to the <code>basicfamily-model/build/results/cousins.json</code> file. Double-click to open it. You should see the following result:</p>
    </ol>
<pre class="language-json highlight"><c- p>{</c-> <c- f>"head"</c-><c- p>:</c-> <c- p>{</c->
    <c- f>"vars"</c-><c- p>:</c-> <c- p>[</c-> <c- u>"person"</c-> <c- p>,</c-> <c- u>"cousins"</c-> <c- p>]</c->
  <c- p>}</c-> <c- p>,</c->
  <c- f>"results"</c-><c- p>:</c-> <c- p>{</c->
    <c- f>"bindings"</c-><c- p>:</c-> <c- p>[</c->
      <c- p>{</c-> 
        <c- f>"person"</c-><c- p>:</c-> <c- p>{</c-> <c- f>"type"</c-><c- p>:</c-> <c- u>"uri"</c-> <c- p>,</c-> <c- f>"value"</c-><c- p>:</c-> <c- u>"http://example.com/description/family1#Alain"</c-> <c- p>}</c-> <c- p>,</c->
        <c- f>"cousins"</c-><c- p>:</c-> <c- p>{</c-> <c- f>"type"</c-><c- p>:</c-> <c- u>"literal"</c-> <c- p>,</c-> <c- f>"datatype"</c-><c- p>:</c-> <c- u>"http://www.w3.org/2001/XMLSchema#integer"</c-> <c- p>,</c-> <c- f>"value"</c-><c- p>:</c-> <c- u>"2"</c-> <c- p>}</c->
      <c- p>}</c-> <c- p>,</c->
      <c- p>{</c-> 
        <c- f>"person"</c-><c- p>:</c-> <c- p>{</c-> <c- f>"type"</c-><c- p>:</c-> <c- u>"uri"</c-> <c- p>,</c-> <c- f>"value"</c-><c- p>:</c-> <c- u>"http://example.com/description/family1#Albert"</c-> <c- p>}</c-> <c- p>,</c->
        <c- f>"cousins"</c-><c- p>:</c-> <c- p>{</c-> <c- f>"type"</c-><c- p>:</c-> <c- u>"literal"</c-> <c- p>,</c-> <c- f>"datatype"</c-><c- p>:</c-> <c- u>"http://www.w3.org/2001/XMLSchema#integer"</c-> <c- p>,</c-> <c- f>"value"</c-><c- p>:</c-> <c- u>"0"</c-> <c- p>}</c->
      <c- p>}</c-> <c- p>,</c->
      <c- p>{</c-> 
        <c- f>"person"</c-><c- p>:</c-> <c- p>{</c-> <c- f>"type"</c-><c- p>:</c-> <c- u>"uri"</c-> <c- p>,</c-> <c- f>"value"</c-><c- p>:</c-> <c- u>"http://example.com/description/family1#Bryan"</c-> <c- p>}</c-> <c- p>,</c->
        <c- f>"cousins"</c-><c- p>:</c-> <c- p>{</c-> <c- f>"type"</c-><c- p>:</c-> <c- u>"literal"</c-> <c- p>,</c-> <c- f>"datatype"</c-><c- p>:</c-> <c- u>"http://www.w3.org/2001/XMLSchema#integer"</c-> <c- p>,</c-> <c- f>"value"</c-><c- p>:</c-> <c- u>"0"</c-> <c- p>}</c->
      <c- p>}</c-> <c- p>,</c->
      <c- p>{</c-> 
        <c- f>"person"</c-><c- p>:</c-> <c- p>{</c-> <c- f>"type"</c-><c- p>:</c-> <c- u>"uri"</c-> <c- p>,</c-> <c- f>"value"</c-><c- p>:</c-> <c- u>"http://example.com/description/family1#Clara"</c-> <c- p>}</c-> <c- p>,</c->
        <c- f>"cousins"</c-><c- p>:</c-> <c- p>{</c-> <c- f>"type"</c-><c- p>:</c-> <c- u>"literal"</c-> <c- p>,</c-> <c- f>"datatype"</c-><c- p>:</c-> <c- u>"http://www.w3.org/2001/XMLSchema#integer"</c-> <c- p>,</c-> <c- f>"value"</c-><c- p>:</c-> <c- u>"0"</c-> <c- p>}</c->
      <c- p>}</c-> <c- p>,</c->
      <c- p>{</c-> 
        <c- f>"person"</c-><c- p>:</c-> <c- p>{</c-> <c- f>"type"</c-><c- p>:</c-> <c- u>"uri"</c-> <c- p>,</c-> <c- f>"value"</c-><c- p>:</c-> <c- u>"http://example.com/description/family1#Dave"</c-> <c- p>}</c-> <c- p>,</c->
        <c- f>"cousins"</c-><c- p>:</c-> <c- p>{</c-> <c- f>"type"</c-><c- p>:</c-> <c- u>"literal"</c-> <c- p>,</c-> <c- f>"datatype"</c-><c- p>:</c-> <c- u>"http://www.w3.org/2001/XMLSchema#integer"</c-> <c- p>,</c-> <c- f>"value"</c-><c- p>:</c-> <c- u>"0"</c-> <c- p>}</c->
      <c- p>}</c-> <c- p>,</c->
      <c- p>{</c-> 
        <c- f>"person"</c-><c- p>:</c-> <c- p>{</c-> <c- f>"type"</c-><c- p>:</c-> <c- u>"uri"</c-> <c- p>,</c-> <c- f>"value"</c-><c- p>:</c-> <c- u>"http://example.com/description/family1#Elias"</c-> <c- p>}</c-> <c- p>,</c->
        <c- f>"cousins"</c-><c- p>:</c-> <c- p>{</c-> <c- f>"type"</c-><c- p>:</c-> <c- u>"literal"</c-> <c- p>,</c-> <c- f>"datatype"</c-><c- p>:</c-> <c- u>"http://www.w3.org/2001/XMLSchema#integer"</c-> <c- p>,</c-> <c- f>"value"</c-><c- p>:</c-> <c- u>"0"</c-> <c- p>}</c->
      <c- p>}</c-> <c- p>,</c->
      <c- p>{</c-> 
        <c- f>"person"</c-><c- p>:</c-> <c- p>{</c-> <c- f>"type"</c-><c- p>:</c-> <c- u>"uri"</c-> <c- p>,</c-> <c- f>"value"</c-><c- p>:</c-> <c- u>"http://example.com/description/family1#Fiona"</c-> <c- p>}</c-> <c- p>,</c->
        <c- f>"cousins"</c-><c- p>:</c-> <c- p>{</c-> <c- f>"type"</c-><c- p>:</c-> <c- u>"literal"</c-> <c- p>,</c-> <c- f>"datatype"</c-><c- p>:</c-> <c- u>"http://www.w3.org/2001/XMLSchema#integer"</c-> <c- p>,</c-> <c- f>"value"</c-><c- p>:</c-> <c- u>"0"</c-> <c- p>}</c->
      <c- p>}</c-> <c- p>,</c->
      <c- p>{</c-> 
        <c- f>"person"</c-><c- p>:</c-> <c- p>{</c-> <c- f>"type"</c-><c- p>:</c-> <c- u>"uri"</c-> <c- p>,</c-> <c- f>"value"</c-><c- p>:</c-> <c- u>"http://example.com/description/family1#Isa"</c-> <c- p>}</c-> <c- p>,</c->
        <c- f>"cousins"</c-><c- p>:</c-> <c- p>{</c-> <c- f>"type"</c-><c- p>:</c-> <c- u>"literal"</c-> <c- p>,</c-> <c- f>"datatype"</c-><c- p>:</c-> <c- u>"http://www.w3.org/2001/XMLSchema#integer"</c-> <c- p>,</c-> <c- f>"value"</c-><c- p>:</c-> <c- u>"0"</c-> <c- p>}</c->
      <c- p>}</c-> <c- p>,</c->
      <c- p>{</c-> 
        <c- f>"person"</c-><c- p>:</c-> <c- p>{</c-> <c- f>"type"</c-><c- p>:</c-> <c- u>"uri"</c-> <c- p>,</c-> <c- f>"value"</c-><c- p>:</c-> <c- u>"http://example.com/description/family1#Jane"</c-> <c- p>}</c-> <c- p>,</c->
        <c- f>"cousins"</c-><c- p>:</c-> <c- p>{</c-> <c- f>"type"</c-><c- p>:</c-> <c- u>"literal"</c-> <c- p>,</c-> <c- f>"datatype"</c-><c- p>:</c-> <c- u>"http://www.w3.org/2001/XMLSchema#integer"</c-> <c- p>,</c-> <c- f>"value"</c-><c- p>:</c-> <c- u>"2"</c-> <c- p>}</c->
      <c- p>}</c-> <c- p>,</c->
      <c- p>{</c-> 
        <c- f>"person"</c-><c- p>:</c-> <c- p>{</c-> <c- f>"type"</c-><c- p>:</c-> <c- u>"uri"</c-> <c- p>,</c-> <c- f>"value"</c-><c- p>:</c-> <c- u>"http://example.com/description/family1#Katell"</c-> <c- p>}</c-> <c- p>,</c->
        <c- f>"cousins"</c-><c- p>:</c-> <c- p>{</c-> <c- f>"type"</c-><c- p>:</c-> <c- u>"literal"</c-> <c- p>,</c-> <c- f>"datatype"</c-><c- p>:</c-> <c- u>"http://www.w3.org/2001/XMLSchema#integer"</c-> <c- p>,</c-> <c- f>"value"</c-><c- p>:</c-> <c- u>"0"</c-> <c- p>}</c->
      <c- p>}</c-> <c- p>,</c->
      <c- p>{</c-> 
        <c- f>"person"</c-><c- p>:</c-> <c- p>{</c-> <c- f>"type"</c-><c- p>:</c-> <c- u>"uri"</c-> <c- p>,</c-> <c- f>"value"</c-><c- p>:</c-> <c- u>"http://example.com/description/family1#Lea"</c-> <c- p>}</c-> <c- p>,</c->
        <c- f>"cousins"</c-><c- p>:</c-> <c- p>{</c-> <c- f>"type"</c-><c- p>:</c-> <c- u>"literal"</c-> <c- p>,</c-> <c- f>"datatype"</c-><c- p>:</c-> <c- u>"http://www.w3.org/2001/XMLSchema#integer"</c-> <c- p>,</c-> <c- f>"value"</c-><c- p>:</c-> <c- u>"0"</c-> <c- p>}</c->
      <c- p>}</c-> <c- p>,</c->
      <c- p>{</c-> 
        <c- f>"person"</c-><c- p>:</c-> <c- p>{</c-> <c- f>"type"</c-><c- p>:</c-> <c- u>"uri"</c-> <c- p>,</c-> <c- f>"value"</c-><c- p>:</c-> <c- u>"http://example.com/description/family1#Paul"</c-> <c- p>}</c-> <c- p>,</c->
        <c- f>"cousins"</c-><c- p>:</c-> <c- p>{</c-> <c- f>"type"</c-><c- p>:</c-> <c- u>"literal"</c-> <c- p>,</c-> <c- f>"datatype"</c-><c- p>:</c-> <c- u>"http://www.w3.org/2001/XMLSchema#integer"</c-> <c- p>,</c-> <c- f>"value"</c-><c- p>:</c-> <c- u>"0"</c-> <c- p>}</c->
      <c- p>}</c-> <c- p>,</c->
      <c- p>{</c-> 
        <c- f>"person"</c-><c- p>:</c-> <c- p>{</c-> <c- f>"type"</c-><c- p>:</c-> <c- u>"uri"</c-> <c- p>,</c-> <c- f>"value"</c-><c- p>:</c-> <c- u>"http://example.com/description/family1#Peter"</c-> <c- p>}</c-> <c- p>,</c->
        <c- f>"cousins"</c-><c- p>:</c-> <c- p>{</c-> <c- f>"type"</c-><c- p>:</c-> <c- u>"literal"</c-> <c- p>,</c-> <c- f>"datatype"</c-><c- p>:</c-> <c- u>"http://www.w3.org/2001/XMLSchema#integer"</c-> <c- p>,</c-> <c- f>"value"</c-><c- p>:</c-> <c- u>"2"</c-> <c- p>}</c->
      <c- p>}</c->
    <c- p>]</c->
  <c- p>}</c->
<c- p>}</c->
</pre>
    <ol start="10">
     <li data-md>
      <p>Verify this result against the info in the <code>Persons diagram</code>.</p>
      <p><img src="assets/tutorial5/Cousins-Diagram.png" style="border:1px groove black;" width="100%"></p>
    </ol>
    <blockquote>
     <p>Notice that the <code>cousin</code> relation is not asserted in the model but is derived by query. This suggests that every query that needs to match cousins would need to incorporate the same derivation logic, which could potentially make them both complex to write and costly to run. Besides, if this relation matters for logical reasoning (e.g., if you want to consider cousins marrying to be inconsistent), then you may want to add it to the vocabulary explicitly but still derive it by a rule.</p>
    </blockquote>
    <ol start="11">
     <li data-md>
      <p>In the <a data-link-type="dfn" href="#model-explorer-view" id="ref-for-model-explorer-view④⑦">Model Explorer view</a>, navigate to <code>basicfamily-model/src/oml/example.com/vocabulary/basicfamily.oml</code> and double click to open it.</p>
     <li data-md>
      <p>Add the following OML fragment to the end of the <code>basicfamily</code> vocabulary (before the closing braces):</p>
    </ol>
<pre class="language-scala highlight"><c- n>relation</c-> <c- n>cousin</c-> <c- p>[</c->
  <c- n>from</c-> <c- nc>Person</c->
  <c- n>to</c-> <c- nc>Person</c->
<c- p>]</c->

<c- n>rule</c-> <c- n>infer_couson</c-> <c- p>[</c->
  <c- n>parents</c-><c- p>(</c-><c- n>x</c-><c- p>,</c-> <c- n>y</c-><c- p>)</c-> <c- n>&amp;</c-> 
  <c- n>parents</c-><c- p>(</c-><c- n>y</c-><c- p>,</c-> <c- n>z</c-><c- p>)</c-> <c- n>&amp;</c-> 
  <c- n>children</c-><c- p>(</c-><c- n>z</c-><c- p>,</c-> <c- n>c</c-><c- p>)</c-> <c- n>&amp;</c-> 
  <c- n>differentFrom</c-><c- p>(</c-><c- n>c</c-><c- p>,</c-> <c- n>y</c-><c- p>)</c-> <c- n>&amp;</c->
  <c- n>children</c-><c- p>(</c-><c- n>c</c-><c- p>,</c-> <c- n>m</c-><c- p>)</c-> <c- o>-></c->
  <c- n>cousin</c-><c- p>(</c-><c- n>x</c-><c- p>,</c-> <c- n>m</c-><c- p>)</c->
<c- p>]</c->
</pre>
    <blockquote>
     <p>This basically adds the relation <code>cousin</code> to the vocabulary and provides a rule (equivalent to the query we saw previously) to infer it when the DL reasoner generate entailments. This makes the <code>cousin</code> axioms available directly as part of the dataset, which makes querying for them easier (as we will see) and usable by the reasoner when checking consistency. Of course, this comes at the expense of inflating the size of the dataset, which may or may not be a concern.</p>
    </blockquote>
    <ol start="13">
     <li data-md>
      <p>In the <a data-link-type="dfn" href="#model-explorer-view" id="ref-for-model-explorer-view④⑧">Model Explorer view</a>, navigate to <code>basicfamily-model/src/sparql/cousins.sparql</code> file and double click to open it. Replace the contents by:</p>
    </ol>
<pre class="language-sparql highlight"><c- k>PREFIX</c-> <c- nn>basicfamily</c-><c- p>:</c->        <c- nl>&lt;http://example.com/vocabulary/basicfamily#></c->

<c- k>SELECT</c-> <c- k>DISTINCT</c-> <c- g>?person</c-> <c- p>(</c-><c- nf>COUNT</c-><c- p>(</c-><c- g>?cousin</c-><c- p>)</c-> <c- k>as</c-> <c- g>?cousins</c-><c- p>)</c->
<c- k>WHERE</c-> <c- p>{</c->
  <c- g>?person</c-> <c- k>a</c-> <c- nn>basicfamily</c-><c- p>:</c-><c- f>Person</c-> <c- p>.</c->
  <c- k>OPTIONAL</c-> <c- p>{</c->
    <c- g>?person</c-> <c- nn>basicfamily</c-><c- p>:</c-><c- f>cousin</c-> <c- g>?cousin</c->
  <c- p>}</c->
<c- p>}</c->
<c- k>GROUP BY</c-> <c- g>?person</c->
<c- k>ORDER BY</c-> <c- g>?person</c->
</pre>
    <blockquote>
     <p>Notice, how the pattern for matching <code>cousin</code> is now direct (one hop).</p>
    </blockquote>
    <ol start="14">
     <li data-md>
      <p>Click in the <a data-link-type="dfn" href="#gradle-tasks-view" id="ref-for-gradle-tasks-view③⓪">Gradle Tasks view</a> and double click on the task <code>basicfamily-model/oml/owlQuery</code>. Execution runs in the <a data-link-type="dfn" href="#gradle-executions-view" id="ref-for-gradle-executions-view③③">Gradle Executions view</a>.</p>
     <li data-md>
      <p>Inspect the results in the <code>basicfamily-model/build/results/cousins.json</code> file. You should see the following result:</p>
    </ol>
<pre class="language-json highlight"><c- p>{</c-> <c- f>"head"</c-><c- p>:</c-> <c- p>{</c->
    <c- f>"vars"</c-><c- p>:</c-> <c- p>[</c-> <c- u>"person"</c-> <c- p>,</c-> <c- u>"cousins"</c-> <c- p>]</c->
  <c- p>}</c-> <c- p>,</c->
  <c- f>"results"</c-><c- p>:</c-> <c- p>{</c->
    <c- f>"bindings"</c-><c- p>:</c-> <c- p>[</c->
      <c- p>{</c-> 
        <c- f>"person"</c-><c- p>:</c-> <c- p>{</c-> <c- f>"type"</c-><c- p>:</c-> <c- u>"uri"</c-> <c- p>,</c-> <c- f>"value"</c-><c- p>:</c-> <c- u>"http://example.com/description/family1#Alain"</c-> <c- p>}</c-> <c- p>,</c->
        <c- f>"cousins"</c-><c- p>:</c-> <c- p>{</c-> <c- f>"type"</c-><c- p>:</c-> <c- u>"literal"</c-> <c- p>,</c-> <c- f>"datatype"</c-><c- p>:</c-> <c- u>"http://www.w3.org/2001/XMLSchema#integer"</c-> <c- p>,</c-> <c- f>"value"</c-><c- p>:</c-> <c- u>"0"</c-> <c- p>}</c->
      <c- p>}</c-> <c- p>,</c->
      <c- p>{</c-> 
        <c- f>"person"</c-><c- p>:</c-> <c- p>{</c-> <c- f>"type"</c-><c- p>:</c-> <c- u>"uri"</c-> <c- p>,</c-> <c- f>"value"</c-><c- p>:</c-> <c- u>"http://example.com/description/family1#Albert"</c-> <c- p>}</c-> <c- p>,</c->
        <c- f>"cousins"</c-><c- p>:</c-> <c- p>{</c-> <c- f>"type"</c-><c- p>:</c-> <c- u>"literal"</c-> <c- p>,</c-> <c- f>"datatype"</c-><c- p>:</c-> <c- u>"http://www.w3.org/2001/XMLSchema#integer"</c-> <c- p>,</c-> <c- f>"value"</c-><c- p>:</c-> <c- u>"0"</c-> <c- p>}</c->
      <c- p>}</c-> <c- p>,</c->
      <c- p>{</c-> 
        <c- f>"person"</c-><c- p>:</c-> <c- p>{</c-> <c- f>"type"</c-><c- p>:</c-> <c- u>"uri"</c-> <c- p>,</c-> <c- f>"value"</c-><c- p>:</c-> <c- u>"http://example.com/description/family1#Bryan"</c-> <c- p>}</c-> <c- p>,</c->
        <c- f>"cousins"</c-><c- p>:</c-> <c- p>{</c-> <c- f>"type"</c-><c- p>:</c-> <c- u>"literal"</c-> <c- p>,</c-> <c- f>"datatype"</c-><c- p>:</c-> <c- u>"http://www.w3.org/2001/XMLSchema#integer"</c-> <c- p>,</c-> <c- f>"value"</c-><c- p>:</c-> <c- u>"0"</c-> <c- p>}</c->
      <c- p>}</c-> <c- p>,</c->
      <c- p>{</c-> 
        <c- f>"person"</c-><c- p>:</c-> <c- p>{</c-> <c- f>"type"</c-><c- p>:</c-> <c- u>"uri"</c-> <c- p>,</c-> <c- f>"value"</c-><c- p>:</c-> <c- u>"http://example.com/description/family1#Clara"</c-> <c- p>}</c-> <c- p>,</c->
        <c- f>"cousins"</c-><c- p>:</c-> <c- p>{</c-> <c- f>"type"</c-><c- p>:</c-> <c- u>"literal"</c-> <c- p>,</c-> <c- f>"datatype"</c-><c- p>:</c-> <c- u>"http://www.w3.org/2001/XMLSchema#integer"</c-> <c- p>,</c-> <c- f>"value"</c-><c- p>:</c-> <c- u>"0"</c-> <c- p>}</c->
      <c- p>}</c-> <c- p>,</c->
      <c- p>{</c-> 
        <c- f>"person"</c-><c- p>:</c-> <c- p>{</c-> <c- f>"type"</c-><c- p>:</c-> <c- u>"uri"</c-> <c- p>,</c-> <c- f>"value"</c-><c- p>:</c-> <c- u>"http://example.com/description/family1#Dave"</c-> <c- p>}</c-> <c- p>,</c->
        <c- f>"cousins"</c-><c- p>:</c-> <c- p>{</c-> <c- f>"type"</c-><c- p>:</c-> <c- u>"literal"</c-> <c- p>,</c-> <c- f>"datatype"</c-><c- p>:</c-> <c- u>"http://www.w3.org/2001/XMLSchema#integer"</c-> <c- p>,</c-> <c- f>"value"</c-><c- p>:</c-> <c- u>"0"</c-> <c- p>}</c->
      <c- p>}</c-> <c- p>,</c->
      <c- p>{</c-> 
        <c- f>"person"</c-><c- p>:</c-> <c- p>{</c-> <c- f>"type"</c-><c- p>:</c-> <c- u>"uri"</c-> <c- p>,</c-> <c- f>"value"</c-><c- p>:</c-> <c- u>"http://example.com/description/family1#Elias"</c-> <c- p>}</c-> <c- p>,</c->
        <c- f>"cousins"</c-><c- p>:</c-> <c- p>{</c-> <c- f>"type"</c-><c- p>:</c-> <c- u>"literal"</c-> <c- p>,</c-> <c- f>"datatype"</c-><c- p>:</c-> <c- u>"http://www.w3.org/2001/XMLSchema#integer"</c-> <c- p>,</c-> <c- f>"value"</c-><c- p>:</c-> <c- u>"0"</c-> <c- p>}</c->
      <c- p>}</c-> <c- p>,</c->
      <c- p>{</c-> 
        <c- f>"person"</c-><c- p>:</c-> <c- p>{</c-> <c- f>"type"</c-><c- p>:</c-> <c- u>"uri"</c-> <c- p>,</c-> <c- f>"value"</c-><c- p>:</c-> <c- u>"http://example.com/description/family1#Fiona"</c-> <c- p>}</c-> <c- p>,</c->
        <c- f>"cousins"</c-><c- p>:</c-> <c- p>{</c-> <c- f>"type"</c-><c- p>:</c-> <c- u>"literal"</c-> <c- p>,</c-> <c- f>"datatype"</c-><c- p>:</c-> <c- u>"http://www.w3.org/2001/XMLSchema#integer"</c-> <c- p>,</c-> <c- f>"value"</c-><c- p>:</c-> <c- u>"0"</c-> <c- p>}</c->
      <c- p>}</c-> <c- p>,</c->
      <c- p>{</c-> 
        <c- f>"person"</c-><c- p>:</c-> <c- p>{</c-> <c- f>"type"</c-><c- p>:</c-> <c- u>"uri"</c-> <c- p>,</c-> <c- f>"value"</c-><c- p>:</c-> <c- u>"http://example.com/description/family1#Isa"</c-> <c- p>}</c-> <c- p>,</c->
        <c- f>"cousins"</c-><c- p>:</c-> <c- p>{</c-> <c- f>"type"</c-><c- p>:</c-> <c- u>"literal"</c-> <c- p>,</c-> <c- f>"datatype"</c-><c- p>:</c-> <c- u>"http://www.w3.org/2001/XMLSchema#integer"</c-> <c- p>,</c-> <c- f>"value"</c-><c- p>:</c-> <c- u>"0"</c-> <c- p>}</c->
      <c- p>}</c-> <c- p>,</c->
      <c- p>{</c-> 
        <c- f>"person"</c-><c- p>:</c-> <c- p>{</c-> <c- f>"type"</c-><c- p>:</c-> <c- u>"uri"</c-> <c- p>,</c-> <c- f>"value"</c-><c- p>:</c-> <c- u>"http://example.com/description/family1#Jane"</c-> <c- p>}</c-> <c- p>,</c->
        <c- f>"cousins"</c-><c- p>:</c-> <c- p>{</c-> <c- f>"type"</c-><c- p>:</c-> <c- u>"literal"</c-> <c- p>,</c-> <c- f>"datatype"</c-><c- p>:</c-> <c- u>"http://www.w3.org/2001/XMLSchema#integer"</c-> <c- p>,</c-> <c- f>"value"</c-><c- p>:</c-> <c- u>"0"</c-> <c- p>}</c->
      <c- p>}</c-> <c- p>,</c->
      <c- p>{</c-> 
        <c- f>"person"</c-><c- p>:</c-> <c- p>{</c-> <c- f>"type"</c-><c- p>:</c-> <c- u>"uri"</c-> <c- p>,</c-> <c- f>"value"</c-><c- p>:</c-> <c- u>"http://example.com/description/family1#Katell"</c-> <c- p>}</c-> <c- p>,</c->
        <c- f>"cousins"</c-><c- p>:</c-> <c- p>{</c-> <c- f>"type"</c-><c- p>:</c-> <c- u>"literal"</c-> <c- p>,</c-> <c- f>"datatype"</c-><c- p>:</c-> <c- u>"http://www.w3.org/2001/XMLSchema#integer"</c-> <c- p>,</c-> <c- f>"value"</c-><c- p>:</c-> <c- u>"0"</c-> <c- p>}</c->
      <c- p>}</c-> <c- p>,</c->
      <c- p>{</c-> 
        <c- f>"person"</c-><c- p>:</c-> <c- p>{</c-> <c- f>"type"</c-><c- p>:</c-> <c- u>"uri"</c-> <c- p>,</c-> <c- f>"value"</c-><c- p>:</c-> <c- u>"http://example.com/description/family1#Lea"</c-> <c- p>}</c-> <c- p>,</c->
        <c- f>"cousins"</c-><c- p>:</c-> <c- p>{</c-> <c- f>"type"</c-><c- p>:</c-> <c- u>"literal"</c-> <c- p>,</c-> <c- f>"datatype"</c-><c- p>:</c-> <c- u>"http://www.w3.org/2001/XMLSchema#integer"</c-> <c- p>,</c-> <c- f>"value"</c-><c- p>:</c-> <c- u>"0"</c-> <c- p>}</c->
      <c- p>}</c-> <c- p>,</c->
      <c- p>{</c-> 
        <c- f>"person"</c-><c- p>:</c-> <c- p>{</c-> <c- f>"type"</c-><c- p>:</c-> <c- u>"uri"</c-> <c- p>,</c-> <c- f>"value"</c-><c- p>:</c-> <c- u>"http://example.com/description/family1#Paul"</c-> <c- p>}</c-> <c- p>,</c->
        <c- f>"cousins"</c-><c- p>:</c-> <c- p>{</c-> <c- f>"type"</c-><c- p>:</c-> <c- u>"literal"</c-> <c- p>,</c-> <c- f>"datatype"</c-><c- p>:</c-> <c- u>"http://www.w3.org/2001/XMLSchema#integer"</c-> <c- p>,</c-> <c- f>"value"</c-><c- p>:</c-> <c- u>"0"</c-> <c- p>}</c->
      <c- p>}</c-> <c- p>,</c->
      <c- p>{</c-> 
        <c- f>"person"</c-><c- p>:</c-> <c- p>{</c-> <c- f>"type"</c-><c- p>:</c-> <c- u>"uri"</c-> <c- p>,</c-> <c- f>"value"</c-><c- p>:</c-> <c- u>"http://example.com/description/family1#Peter"</c-> <c- p>}</c-> <c- p>,</c->
        <c- f>"cousins"</c-><c- p>:</c-> <c- p>{</c-> <c- f>"type"</c-><c- p>:</c-> <c- u>"literal"</c-> <c- p>,</c-> <c- f>"datatype"</c-><c- p>:</c-> <c- u>"http://www.w3.org/2001/XMLSchema#integer"</c-> <c- p>,</c-> <c- f>"value"</c-><c- p>:</c-> <c- u>"0"</c-> <c- p>}</c->
      <c- p>}</c->
    <c- p>]</c->
  <c- p>}</c->
<c- p>}</c->
</pre>
    <blockquote>
     <p>Opps, this result is unexpected. Why were no cousins found? If you look more closely at the <code>infer_cousin</code> rule (above) again, you will see that it uses the standard <code>differentFrom</code> predicate to ensure that a parent is not matched again as an uncle or an aunt (children of a grandparent). So where is the problem? The problem can be explained by the fact that the vocabulary, as defined, lacks a way to make a person different from another person. Having different names is not by itself sufficient, since a DL reasoner may infer that they are just aliases to the same individual. So how do we fix this? We need to either add a <code>key</code> axiom to the <code>Person</code> aspect to say that one (or more) of its properties should be considered as a unique key. Alternatively, we can configure the DL reason to use the <code>Unique Name Assumption</code> by turning on the <code>uniqueNames</code> option on the <code>owlReason</code> task in the <code>build.gradle</code> script. Since we demonstrated the use of keys in <a href="#tutorial1">Tutorial 1</a> already, we will use the second method here.</p>
    </blockquote>
    <ol start="16">
     <li data-md>
      <p>In the <a data-link-type="dfn" href="#model-explorer-view" id="ref-for-model-explorer-view④⑨">Model Explorer view</a>, navigate to <code>basicfamily-model/build.gradle</code> file and double click to open it. Find the <code>owlReason</code> task and set the <code>uniqueNames</code> flag to <code>true</code> as follows:</p>
    </ol>
<pre class="language-scala highlight"><c- n>task</c-> <c- n>owlReason</c-><c- p>(</c-><c- k>type</c-><c- nc>:</c-><c- n>io</c-><c- p>.</c-><c- n>opencaesar</c-><c- p>.</c-><c- n>owl</c-><c- p>.</c-><c- n>reason</c-><c- p>.</c-><c- nc>OwlReasonTask</c-><c- p>,</c-> <c- n>group</c-><c- p>:</c-><c- s>"oml"</c-><c- p>,</c-> <c- n>dependsOn</c-><c- p>:</c-> <c- n>omlToOwl</c-><c- p>)</c-> <c- p>{</c->
   <c- p>...</c->
    <c- c1>// use unique name assumption</c->
    <c- n>uniqueNames</c-> <c- o>=</c-> <c- kc>true</c->
<c- p>}</c->
</pre>
    <ol start="17">
     <li data-md>
      <p>Rerun the task <code>basicfamily-model/oml/owlQuery</code> and inspect the results in the <code>basicfamily-model/build/results/cousins.json</code> file. You should see the following correct result now:</p>
    </ol>
<pre class="language-json highlight"><c- p>{</c-> <c- f>"head"</c-><c- p>:</c-> <c- p>{</c->
    <c- f>"vars"</c-><c- p>:</c-> <c- p>[</c-> <c- u>"person"</c-> <c- p>,</c-> <c- u>"cousins"</c-> <c- p>]</c->
  <c- p>}</c-> <c- p>,</c->
  <c- f>"results"</c-><c- p>:</c-> <c- p>{</c->
    <c- f>"bindings"</c-><c- p>:</c-> <c- p>[</c->
      <c- p>{</c-> 
        <c- f>"person"</c-><c- p>:</c-> <c- p>{</c-> <c- f>"type"</c-><c- p>:</c-> <c- u>"uri"</c-> <c- p>,</c-> <c- f>"value"</c-><c- p>:</c-> <c- u>"http://example.com/description/family1#Alain"</c-> <c- p>}</c-> <c- p>,</c->
        <c- f>"cousins"</c-><c- p>:</c-> <c- p>{</c-> <c- f>"type"</c-><c- p>:</c-> <c- u>"literal"</c-> <c- p>,</c-> <c- f>"datatype"</c-><c- p>:</c-> <c- u>"http://www.w3.org/2001/XMLSchema#integer"</c-> <c- p>,</c-> <c- f>"value"</c-><c- p>:</c-> <c- u>"2"</c-> <c- p>}</c->
      <c- p>}</c-> <c- p>,</c->
      <c- p>{</c-> 
        <c- f>"person"</c-><c- p>:</c-> <c- p>{</c-> <c- f>"type"</c-><c- p>:</c-> <c- u>"uri"</c-> <c- p>,</c-> <c- f>"value"</c-><c- p>:</c-> <c- u>"http://example.com/description/family1#Albert"</c-> <c- p>}</c-> <c- p>,</c->
        <c- f>"cousins"</c-><c- p>:</c-> <c- p>{</c-> <c- f>"type"</c-><c- p>:</c-> <c- u>"literal"</c-> <c- p>,</c-> <c- f>"datatype"</c-><c- p>:</c-> <c- u>"http://www.w3.org/2001/XMLSchema#integer"</c-> <c- p>,</c-> <c- f>"value"</c-><c- p>:</c-> <c- u>"0"</c-> <c- p>}</c->
      <c- p>}</c-> <c- p>,</c->
      <c- p>{</c-> 
        <c- f>"person"</c-><c- p>:</c-> <c- p>{</c-> <c- f>"type"</c-><c- p>:</c-> <c- u>"uri"</c-> <c- p>,</c-> <c- f>"value"</c-><c- p>:</c-> <c- u>"http://example.com/description/family1#Bryan"</c-> <c- p>}</c-> <c- p>,</c->
        <c- f>"cousins"</c-><c- p>:</c-> <c- p>{</c-> <c- f>"type"</c-><c- p>:</c-> <c- u>"literal"</c-> <c- p>,</c-> <c- f>"datatype"</c-><c- p>:</c-> <c- u>"http://www.w3.org/2001/XMLSchema#integer"</c-> <c- p>,</c-> <c- f>"value"</c-><c- p>:</c-> <c- u>"0"</c-> <c- p>}</c->
      <c- p>}</c-> <c- p>,</c->
      <c- p>{</c-> 
        <c- f>"person"</c-><c- p>:</c-> <c- p>{</c-> <c- f>"type"</c-><c- p>:</c-> <c- u>"uri"</c-> <c- p>,</c-> <c- f>"value"</c-><c- p>:</c-> <c- u>"http://example.com/description/family1#Clara"</c-> <c- p>}</c-> <c- p>,</c->
        <c- f>"cousins"</c-><c- p>:</c-> <c- p>{</c-> <c- f>"type"</c-><c- p>:</c-> <c- u>"literal"</c-> <c- p>,</c-> <c- f>"datatype"</c-><c- p>:</c-> <c- u>"http://www.w3.org/2001/XMLSchema#integer"</c-> <c- p>,</c-> <c- f>"value"</c-><c- p>:</c-> <c- u>"0"</c-> <c- p>}</c->
      <c- p>}</c-> <c- p>,</c->
      <c- p>{</c-> 
        <c- f>"person"</c-><c- p>:</c-> <c- p>{</c-> <c- f>"type"</c-><c- p>:</c-> <c- u>"uri"</c-> <c- p>,</c-> <c- f>"value"</c-><c- p>:</c-> <c- u>"http://example.com/description/family1#Dave"</c-> <c- p>}</c-> <c- p>,</c->
        <c- f>"cousins"</c-><c- p>:</c-> <c- p>{</c-> <c- f>"type"</c-><c- p>:</c-> <c- u>"literal"</c-> <c- p>,</c-> <c- f>"datatype"</c-><c- p>:</c-> <c- u>"http://www.w3.org/2001/XMLSchema#integer"</c-> <c- p>,</c-> <c- f>"value"</c-><c- p>:</c-> <c- u>"0"</c-> <c- p>}</c->
      <c- p>}</c-> <c- p>,</c->
      <c- p>{</c-> 
        <c- f>"person"</c-><c- p>:</c-> <c- p>{</c-> <c- f>"type"</c-><c- p>:</c-> <c- u>"uri"</c-> <c- p>,</c-> <c- f>"value"</c-><c- p>:</c-> <c- u>"http://example.com/description/family1#Elias"</c-> <c- p>}</c-> <c- p>,</c->
        <c- f>"cousins"</c-><c- p>:</c-> <c- p>{</c-> <c- f>"type"</c-><c- p>:</c-> <c- u>"literal"</c-> <c- p>,</c-> <c- f>"datatype"</c-><c- p>:</c-> <c- u>"http://www.w3.org/2001/XMLSchema#integer"</c-> <c- p>,</c-> <c- f>"value"</c-><c- p>:</c-> <c- u>"0"</c-> <c- p>}</c->
      <c- p>}</c-> <c- p>,</c->
      <c- p>{</c-> 
        <c- f>"person"</c-><c- p>:</c-> <c- p>{</c-> <c- f>"type"</c-><c- p>:</c-> <c- u>"uri"</c-> <c- p>,</c-> <c- f>"value"</c-><c- p>:</c-> <c- u>"http://example.com/description/family1#Fiona"</c-> <c- p>}</c-> <c- p>,</c->
        <c- f>"cousins"</c-><c- p>:</c-> <c- p>{</c-> <c- f>"type"</c-><c- p>:</c-> <c- u>"literal"</c-> <c- p>,</c-> <c- f>"datatype"</c-><c- p>:</c-> <c- u>"http://www.w3.org/2001/XMLSchema#integer"</c-> <c- p>,</c-> <c- f>"value"</c-><c- p>:</c-> <c- u>"0"</c-> <c- p>}</c->
      <c- p>}</c-> <c- p>,</c->
      <c- p>{</c-> 
        <c- f>"person"</c-><c- p>:</c-> <c- p>{</c-> <c- f>"type"</c-><c- p>:</c-> <c- u>"uri"</c-> <c- p>,</c-> <c- f>"value"</c-><c- p>:</c-> <c- u>"http://example.com/description/family1#Isa"</c-> <c- p>}</c-> <c- p>,</c->
        <c- f>"cousins"</c-><c- p>:</c-> <c- p>{</c-> <c- f>"type"</c-><c- p>:</c-> <c- u>"literal"</c-> <c- p>,</c-> <c- f>"datatype"</c-><c- p>:</c-> <c- u>"http://www.w3.org/2001/XMLSchema#integer"</c-> <c- p>,</c-> <c- f>"value"</c-><c- p>:</c-> <c- u>"0"</c-> <c- p>}</c->
      <c- p>}</c-> <c- p>,</c->
      <c- p>{</c-> 
        <c- f>"person"</c-><c- p>:</c-> <c- p>{</c-> <c- f>"type"</c-><c- p>:</c-> <c- u>"uri"</c-> <c- p>,</c-> <c- f>"value"</c-><c- p>:</c-> <c- u>"http://example.com/description/family1#Jane"</c-> <c- p>}</c-> <c- p>,</c->
        <c- f>"cousins"</c-><c- p>:</c-> <c- p>{</c-> <c- f>"type"</c-><c- p>:</c-> <c- u>"literal"</c-> <c- p>,</c-> <c- f>"datatype"</c-><c- p>:</c-> <c- u>"http://www.w3.org/2001/XMLSchema#integer"</c-> <c- p>,</c-> <c- f>"value"</c-><c- p>:</c-> <c- u>"2"</c-> <c- p>}</c->
      <c- p>}</c-> <c- p>,</c->
      <c- p>{</c-> 
        <c- f>"person"</c-><c- p>:</c-> <c- p>{</c-> <c- f>"type"</c-><c- p>:</c-> <c- u>"uri"</c-> <c- p>,</c-> <c- f>"value"</c-><c- p>:</c-> <c- u>"http://example.com/description/family1#Katell"</c-> <c- p>}</c-> <c- p>,</c->
        <c- f>"cousins"</c-><c- p>:</c-> <c- p>{</c-> <c- f>"type"</c-><c- p>:</c-> <c- u>"literal"</c-> <c- p>,</c-> <c- f>"datatype"</c-><c- p>:</c-> <c- u>"http://www.w3.org/2001/XMLSchema#integer"</c-> <c- p>,</c-> <c- f>"value"</c-><c- p>:</c-> <c- u>"0"</c-> <c- p>}</c->
      <c- p>}</c-> <c- p>,</c->
      <c- p>{</c-> 
        <c- f>"person"</c-><c- p>:</c-> <c- p>{</c-> <c- f>"type"</c-><c- p>:</c-> <c- u>"uri"</c-> <c- p>,</c-> <c- f>"value"</c-><c- p>:</c-> <c- u>"http://example.com/description/family1#Lea"</c-> <c- p>}</c-> <c- p>,</c->
        <c- f>"cousins"</c-><c- p>:</c-> <c- p>{</c-> <c- f>"type"</c-><c- p>:</c-> <c- u>"literal"</c-> <c- p>,</c-> <c- f>"datatype"</c-><c- p>:</c-> <c- u>"http://www.w3.org/2001/XMLSchema#integer"</c-> <c- p>,</c-> <c- f>"value"</c-><c- p>:</c-> <c- u>"0"</c-> <c- p>}</c->
      <c- p>}</c-> <c- p>,</c->
      <c- p>{</c-> 
        <c- f>"person"</c-><c- p>:</c-> <c- p>{</c-> <c- f>"type"</c-><c- p>:</c-> <c- u>"uri"</c-> <c- p>,</c-> <c- f>"value"</c-><c- p>:</c-> <c- u>"http://example.com/description/family1#Paul"</c-> <c- p>}</c-> <c- p>,</c->
        <c- f>"cousins"</c-><c- p>:</c-> <c- p>{</c-> <c- f>"type"</c-><c- p>:</c-> <c- u>"literal"</c-> <c- p>,</c-> <c- f>"datatype"</c-><c- p>:</c-> <c- u>"http://www.w3.org/2001/XMLSchema#integer"</c-> <c- p>,</c-> <c- f>"value"</c-><c- p>:</c-> <c- u>"0"</c-> <c- p>}</c->
      <c- p>}</c-> <c- p>,</c->
      <c- p>{</c-> 
        <c- f>"person"</c-><c- p>:</c-> <c- p>{</c-> <c- f>"type"</c-><c- p>:</c-> <c- u>"uri"</c-> <c- p>,</c-> <c- f>"value"</c-><c- p>:</c-> <c- u>"http://example.com/description/family1#Peter"</c-> <c- p>}</c-> <c- p>,</c->
        <c- f>"cousins"</c-><c- p>:</c-> <c- p>{</c-> <c- f>"type"</c-><c- p>:</c-> <c- u>"literal"</c-> <c- p>,</c-> <c- f>"datatype"</c-><c- p>:</c-> <c- u>"http://www.w3.org/2001/XMLSchema#integer"</c-> <c- p>,</c-> <c- f>"value"</c-><c- p>:</c-> <c- u>"2"</c-> <c- p>}</c->
      <c- p>}</c->
    <c- p>]</c->
  <c- p>}</c->
<c- p>}</c->
</pre>
    <h3 class="heading settled" data-level="5.9" id="tutorial5-summary"><span class="secno">5.9. </span><span class="content">Summary</span><a class="self-link" href="#tutorial5-summary"></a></h3>
    <p>In this comprehensive tutorial, we’ve delved into some captivating facets of OML. Firstly, while OML’s textual syntax offers a highly convenient means of working with the language, it’s important to note that it’s not the sole method available to OML modelers. OML Rosetta takes the experience a step further by furnishing ready-made graphical views (diagrams) for both authoring and viewing OML models. What’s truly remarkable is that these graphical and textual views remain in perfect harmony, allowing modelers to seamlessly switch between them without missing a beat.</p>
    <p>Furthermore, OML Rosetta empowers users with the ability to craft custom views, leveraging the robust <a href="https://eclipse.dev/sirius/">Sirius</a> framework. These custom views can encompass diagrams, tables, and more, all designed to enhance the user experience and make it more accessible. Imagine the potential here – not only can this feature be used to create specialized, methodology-specific views that guide users through systematically describing their systems, step by step (akin to the approach we outlined in <a href="#tutorial2">Tutorial 2</a>), but these views also stay impeccably synchronized since they stem from the same semantic models.</p>
    <p>Lastly, we revisited the remarkable analytical capabilities that OML brings to the table. While certain analyses can be effortlessly integrated into the authoring views – as exemplified by our demonstration of computing sibling counts within the table view using the OML Java API – OML’s true power lies in its capacity to infer axioms using OML rules and subsequently query these axioms with SPARQL queries. This not only grants methodologists unparalleled control over vocabulary expressiveness, dataset size, and analysis performance but also opens the door to more intricate and potent analyses. With OML, the potential for robust, insightful modeling and analysis knows no bounds.</p>
    <h2 class="heading settled" data-level="6" id="tutorial6"><span class="secno">6. </span><span class="content">Tutorial 6: OML Federation</span><a class="self-link" href="#tutorial6"></a></h2>
    <p class="note" role="note"><span class="marker">Note:</span> This tutorial builds on the skills learned in <a href="#tutorial2">Tutorial 2</a>. Please do that first before proceeding.</p>
    <h3 class="heading settled" data-level="6.1" id="tutorial6-learning-objectives"><span class="secno">6.1. </span><span class="content">Learning Objectives</span><a class="self-link" href="#tutorial6-learning-objectives"></a></h3>
    <p>This tutorial illustrates the utilization of OML in a federated approach for modeling and analyzing systems. In this context, <code>federation</code> entails the distribution of a model across distinct projects, which may reside in different repositories, encompass various concerns, and be overseen by different authorities. Within this federated framework, these projects establish dependencies on one another to import their artifacts, typically in the form of archives or models and analyses. This strategic approach not only facilitates the clear demarcation of concerns by defining well-defined boundaries but also enhances collaborative efforts. It enables concurrent work processes and allows for synchronized planning, fostering efficient teamwork.</p>
    <p>Furthermore, we will employ a compelling real-world scenario to highlight the concept of federation support. Our illustrative scenario revolves around a home security system. Initially, an acquiring organization designs the system at an abstract level using a specific methodology. Subsequently, distinct components of this architectural design are entrusted to various suppliers for implementation with tangible, concrete components. Finally, the acquiring organization orchestrates the integration of these concrete components, utilizing the established architecture, and conducts a comprehensive analysis of this integrated system.</p>
    <p>Upon completing this tutorial, you will gain the following essential skills:</p>
    <ul>
     <li data-md>
      <p>Applying federation to distribute OML models across different projects (possibly in separate repositories) managed by different entities.</p>
     <li data-md>
      <p>Establishing dependencies between projects to import other projects' artifacts, fostering modularity and collaboration.</p>
     <li data-md>
      <p>Publishing artifacts from projects with semantic versions that communicate to downstream dependencies about the impact of change on those versions.</p>
    </ul>
    <blockquote>
     <p>Although the tutorial provides insights into leveraging federation for efficient modeling, collaboration, and system analysis in a representative project, it is not the intention of this tutorial to suggest a particular federation strategy. This is a matter of methodology, which is an orthogonal concern.</p>
    </blockquote>
    <p class="note" role="note"><span class="marker">Note:</span> The source files created in this tutorial are available for reference in this <a href="https://github.com/opencaesar/homesecurity-example">repository</a>, but we encourage the reader to recreate them by following the instructions below.</p>
    <h3 class="heading settled" data-level="6.2" id="tutorial6-introduction-to-federation"><span class="secno">6.2. </span><span class="content">Introduction to Federation</span><a class="self-link" href="#tutorial6-introduction-to-federation"></a></h3>
    <p>OML federation can be implemented in one of the following (incrementally-federated) styles:</p>
    <ol>
     <li data-md>
      <p>OML sub projects of a common parent, depend on each other directly, managed in a single repo.</p>
     <li data-md>
      <p>OML sub projects of a common parent, depend on each other through Maven, managed in a single repo.</p>
     <li data-md>
      <p>OML projects are all root, depend on each other through Maven, managed in a single repo.</p>
     <li data-md>
      <p>OML projects are all root, depend on each other through Maven, managed in different repos.</p>
    </ol>
    <p>We will primarily follow style 1 in our demonstration of the home security example. We will then note the differences needed for other styles at the end.</p>
    <p>The following specific OML projects will be created for the example:</p>
    <ol>
     <li data-md>
      <p><strong>Parent</strong>: used to nest the sub projects and facilitate their direct inter-dependencies.</p>
     <li data-md>
      <p><strong>Methodology</strong>: used to define the vocabulary for the systems modeling methodology.</p>
     <li data-md>
      <p><strong>Home Security</strong>: used to define an abstract security system architecture (depends on 2).</p>
     <li data-md>
      <p><strong>Smart Sensors</strong>: used to realize the sensor components by the Smart supplier (depends on 3).</p>
     <li data-md>
      <p><strong>Safe Alarms</strong>: used to realize the alarm system by the Safe supplier (depends on 3).</p>
     <li data-md>
      <p><strong>Supreme Monitors</strong>: used to realize the monitoring system by the Supreme supplier (depends on 3).</p>
     <li data-md>
      <p><strong>Secure Systems</strong>: used to integrate realized components by the Secure acquirer (depends on 4, 5, 6).</p>
    </ol>
    <p>The above dependencies reflect our federation strategy. First, we define the system modeling methodology we will use. After that, we use the methodology to define an architecture for a home security system at an abstract level identifying the main components and their characteristics, interrelations, and constraints. Then, we give each component to a supplier to realize it in a way that conforms to the abstract architecture. Finally, a system integrator/acquirer (e.g., an OEM, a solution provider) integrates the realized components into a realization architecture and analyzes its conformance to the abstract architecture.</p>
    <h3 class="heading settled" data-level="6.3" id="tutorial6-create-federated-projects"><span class="secno">6.3. </span><span class="content">Create Federated Projects</span><a class="self-link" href="#tutorial6-create-federated-projects"></a></h3>
    <p>In this step, we will create all the projects of the example and configure their inter-dependencies as specified above.</p>
    <blockquote>
     <p>We will use the <code>Project Explorer</code> view as it supports project nesting better than the <a data-link-type="dfn" href="#model-explorer-view" id="ref-for-model-explorer-view⑤⓪">Model Explorer view</a>. If not already visible, from the menu, select Window -> Show View -> Other ..., search for 'Project Explorer', select it and click Open.</p>
    </blockquote>
    <p><img src="assets/tutorial6/Project-Explorer.png" style="border:1px groove black;" width="100%"></p>
    <p><strong>Parent Project</strong></p>
    <ol>
     <li data-md>
      <p>In Project Explorer view, right click to choose New -> Other ... -> Gradle -> Gradle Project.</p>
    </ol>
    <blockquote>
     <p>Recall that an OML project is itself a Gradle project, hence can be nested in a parent Gradle project.</p>
    </blockquote>
    <ol start="2">
     <li data-md>
      <p>Click Next a couple of times to get to the New Gradle Project page. Specify the project name as <code>homesecurity-models</code>. Click Finish.</p>
     <li data-md>
      <p>Expand the project in the Project Explorer view, right click on the nested <code>libs</code> folder and choose Delete. Check the box "Delete project contents on disk" and click OK.</p>
     <li data-md>
      <p>Navigate to the <code>settings.gradle</code> file in Project Explorer, double click to open it.  Remove the include('lib') line. Instead, insert the following lines. Save and close the editor.</p>
<pre>include 'Methodology'
include 'HomeSecurity'
include 'SmartSensors'
include 'SafeAlarms'
include 'SupremeMonitors'
include 'SecureSystems'
</pre>
      <p><img src="assets/tutorial6/Parent-Project.png" style="border:1px groove black;" width="100%"></p>
    </ol>
    <p><strong>Methodology Project</strong></p>
    <ol start="5">
     <li data-md>
      <p>In Project Explorer view, right click to choose New -> OML Project. Specify the project name as <code>Methodology</code>.</p>
     <li data-md>
      <p>Uncheck the <code>Use default location</code> box, browse to the folder of the parent project and click Open. Append <code>/Methodology</code> to the path. Click Next.</p>
     <li data-md>
      <p>Specify the project properties as follows, then click Finish.</p>
<pre>Base IRI: http://example.com/methodology
Bundle Kind: Vocabulary
Bundle Namespace: http://example.com/methodology/bundle#
Title: Methodology
Description: This is the methodology example
</pre>
    </ol>
    <p class="note" role="note"><span class="marker">Note:</span> If you get a <em>Problem Occurred</em> message box, it’s a known issue. Click on OK to simply dismiss it.</p>
    <blockquote>
     <p>Although we define the methodology in a single project here, it could itself be federated into multiple projects. It is also common for a methodology to extend from other established (public or private) methodologies, in which case it would declare dependencies on them.</p>
    </blockquote>
    <p><strong>HomeSecurity Project</strong></p>
    <ol start="8">
     <li data-md>
      <p>In Project Explorer view, right click to choose New -> OML Project. Specify the project name as <code>HomeSecurity</code>.</p>
     <li data-md>
      <p>Uncheck the <code>Use default location</code> box, browse to the folder of the parent project and click Open. Append <code>/HomeSecurity</code> to the path. Click Next.</p>
     <li data-md>
      <p>Specify the project properties as follows, then click Finish.</p>
<pre>Base IRI: http://example.com/homesecurity
Bundle Kind: Description
Bundle Namespace: http://example.com/homesecurity/bundle#
Title: Home Security
Description: This is the home security example
</pre>
     <li data-md>
      <p>Expand the new <code>HomeSecurity</code> project and double click to open <code>build.gradle</code> file.</p>
     <li data-md>
      <p>Navigate to the <code>dependencies</code> section (right above <code>downloadDependencies</code> task), replace the default dependency with <code>oml project(':Methodology')</code>.</p>
      <p><img src="assets/tutorial6/Subproject-Dependencies.png" style="border:1px groove black;" width="100%"></p>
    </ol>
    <p><strong>SmartSensors Project</strong></p>
    <ol start="13">
     <li data-md>
      <p>In Project Explorer view, right click to choose New -> OML Project. Specify the project name as <code>SmartSensors</code>.</p>
     <li data-md>
      <p>Uncheck the <code>Use default location</code> box, browse to the folder of the parent project and click Open. Append <code>/SmartSensors</code> to the path. Click Next.</p>
     <li data-md>
      <p>Specify the project properties as follows, then click Finish.</p>
<pre>Base IRI: http://example.com/smart
Bundle Kind: Vocabulary
Bundle Namespace: http://example.com/smart/bundle#
Title: Smart Sensors
Description: This is the Smart sensors example
</pre>
     <li data-md>
      <p>Expand the new <code>SmartSensors</code> project and double click to open <code>build.gradle</code> file.</p>
     <li data-md>
      <p>Navigate to the <code>dependencies</code> section (right above <code>downloadDependencies</code> task), replace the default dependency with <code>oml project(':HomeSecurity')</code>.</p>
    </ol>
    <p><strong>SafeAlarms Project</strong></p>
    <ol start="18">
     <li data-md>
      <p>In Project Explorer view, right click to choose New -> OML Project. Specify the project name as <code>SafeAlarms</code>.</p>
     <li data-md>
      <p>Uncheck the <code>Use default location</code> box, browse to the folder of the parent project and click Open. Append <code>/SafeAlarms</code> to the path. Click Next.</p>
     <li data-md>
      <p>Specify the project properties as follows, then click Finish.</p>
<pre>Base IRI: http://example.com/safe
Bundle Kind: Vocabulary
Bundle Namespace: http://example.com/safe/bundle#
Title: Safe Alarms
Description: This is the Safe alarms example
</pre>
     <li data-md>
      <p>Expand the new <code>SafeAlarms</code> project and double click to open <code>build.gradle</code> file.</p>
     <li data-md>
      <p>Navigate to the <code>dependencies</code> section (right above <code>downloadDependencies</code> task), replace the default dependency with <code>oml project(':HomeSecurity')</code>.</p>
    </ol>
    <p><strong>SupremeMonitors Project</strong></p>
    <ol start="23">
     <li data-md>
      <p>In Project Explorer view, right click to choose New -> OML Project. Specify the project name as <code>SupremeMonitors</code>.</p>
     <li data-md>
      <p>Uncheck the <code>Use default location</code> box, browse to the folder of the parent project and click Open. Append <code>/SupremeMonitors</code> to the path. Click Next.</p>
     <li data-md>
      <p>Specify the project properties as follows, then click Finish.</p>
<pre>Base IRI: http://example.com/supreme
Bundle Kind: Vocabulary
Bundle Namespace: http://example.com/supreme/bundle#
Title: Supreme Monitors
Description: This is the Supreme monitors example
</pre>
     <li data-md>
      <p>Expand the new <code>SupremeMonitors</code> project and double click to open <code>build.gradle</code> file.</p>
     <li data-md>
      <p>Navigate to the <code>dependencies</code> section (right above <code>downloadDependencies</code> task), replace the default dependency with <code>oml project(':HomeSecurity')</code>.</p>
    </ol>
    <blockquote>
     <p>This is how the Project Explorer should look like now:</p>
    </blockquote>
    <p><img src="assets/tutorial6/Final-Projects.png" style="border:1px groove black;" width="50%"></p>
    <p><strong>SecureSystems Project</strong></p>
    <ol start="28">
     <li data-md>
      <p>In Project Explorer view, right click to choose New -> OML Project. Specify the project name as <code>SecureSystems</code>.</p>
     <li data-md>
      <p>Uncheck the <code>Use default location</code> box, browse to the folder of the parent project and click Open. Append <code>/SecureSystems</code> to the path. Click Next.</p>
     <li data-md>
      <p>Specify the project properties as follows, then click Finish.</p>
<pre>Base IRI: http://example.com/secure
Bundle Kind: Description
Bundle Namespace: http://example.com/secure/bundle#
Title: Secure Systems
Description: This is the Secure systems example
</pre>
     <li data-md>
      <p>Expand the new <code>SecureSystems</code> project and double click to open <code>build.gradle</code> file.</p>
     <li data-md>
      <p>Navigate to the <code>dependencies</code> section (right above <code>downloadDependencies</code> task), replace the default dependency with:</p>
<pre>oml project(':SmartSensors')
oml project(':SafeAlarms')
oml project(':SupremeMonitors')
</pre>
    </ol>
    <blockquote>
     <p>We will now do one last step, which is a workaround for a temporary issue with the Gradle plugin in Eclipse.</p>
    </blockquote>
    <ol start="33">
     <li data-md>
      <p>In Project Explorer, navigate to <code>homesecurity-models/.settings/org.eclipse.buildship.core.prefs</code> and open it. Clear the value for the property <code>connection.project.dir</code> attribute. It should now read:</p>
<pre>connection.project.dir=
</pre>
    </ol>
    <h3 class="heading settled" data-level="6.4" id="tutorial6-define-modeling-methodology"><span class="secno">6.4. </span><span class="content">Define Modeling Methodology</span><a class="self-link" href="#tutorial6-define-modeling-methodology"></a></h3>
    <p>In this tep, we define a very simple system modeling vocabulary that is a subset of the <a href="https://github.com/opencaesar/imce-vocabularies">IMCE Vocabularies</a>.</p>
    <ol>
     <li data-md>
      <p>In Project Explorer, navigate to the folder <code>Methodology/src/oml/example.com/methodology</code>. Right click and choose New -> OML Model.</p>
     <li data-md>
      <p>Specify the properties of the model as follows:</p>
<pre>Ontology Kind: Vocabulary
Namespace: http://example.com/methodology/system#
Prefix: system
</pre>
     <li data-md>
      <p>In the open OML editor, replace the contents by the following code then save the editor.</p>
<pre class="language-scala highlight"><c- n>vocabulary</c-> <c- o>&lt;</c-><c- n>http</c-><c- p>:</c-><c- c1>//example.com/methodology/system#> as system {</c->

  <c- k>extends</c-> <c- o>&lt;</c-><c- n>http</c-><c- p>:</c-><c- c1>//www.w3.org/2001/XMLSchema#> as xsd</c->

  <c- n>aspect</c-> <c- nc>IdentifiedElement</c-> <c- p>[</c-> 
    <c- n>key</c-> <c- n>hasIdentifier</c->
  <c- p>]</c->

  <c- n>concept</c-> <c- nc>Component</c-> <c- o>&lt;</c-> <c- nc>IdentifiedElement</c->

  <c- n>concept</c-> <c- nc>Interface</c-> <c- o>&lt;</c-> <c- nc>IdentifiedElement</c->

  <c- n>concept</c-> <c- nc>Message</c-> <c- o>&lt;</c-> <c- nc>IdentifiedElement</c->

  <c- n>concept</c-> <c- nc>Junction</c-> <c- o>&lt;</c-> <c- nc>IdentifiedElement</c->

  <c- n>scalar</c-> <c- n>property</c-> <c- n>hasIdentifier</c-> <c- p>[</c->
    <c- n>domain</c-> <c- nc>IdentifiedElement</c->
    <c- n>range</c-> <c- n>xsd</c-><c- p>:</c-><c- n>string</c->
    <c- n>functional</c->
  <c- p>]</c->

  <c- n>relation</c-> <c- n>contains</c-> <c- p>[</c->
    <c- n>from</c-> <c- nc>Component</c->
    <c- n>to</c-> <c- nc>Component</c->
    <c- n>reverse</c-> <c- n>isContainedIn</c->
    <c- n>inverse</c-> <c- n>functional</c->
    <c- n>asymmetric</c->
    <c- n>irreflexive</c->
  <c- p>]</c->

  <c- n>relation</c-> <c- n>presents</c-> <c- p>[</c->
    <c- n>from</c-> <c- nc>Component</c->
    <c- n>to</c-> <c- nc>Interface</c->
    <c- n>reverse</c-> <c- n>isPresentedBy</c->
    <c- n>inverse</c-> <c- n>functional</c->
    <c- n>asymmetric</c->
    <c- n>irreflexive</c->
  <c- p>]</c->

  <c- n>relation</c-> <c- n>traverses</c-> <c- p>[</c->
    <c- n>from</c-> <c- nc>Message</c->
    <c- n>to</c-> <c- nc>Junction</c->
    <c- n>reverse</c-> <c- n>isTraversedBy</c->
    <c- n>asymmetric</c->
    <c- n>irreflexive</c->
  <c- p>]</c->

  <c- n>relation</c-> <c- n>joins</c-> <c- p>[</c->
    <c- n>from</c-> <c- nc>Junction</c->
    <c- n>to</c-> <c- nc>Interface</c->
    <c- n>reverse</c-> <c- n>isJoinedIn</c->
    <c- n>asymmetric</c->
    <c- n>irreflexive</c->
  <c- p>]</c->

  <c- n>relation</c-> <c- n>transfers</c-> <c- p>[</c->
    <c- n>from</c-> <c- nc>Interface</c->
    <c- n>to</c-> <c- nc>Message</c->
    <c- n>asymmetric</c->
    <c- n>irreflexive</c->
  <c- p>]</c->

  <c- n>relation</c-> <c- n>transfersIn</c-> <c- p>[</c->
    <c- n>from</c-> <c- nc>Interface</c->
    <c- n>to</c-> <c- nc>Message</c->
    <c- n>asymmetric</c->
    <c- n>irreflexive</c->
  <c- p>]</c-> <c- o>&lt;</c-> <c- n>transfers</c->

  <c- n>relation</c-> <c- n>transfersOut</c-> <c- p>[</c->
    <c- n>from</c-> <c- nc>Interface</c->
    <c- n>to</c-> <c- nc>Message</c->
    <c- n>asymmetric</c->
    <c- n>irreflexive</c->
  <c- p>]</c-> <c- o>&lt;</c-> <c- n>transfers</c->
<c- p>}</c->
</pre>
    </ol>
    <blockquote>
     <p>The above vocabulary can be used to describe simple system architectures in terms of <code>Components</code> that can recursively contain other components. These components can present <code>Interfaces</code> that can be joined by <code>Junctions</code>, which can traverse <code>Messages</code> that are transferred in and out of those interfaces.</p>
    </blockquote>
    <p class="note" role="note"><span class="marker">Note:</span> that vocabulary was created using the built-in vocabulary editor seen in <a href="#tutorial5-create-oml-vocabulary">Tutorial 5</a>.</p>
    <p><img src="assets/tutorial6/Methodology-Vocabulary.png" width="75%"></p>
    <blockquote>
     <p>We will now add the vocabulary to the project’s vocabulary bundle.</p>
    </blockquote>
    <ol start="4">
     <li data-md>
      <p>In Project Explorer, navigate to the file <code>Methodology/src/oml/example.com/methodology/bundle.oml</code> and double click to open it. Replace content by the following then save the editor.</p>
<pre class="language-scala highlight"><c- n>vocabulary</c-> <c- n>bundle</c-> <c- o>&lt;</c-><c- n>http</c-><c- p>:</c-><c- c1>//example.com/methodology/bundle#> as ^bundle {</c->
	
  <c- n>includes</c-> <c- o>&lt;</c-><c- n>http</c-><c- p>:</c-><c- c1>//example.com/methodology/system#></c->
<c- p>}</c->
</pre>
    </ol>
    <blockquote>
     <p>Let us now verify the bundle is good by building it.</p>
    </blockquote>
    <ol start="5">
     <li data-md>
      <p>In the <a data-link-type="dfn" href="#gradle-tasks-view" id="ref-for-gradle-tasks-view③①">Gradle Tasks view</a>, run the task <code>homesecurity-models/Methodology/build/build</code>. The task should run successfully.</p>
    </ol>
    <h3 class="heading settled" data-level="6.5" id="tutorial6-define-system-architecture"><span class="secno">6.5. </span><span class="content">Define System Architecture</span><a class="self-link" href="#tutorial6-define-system-architecture"></a></h3>
    <p>Now that we have defined a vocabulary in the <code>Methodology</code> project, we can use it define a Home Security abstract architecture. This is the first glimpse of the power of OML federation. It will give the <code>HomeSecurity</code> project the ability to reuse the <code>system</code> vocabulary defined by the <code>Methodology</code> project. It will do so by leveraging the project’s dependency we <a href="#tutorial6-create-federated-projects">have previously established</a> to download a read-only copy of the <code>system</code> vocabulary to the <code>HomeSecurity</code> project’s <code>build/oml</code> folder (where all the project’s read-only OML dependencies reside).</p>
    <blockquote>
     <p>Let us first verify that the dependency is not already downloaded.</p>
    </blockquote>
    <ol>
     <li data-md>
      <p>Navigate to the folder <code>HomeSecurity/build/oml</code> and verify that there is no nested folder named <code>example.com</code>.</p>
    </ol>
    <blockquote>
     <p>Now refresh the dependencies of the project using a simple menu action in the Project Explorer view.</p>
    </blockquote>
    <ol start="2">
     <li data-md>
      <p>Right click on the <code>HomeSecurity</code> project and choose Gradle -> Refresh Gradle Project. This action downloads the latest version of the dependencies.</p>
    </ol>
    <p class="note" role="note"><span class="marker">Note:</span> An alternative is to run the <code>oml/downloadDependencies</code> task from the <a data-link-type="dfn" href="#gradle-tasks-view" id="ref-for-gradle-tasks-view③②">Gradle Tasks view</a>.</p>
    <ol start="3">
     <li data-md>
      <p>Right click on the folder <code>HomeSecurity/build/oml</code> and choose Refresh. Now, you can see a nested <code>example.com</code> folder. Expand it to see read-only copies of the OML files defined by the <code>Methodology</code> project including the <code>system</code> vocabulary.</p>
    </ol>
    <blockquote>
     <p>Now that we have the dependency updated, we can now define the architecture vocabulary.</p>
    </blockquote>
    <ol start="4">
     <li data-md>
      <p>In Project Explorer, navigate to the folder <code>HomeSecurity/src/oml/example.com/homesecurity</code> and right click. Choose New -> OML Model. Specify the following:</p>
<pre>Ontology Kind: Vocabulary
Namespace: http://example.com/homesecurity/architecture#
Prefix: hsa
</pre>
     <li data-md>
      <p>In the open OML editor, replace the contents by the following code then save the editor.</p>
<pre class="language-scala highlight">  <c- n>vocabulary</c-> <c- o>&lt;</c-><c- n>http</c-><c- p>:</c-><c- c1>//example.com/homesecurity/architecture#> as hsa {</c->

  <c- k>extends</c-> <c- o>&lt;</c-><c- n>http</c-><c- p>:</c-><c- c1>//example.com/methodology/system#> as system</c->

  <c- n>concept</c-> <c- nc>SecuritySystem</c-> <c- o>&lt;</c-> <c- n>system</c-><c- p>:</c-><c- nc>Component</c-> <c- p>[</c->
    <c- n>restricts</c-> <c- n>system</c-><c- p>:</c-><c- n>presents</c-> <c- n>to</c-> <c- n>exactly</c-> <c- mi>1</c-> <c- nc>I1</c->
    <c- n>restricts</c-> <c- n>system</c-><c- p>:</c-><c- n>presents</c-> <c- n>to</c-> <c- n>exactly</c-> <c- mi>1</c-> <c- nc>I2</c->
    <c- n>restricts</c-> <c- n>system</c-><c- p>:</c-><c- n>contains</c-> <c- n>to</c-> <c- n>min</c-> <c- mi>1</c-> <c- nc>Sensor</c->
    <c- n>restricts</c-> <c- n>system</c-><c- p>:</c-><c- n>contains</c-> <c- n>to</c-> <c- n>exactly</c-> <c- mi>1</c-> <c- nc>AlarmSystem</c->
    <c- n>restricts</c-> <c- n>system</c-><c- p>:</c-><c- n>contains</c-> <c- n>to</c-> <c- n>exactly</c-> <c- mi>1</c-> <c- nc>MonitoringSystem</c->
  <c- p>]</c->

  <c- n>concept</c-> <c- nc>I1</c-> <c- o>&lt;</c-> <c- n>system</c-><c- p>:</c-><c- nc>Interface</c-> <c- p>[</c->
    <c- n>restricts</c-> <c- n>all</c-> <c- n>system</c-><c- p>:</c-><c- n>transfersOut</c-> <c- n>to</c-> <c- nc>Panic</c->
  <c- p>]</c->

  <c- n>concept</c-> <c- nc>I2</c-> <c- o>&lt;</c-> <c- n>system</c-><c- p>:</c-><c- nc>Interface</c-> <c- p>[</c->
    <c- n>restricts</c-> <c- n>all</c-> <c- n>system</c-><c- p>:</c-><c- n>transfersIn</c-> <c- n>to</c-> <c- nc>Dispatch</c->
  <c- p>]</c->

  <c- n>concept</c-> <c- nc>Sensor</c-> <c- o>&lt;</c-> <c- n>system</c-><c- p>:</c-><c- nc>Component</c-> <c- p>[</c->
    <c- n>restricts</c-> <c- n>system</c-><c- p>:</c-><c- n>presents</c-> <c- n>to</c-> <c- n>exactly</c-> <c- mi>1</c-> <c- nc>I3</c->
  <c- p>]</c->

  <c- n>concept</c-> <c- nc>I3</c-> <c- o>&lt;</c-> <c- n>system</c-><c- p>:</c-><c- nc>Interface</c-> <c- p>[</c->
    <c- n>restricts</c-> <c- n>all</c-> <c- n>system</c-><c- p>:</c-><c- n>transfersOut</c-> <c- n>to</c-> <c- nc>Event</c->
  <c- p>]</c->

  <c- n>concept</c-> <c- nc>AlarmSystem</c-> <c- o>&lt;</c-> <c- n>system</c-><c- p>:</c-><c- nc>Component</c-> <c- p>[</c->
    <c- n>restricts</c-> <c- n>system</c-><c- p>:</c-><c- n>presents</c-> <c- n>to</c-> <c- n>exactly</c-> <c- mi>1</c-> <c- nc>I4</c->
    <c- n>restricts</c-> <c- n>system</c-><c- p>:</c-><c- n>presents</c-> <c- n>to</c-> <c- n>exactly</c-> <c- mi>1</c-> <c- nc>I5</c->
    <c- n>restricts</c-> <c- n>system</c-><c- p>:</c-><c- n>presents</c-> <c- n>to</c-> <c- n>exactly</c-> <c- mi>1</c-> <c- nc>I6</c->
  <c- p>]</c->

  <c- n>concept</c-> <c- nc>I4</c-> <c- o>&lt;</c-> <c- n>system</c-><c- p>:</c-><c- nc>Interface</c-> <c- p>[</c->
    <c- n>restricts</c-> <c- n>all</c-> <c- n>system</c-><c- p>:</c-><c- n>transfersIn</c-> <c- n>to</c-> <c- nc>Event</c->
  <c- p>]</c->

  <c- n>concept</c-> <c- nc>I5</c-> <c- o>&lt;</c-> <c- n>system</c-><c- p>:</c-><c- nc>Interface</c-> <c- p>[</c->
    <c- n>restricts</c-> <c- n>all</c-> <c- n>system</c-><c- p>:</c-><c- n>transfersIn</c-> <c- n>to</c-> <c- nc>Panic</c->
  <c- p>]</c->

  <c- n>concept</c-> <c- nc>I6</c-> <c- o>&lt;</c-> <c- n>system</c-><c- p>:</c-><c- nc>Interface</c-> <c- p>[</c->
    <c- n>restricts</c-> <c- n>all</c-> <c- n>system</c-><c- p>:</c-><c- n>transfersOut</c-> <c- n>to</c-> <c- nc>Alarm</c->
  <c- p>]</c->

  <c- n>concept</c-> <c- nc>MonitoringSystem</c-> <c- o>&lt;</c-> <c- n>system</c-><c- p>:</c-><c- nc>Component</c-> <c- p>[</c->
    <c- n>restricts</c-> <c- n>system</c-><c- p>:</c-><c- n>presents</c-> <c- n>to</c-> <c- n>exactly</c-> <c- mi>1</c-> <c- nc>I7</c->
    <c- n>restricts</c-> <c- n>system</c-><c- p>:</c-><c- n>presents</c-> <c- n>to</c-> <c- n>exactly</c-> <c- mi>1</c-> <c- nc>I8</c->
  <c- p>]</c->

  <c- n>concept</c-> <c- nc>I7</c-> <c- o>&lt;</c-> <c- n>system</c-><c- p>:</c-><c- nc>Interface</c-> <c- p>[</c->
    <c- n>restricts</c-> <c- n>all</c-> <c- n>system</c-><c- p>:</c-><c- n>transfersIn</c-> <c- n>to</c-> <c- nc>Alarm</c->
  <c- p>]</c->

  <c- n>concept</c-> <c- nc>I8</c-> <c- o>&lt;</c-> <c- n>system</c-><c- p>:</c-><c- nc>Interface</c-> <c- p>[</c->
    <c- n>restricts</c-> <c- n>all</c-> <c- n>system</c-><c- p>:</c-><c- n>transfersOut</c-> <c- n>to</c-> <c- nc>Dispatch</c->
  <c- p>]</c->

  <c- n>concept</c-> <c- nc>Junction1</c-> <c- o>&lt;</c-> <c- n>system</c-><c- p>:</c-><c- nc>Junction</c-> <c- p>[</c->
    <c- n>restricts</c-> <c- n>system</c-><c- p>:</c-><c- n>joins</c-> <c- n>to</c-> <c- n>exactly</c-> <c- mi>1</c-> <c- nc>I1</c->
    <c- n>restricts</c-> <c- n>system</c-><c- p>:</c-><c- n>joins</c-> <c- n>to</c-> <c- n>exactly</c-> <c- mi>1</c-> <c- nc>I5</c->
    <c- n>restricts</c-> <c- n>all</c-> <c- n>system</c-><c- p>:</c-><c- n>isTraversedBy</c-> <c- n>to</c-> <c- nc>Panic</c->
  <c- p>]</c->

  <c- n>concept</c-> <c- nc>Junction2</c-> <c- o>&lt;</c-> <c- n>system</c-><c- p>:</c-><c- nc>Junction</c-> <c- p>[</c->
    <c- n>restricts</c-> <c- n>system</c-><c- p>:</c-><c- n>joins</c-> <c- n>to</c-> <c- n>exactly</c-> <c- mi>1</c-> <c- nc>I8</c->
    <c- n>restricts</c-> <c- n>system</c-><c- p>:</c-><c- n>joins</c-> <c- n>to</c-> <c- n>exactly</c-> <c- mi>1</c-> <c- nc>I2</c->
    <c- n>restricts</c-> <c- n>all</c-> <c- n>system</c-><c- p>:</c-><c- n>isTraversedBy</c-> <c- n>to</c-> <c- nc>Dispatch</c->
  <c- p>]</c->

  <c- n>concept</c-> <c- nc>Junction3</c-> <c- o>&lt;</c-> <c- n>system</c-><c- p>:</c-><c- nc>Junction</c-> <c- p>[</c->
    <c- n>restricts</c-> <c- n>system</c-><c- p>:</c-><c- n>joins</c-> <c- n>to</c-> <c- n>exactly</c-> <c- mi>1</c-> <c- nc>I3</c->
    <c- n>restricts</c-> <c- n>system</c-><c- p>:</c-><c- n>joins</c-> <c- n>to</c-> <c- n>exactly</c-> <c- mi>1</c-> <c- nc>I4</c->
    <c- n>restricts</c-> <c- n>all</c-> <c- n>system</c-><c- p>:</c-><c- n>isTraversedBy</c-> <c- n>to</c-> <c- nc>Event</c->
  <c- p>]</c->

  <c- n>concept</c-> <c- nc>Junction4</c-> <c- o>&lt;</c-> <c- n>system</c-><c- p>:</c-><c- nc>Junction</c-> <c- p>[</c->
    <c- n>restricts</c-> <c- n>system</c-><c- p>:</c-><c- n>joins</c-> <c- n>to</c-> <c- n>exactly</c-> <c- mi>1</c-> <c- nc>I6</c->
    <c- n>restricts</c-> <c- n>system</c-><c- p>:</c-><c- n>joins</c-> <c- n>to</c-> <c- n>exactly</c-> <c- mi>1</c-> <c- nc>I7</c->
    <c- n>restricts</c-> <c- n>all</c-> <c- n>system</c-><c- p>:</c-><c- n>isTraversedBy</c-> <c- n>to</c-> <c- nc>Alarm</c->
  <c- p>]</c->

  <c- n>concept</c-> <c- nc>Event</c-> <c- o>&lt;</c-> <c- n>system</c-><c- p>:</c-><c- nc>Message</c->

  <c- n>concept</c-> <c- nc>Panic</c-> <c- o>&lt;</c-> <c- n>system</c-><c- p>:</c-><c- nc>Message</c->

  <c- n>concept</c-> <c- nc>Alarm</c-> <c- o>&lt;</c-> <c- n>system</c-><c- p>:</c-><c- nc>Message</c->

  <c- n>concept</c-> <c- nc>Dispatch</c-> <c- o>&lt;</c-> <c- n>system</c-><c- p>:</c-><c- nc>Message</c->
<c- p>}</c->
</pre>
    </ol>
    <blockquote>
     <p>The above vocabulary describes a simple architectures for a <code>Security System</code> that consists of <code>Sensors</code> that detect and send <code>Event</code> messages to an <code>AlarmSystem</code>, which can also receive a <code>Panic</code> message from a user (e.g., through a UI). The AlarmSystem then sends an <code>Alarm</code> message to a <code>Monitoring System</code>, which responds by sending a <code>Dispatch</code> message to the Police.</p>
    </blockquote>
    <p class="note" role="note"><span class="marker">Note:</span> that vocabulary was created using the built-in vocabulary editor seen in <a href="#tutorial5-create-oml-vocabulary">Tutorial 5</a>.</p>
    <p><img src="assets/tutorial6/HomeSecurity-Architecture-1.png" width="100%"> <img src="assets/tutorial6/HomeSecurity-Architecture-2.png" width="100%"></p>
    <blockquote>
     <p>We will now create a vocabulary bundle and add the vocabulary to it.</p>
    </blockquote>
    <ol start="6">
     <li data-md>
      <p>In Project Explorer, right click on <code>HomeSecurity/src/oml/example.com/homesecurity</code> and choose New -> OML Model. Specify the following:</p>
<pre>Ontology Kind: Vocabulary Bundle
Namespace: http://example.com/homesecurity/v-bundle#
Prefix: bundle
</pre>
     <li data-md>
      <p>Replace content of <code>v-bundle.oml</code> by the following then save the editor.</p>
<pre class="language-scala highlight"><c- n>vocabulary</c-> <c- n>bundle</c-> <c- o>&lt;</c-><c- n>http</c-><c- p>:</c-><c- c1>//example.com/homesecurity/v-bundle#> as ^bundle {</c->
  
  <c- k>extends</c-> <c- o>&lt;</c-><c- n>http</c-><c- p>:</c-><c- c1>//example.com/methodology/bundle#></c->
  
  <c- n>includes</c-> <c- o>&lt;</c-><c- n>http</c-><c- p>:</c-><c- c1>//example.com/homesecurity/architecture#></c->
<c- p>}</c->
</pre>
    </ol>
    <blockquote>
     <p>Notice that we defined the Home Security abstract architecture with a vocabulary as opposed to a description. This is to say that we do not have an individual architecture yet, but a class of such architectures that can be further specialized and constrained. However, it would be helpful to define a candidate architecture individual (or more) as a prototype to analyze.</p>
    </blockquote>
    <ol start="8">
     <li data-md>
      <p>In Project Explorer, right click on <code>HomeSecurity/src/oml/example.com/homesecurity</code> and choose New -> OML Model. Specify the following:</p>
<pre>Ontology Kind: Description
Namespace: http://example.com/homesecurity/prototype#
Prefix: prototype
</pre>
     <li data-md>
      <p>Replace content of <code>prototype.oml</code> by the following then save the editor.</p>
<pre class="language-scala highlight"><c- n>description</c-> <c- o>&lt;</c-><c- n>http</c-><c- p>:</c-><c- c1>//example.com/homesecurity/prototype#> as prototype {</c->

  <c- n>uses</c-> <c- o>&lt;</c-><c- n>http</c-><c- p>:</c-><c- c1>//example.com/homesecurity/architecture#> as hsa</c->

  <c- n>uses</c-> <c- o>&lt;</c-><c- n>http</c-><c- p>:</c-><c- c1>//example.com/methodology/system#> as system</c->

  <c- c1>// Security System</c->
  <c- n>instance</c-> <c- nc>SecuritySystem</c-> <c- p>:</c-> <c- n>hsa</c-><c- p>:</c-><c- nc>SecuritySystem</c-> <c- p>[</c->
    <c- n>system</c-><c- p>:</c-><c- n>hasIdentifier</c-> <c- s>"SecuritySystem"</c->
    <c- n>system</c-><c- p>:</c-><c- n>presents</c-> <c- nc>I1</c->
    <c- n>system</c-><c- p>:</c-><c- n>presents</c-> <c- nc>I2</c->
    <c- n>system</c-><c- p>:</c-><c- n>contains</c-> <c- nc>Sensor</c->
    <c- n>system</c-><c- p>:</c-><c- n>contains</c-> <c- nc>AlarmSystem</c->
    <c- n>system</c-><c- p>:</c-><c- n>contains</c-> <c- nc>MonitoringSystem</c->
  <c- p>]</c->
  <c- n>instance</c-> <c- nc>I1</c-> <c- p>:</c-> <c- n>hsa</c-><c- p>:</c-><c- nc>I1</c-> <c- p>[</c-> <c- n>system</c-><c- p>:</c-><c- n>hasIdentifier</c-> <c- s>"I1"</c-> <c- p>]</c->
  <c- n>instance</c-> <c- nc>I2</c-> <c- p>:</c-> <c- n>hsa</c-><c- p>:</c-><c- nc>I2</c-> <c- p>[</c-> <c- n>system</c-><c- p>:</c-><c- n>hasIdentifier</c-> <c- s>"I2"</c-> <c- p>]</c->
      
  <c- c1>//  Sensor</c->
  <c- n>instance</c-> <c- nc>Sensor</c-> <c- p>:</c-> <c- n>hsa</c-><c- p>:</c-><c- nc>Sensor</c-> <c- p>[</c->
    <c- n>system</c-><c- p>:</c-><c- n>hasIdentifier</c-> <c- s>"Sensor"</c->
    <c- n>system</c-><c- p>:</c-><c- n>presents</c-> <c- nc>I3</c->
  <c- p>]</c->
  <c- n>instance</c-> <c- nc>I3</c-> <c- p>:</c-> <c- n>hsa</c-><c- p>:</c-><c- nc>I3</c-> <c- p>[</c-> <c- n>system</c-><c- p>:</c-><c- n>hasIdentifier</c-> <c- s>"I3"</c-> <c- p>]</c->

  <c- c1>// Alarm System</c->
  <c- n>instance</c-> <c- nc>AlarmSystem</c-> <c- p>:</c-> <c- n>hsa</c-><c- p>:</c-><c- nc>AlarmSystem</c-> <c- p>[</c->
    <c- n>system</c-><c- p>:</c-><c- n>hasIdentifier</c-> <c- s>"AlarmSystem"</c->
    <c- n>system</c-><c- p>:</c-><c- n>presents</c-> <c- nc>I4</c->
    <c- n>system</c-><c- p>:</c-><c- n>presents</c-> <c- nc>I5</c->
    <c- n>system</c-><c- p>:</c-><c- n>presents</c-> <c- nc>I6</c->
  <c- p>]</c->
  <c- n>instance</c-> <c- nc>I4</c-> <c- p>:</c-> <c- n>hsa</c-><c- p>:</c-><c- nc>I4</c-> <c- p>[</c-> <c- n>system</c-><c- p>:</c-><c- n>hasIdentifier</c-> <c- s>"I4"</c-> <c- p>]</c->
  <c- n>instance</c-> <c- nc>I5</c-> <c- p>:</c-> <c- n>hsa</c-><c- p>:</c-><c- nc>I5</c-> <c- p>[</c-> <c- n>system</c-><c- p>:</c-><c- n>hasIdentifier</c-> <c- s>"I5"</c-> <c- p>]</c->
  <c- n>instance</c-> <c- nc>I6</c-> <c- p>:</c-> <c- n>hsa</c-><c- p>:</c-><c- nc>I6</c-> <c- p>[</c-> <c- n>system</c-><c- p>:</c-><c- n>hasIdentifier</c-> <c- s>"I6"</c-> <c- p>]</c->

  <c- c1>// Monitoring System</c->
  <c- n>instance</c-> <c- nc>MonitoringSystem</c-> <c- p>:</c-> <c- n>hsa</c-><c- p>:</c-><c- nc>MonitoringSystem</c-> <c- p>[</c->
    <c- n>system</c-><c- p>:</c-><c- n>hasIdentifier</c-> <c- s>"MonitoringSystem"</c->
    <c- n>system</c-><c- p>:</c-><c- n>presents</c-> <c- nc>I7</c->
    <c- n>system</c-><c- p>:</c-><c- n>presents</c-> <c- nc>I8</c->
  <c- p>]</c->
  <c- n>instance</c-> <c- nc>I7</c-> <c- p>:</c-> <c- n>hsa</c-><c- p>:</c-><c- nc>I7</c-> <c- p>[</c-> <c- n>system</c-><c- p>:</c-><c- n>hasIdentifier</c-> <c- s>"I7"</c-> <c- p>]</c->
  <c- n>instance</c-> <c- nc>I8</c-> <c- p>:</c-> <c- n>hsa</c-><c- p>:</c-><c- nc>I8</c-> <c- p>[</c-> <c- n>system</c-><c- p>:</c-><c- n>hasIdentifier</c-> <c- s>"I8"</c-> <c- p>]</c->

  <c- c1>// Junction 1</c->
  <c- n>instance</c-> <c- nc>Junction1</c-> <c- p>:</c-> <c- n>hsa</c-><c- p>:</c-><c- nc>Junction1</c-> <c- p>[</c->
    <c- n>system</c-><c- p>:</c-><c- n>hasIdentifier</c-> <c- s>"Junction1"</c->
    <c- n>system</c-><c- p>:</c-><c- n>joins</c-> <c- nc>I1</c->
    <c- n>system</c-><c- p>:</c-><c- n>joins</c-> <c- nc>I5</c->
  <c- p>]</c->

  <c- c1>// Junction 2</c->
  <c- n>instance</c-> <c- nc>Junction2</c-> <c- p>:</c-> <c- n>hsa</c-><c- p>:</c-><c- nc>Junction2</c-> <c- p>[</c->
    <c- n>system</c-><c- p>:</c-><c- n>hasIdentifier</c-> <c- s>"Junction2"</c->
    <c- n>system</c-><c- p>:</c-><c- n>joins</c-> <c- nc>I8</c->
    <c- n>system</c-><c- p>:</c-><c- n>joins</c-> <c- nc>I2</c->
  <c- p>]</c->

  <c- c1>// Junction 3</c->
  <c- n>instance</c-> <c- nc>Junction3</c-> <c- p>:</c-> <c- n>hsa</c-><c- p>:</c-><c- nc>Junction3</c-> <c- p>[</c->
    <c- n>system</c-><c- p>:</c-><c- n>hasIdentifier</c-> <c- s>"Junction3"</c->
    <c- n>system</c-><c- p>:</c-><c- n>joins</c-> <c- nc>I3</c->
    <c- n>system</c-><c- p>:</c-><c- n>joins</c-> <c- nc>I4</c->
  <c- p>]</c->

  <c- c1>// Junction 4</c->
  <c- n>instance</c-> <c- nc>Junction4</c-> <c- p>:</c-> <c- n>hsa</c-><c- p>:</c-><c- nc>Junction4</c-> <c- p>[</c->
    <c- n>system</c-><c- p>:</c-><c- n>hasIdentifier</c-> <c- s>"Junction4"</c->
    <c- n>system</c-><c- p>:</c-><c- n>joins</c-> <c- nc>I6</c->
    <c- n>system</c-><c- p>:</c-><c- n>joins</c-> <c- nc>I7</c->
  <c- p>]</c->
<c- p>}</c->
</pre>
    </ol>
    <blockquote>
     <p>This prototype can be depicted as shown below. We used a custom viewpoint defined <a href="https://github.com/opencaesar/homesecurity-example/tree/master/homesecurity-viewpoint">here</a>.</p>
    </blockquote>
    <p><img src="assets/tutorial6/HomeSecurity-Prototype.png" width="100%"></p>
    <blockquote>
     <p>We will now add the prototype to the project’s description bundle.</p>
    </blockquote>
    <ol start="10">
     <li data-md>
      <p>In Project Explorer, navigate to the file <code>HomeSecurity/src/oml/example.com/homesecurity/bundle.oml</code> and double click to open it. Replace content by the following then save the editor.</p>
<pre class="language-scala highlight"><c- n>description</c-> <c- n>bundle</c-> <c- o>&lt;</c-><c- n>http</c-><c- p>:</c-><c- c1>//example.com/homesecurity/bundle#> as ^bundle {</c->
  
  <c- n>uses</c-> <c- o>&lt;</c-><c- n>http</c-><c- p>:</c-><c- c1>//example.com/homesecurity/architecture#></c->
    
  <c- n>includes</c-> <c- o>&lt;</c-><c- n>http</c-><c- p>:</c-><c- c1>//example.com/homesecurity/prototype#></c->
<c- p>}</c->
</pre>
    </ol>
    <blockquote>
     <p>Let us now verify the bundle is good by building it.</p>
    </blockquote>
    <ol start="11">
     <li data-md>
      <p>In the <a data-link-type="dfn" href="#gradle-tasks-view" id="ref-for-gradle-tasks-view③③">Gradle Tasks view</a>, run the task <code>homesecurity-models/HomeSecurity/build/build</code>. The task should run successfully.</p>
    </ol>
    <h3 class="heading settled" data-level="6.6" id="tutorial6-federate-component-realization"><span class="secno">6.6. </span><span class="content">Federate Component Realization</span><a class="self-link" href="#tutorial6-federate-component-realization"></a></h3>
    <p>In this step, we will enable three different suppliers (<code>Smart</code>, <code>Safe</code>, and <code>Supreme</code>) to realize the subcomponents (<code>Sensor</code>, <code>Alarm System</code>, <code>Monitoring System</code>) of the home security architecture. This means, each of them, in their respective project, will refresh their dependencies to download a read-only copy of the <code>architceture</code> vocabulary so they can import it in their respective realization vocabulary.</p>
    <p><strong>Smart Sensors</strong></p>
    <p>This supplier builds two kinds of sensors, a smoke sensor and a motion sensor. They will provide a <code>sensors</code> vocabulary that describes how their sensors conform to the home security abstract architecture.</p>
    <blockquote>
     <p>Let us refresh the dependencies to get the latest copy of the architecture (and transitively the methodology).</p>
    </blockquote>
    <ol>
     <li data-md>
      <p>In Project Explorer, right click on <code>homesecurity-models/SmartSensors</code> folder and choose Gradle -> Refresh Gradle Project.</p>
     <li data-md>
      <p>Navigate to the folder <code>SmartSensors/build/oml/example.com</code> and verify it has nested <code>homesecurity</code> and <code>methodology</code> folders.</p>
     <li data-md>
      <p>Right click on the folder <code>SmartSensors/src/oml/example.com/smart</code> and choose New -> OML Model. Specify the following:</p>
<pre>Ontology Kind: Vocabulary
Namespace: http://example.com/smart/sensors#
Prefix: smart
</pre>
     <li data-md>
      <p>In the open OML editor, replace the contents by the following code then save the editor.</p>
<pre class="language-scala highlight"><c- n>vocabulary</c-> <c- o>&lt;</c-><c- n>http</c-><c- p>:</c-><c- c1>//example.com/smart/sensors#> as smart {</c->

  <c- k>extends</c-> <c- o>&lt;</c-><c- n>http</c-><c- p>:</c-><c- c1>//example.com/homesecurity/architecture#> as hsa</c->

  <c- k>extends</c-> <c- o>&lt;</c-><c- n>http</c-><c- p>:</c-><c- c1>//example.com/methodology/system#> as system</c->

  <c- n>concept</c-> <c- nc>SmokeSensor</c-> <c- o>&lt;</c-> <c- n>hsa</c-><c- p>:</c-><c- nc>Sensor</c-> <c- p>[</c->
    <c- n>restricts</c-> <c- n>all</c-> <c- n>system</c-><c- p>:</c-><c- n>presents</c-> <c- n>to</c-> <c- nc>I3</c-><c- p>.</c-><c- nc>S</c->
  <c- p>]</c->

  <c- n>concept</c-> <c- nc>I3</c-><c- p>.</c-><c- nc>S</c-> <c- o>&lt;</c-> <c- n>hsa</c-><c- p>:</c-><c- nc>I3</c-> <c- p>[</c->
    <c- n>restricts</c-> <c- n>all</c-> <c- n>system</c-><c- p>:</c-><c- n>transfersOut</c-> <c- n>to</c-> <c- nc>SmokeEvent</c->
  <c- p>]</c->

  <c- n>concept</c-> <c- nc>MotionSensor</c-> <c- o>&lt;</c-> <c- n>hsa</c-><c- p>:</c-><c- nc>Sensor</c-> <c- p>[</c->
    <c- n>restricts</c-> <c- n>all</c-> <c- n>system</c-><c- p>:</c-><c- n>presents</c-> <c- n>to</c-> <c- nc>I3</c-><c- p>.</c-><c- nc>M</c->
  <c- p>]</c->

  <c- n>concept</c-> <c- nc>I3</c-><c- p>.</c-><c- nc>M</c-> <c- o>&lt;</c-> <c- n>hsa</c-><c- p>:</c-><c- nc>I3</c-> <c- p>[</c->
    <c- n>restricts</c-> <c- n>all</c-> <c- n>system</c-><c- p>:</c-><c- n>transfersOut</c-> <c- n>to</c-> <c- nc>MotionEvent</c->
  <c- p>]</c->

  <c- n>concept</c-> <c- nc>SmokeEvent</c-> <c- o>&lt;</c-> <c- n>hsa</c-><c- p>:</c-><c- nc>Event</c->

  <c- n>concept</c-> <c- nc>MotionEvent</c-> <c- o>&lt;</c-> <c- n>hsa</c-><c- p>:</c-><c- nc>Event</c->
<c- p>}</c->
</pre>
    </ol>
    <blockquote>
     <p>The above vocabulary describes a <code>SmokeSensor</code> and a <code>MotionSensor</code>, both represent concrete specializations of the <code>Sensor</code> concept form the architecture. Notice also that each of them present concrete interfaces that specialize the corresponding interface of the <code>Sensor</code> concept. Moreover, each of the interfaces declare a special kind of event, <code>SmokeEvent</code> and <code>MotionEvent</code>, that they can transfer out.</p>
    </blockquote>
    <p class="note" role="note"><span class="marker">Note:</span> that vocabulary was created using the built-in vocabulary editor seen in <a href="#tutorial5-create-oml-vocabulary">Tutorial 5</a>.</p>
    <p><img src="assets/tutorial6/Smart-Sensors.png" width="50%"></p>
    <blockquote>
     <p>We will now add the prototype to the project’s vocabulary bundle.</p>
    </blockquote>
    <ol start="5">
     <li data-md>
      <p>In Project Explorer, open the file <code>SmartSensors/src/oml/example.com/smart/bundle.oml</code> and replace content by the following then save the editor.</p>
<pre class="language-scala highlight"><c- n>vocabulary</c-> <c- n>bundle</c-> <c- o>&lt;</c-><c- n>http</c-><c- p>:</c-><c- c1>//example.com/smart/bundle#> as ^bundle {</c->
  
  <c- k>extends</c-> <c- o>&lt;</c-><c- n>http</c-><c- p>:</c-><c- c1>//example.com/homesecurity/v-bundle#></c->
  
  <c- n>includes</c-> <c- o>&lt;</c-><c- n>http</c-><c- p>:</c-><c- c1>//example.com/smart/sensors#></c->
<c- p>}</c->
</pre>
    </ol>
    <blockquote>
     <p>Let us now verify the bundle is good by building it.</p>
    </blockquote>
    <ol start="6">
     <li data-md>
      <p>In the <a data-link-type="dfn" href="#gradle-tasks-view" id="ref-for-gradle-tasks-view③④">Gradle Tasks view</a>, run the task <code>homesecurity-models/SmartSensors/build/build</code>. The task should run successfully.</p>
    </ol>
    <p><strong>Safe Alarms</strong></p>
    <p>This supplier builds an Alarm System for a home security architecture. They will provide an <code>alarms</code> vocabulary that describes how their system conforms to the architecture.</p>
    <blockquote>
     <p>Let us refresh the dependencies to get the latest copy of the architecture (and transitively the methodology).</p>
    </blockquote>
    <ol start="7">
     <li data-md>
      <p>In Project Explorer, right click on <code>homesecurity-models/SafeAlarms</code> folder and choose Gradle -> Refresh Gradle Project.</p>
     <li data-md>
      <p>Navigate to the folder <code>SafeAlarms/build/oml/example.com</code> and verify it has nested <code>homesecurity</code> and <code>methodology</code> folders.</p>
     <li data-md>
      <p>Right click on the folder <code>SafeAlarms/src/oml/example.com/safe</code> and choose New -> OML Model. Specify the following:</p>
<pre>Ontology Kind: Vocabulary
Namespace: http://example.com/safe/alarms#
Prefix: safe
</pre>
     <li data-md>
      <p>In the open OML editor, replace the contents by the following code then save the editor.</p>
<pre class="language-scala highlight"><c- n>vocabulary</c-> <c- o>&lt;</c-><c- n>http</c-><c- p>:</c-><c- c1>//example.com/safe/alarms#> as safe {</c->
      
  <c- k>extends</c-> <c- o>&lt;</c-><c- n>http</c-><c- p>:</c-><c- c1>//example.com/homesecurity/architecture#> as hsa</c->

  <c- k>extends</c-> <c- o>&lt;</c-><c- n>http</c-><c- p>:</c-><c- c1>//example.com/methodology/system#> as system</c->

  <c- n>concept</c-> <c- nc>AlarmSystem</c-> <c- o>&lt;</c-> <c- n>hsa</c-><c- p>:</c-><c- nc>AlarmSystem</c-> <c- p>[</c->
    <c- n>restricts</c-> <c- n>system</c-><c- p>:</c-><c- n>presents</c-> <c- n>to</c-> <c- n>exactly</c-> <c- mi>1</c-> <c- nc>I4</c->
    <c- n>restricts</c-> <c- n>system</c-><c- p>:</c-><c- n>presents</c-> <c- n>to</c-> <c- n>exactly</c-> <c- mi>1</c-> <c- nc>I5</c->
    <c- n>restricts</c-> <c- n>system</c-><c- p>:</c-><c- n>presents</c-> <c- n>to</c-> <c- n>exactly</c-> <c- mi>1</c-> <c- nc>I6</c->
    <c- n>restricts</c-> <c- n>system</c-><c- p>:</c-><c- n>presents</c-> <c- n>to</c-> <c- n>max</c-> <c- mi>1</c-> <c- nc>I9</c->
  <c- p>]</c->
      
  <c- n>concept</c-> <c- nc>I4</c-> <c- o>&lt;</c-> <c- n>hsa</c-><c- p>:</c-><c- nc>I4</c->

  <c- n>concept</c-> <c- nc>I5</c-> <c- o>&lt;</c-> <c- n>hsa</c-><c- p>:</c-><c- nc>I5</c->

  <c- n>concept</c-> <c- nc>I6</c-> <c- o>&lt;</c-> <c- n>hsa</c-><c- p>:</c-><c- nc>I6</c->

  <c- n>concept</c-> <c- nc>I9</c-> <c- o>&lt;</c-> <c- n>system</c-><c- p>:</c-><c- nc>Interface</c-> <c- p>[</c->
    <c- n>restricts</c-> <c- n>all</c-> <c- n>system</c-><c- p>:</c-><c- n>transfersOut</c-> <c- n>to</c-> <c- nc>Sound</c->
  <c- p>]</c->
      
  <c- n>concept</c-> <c- nc>Speaker</c-> <c- o>&lt;</c-> <c- n>system</c-><c- p>:</c-><c- nc>Component</c-> <c- p>[</c->
    <c- n>restricts</c-> <c- n>system</c-><c- p>:</c-><c- n>presents</c-> <c- n>to</c-> <c- n>exactly</c-> <c- mi>1</c-> <c- nc>I10</c->
  <c- p>]</c->
      
  <c- n>concept</c-> <c- nc>I10</c-> <c- o>&lt;</c-> <c- n>system</c-><c- p>:</c-><c- nc>Interface</c-> <c- p>[</c->
    <c- n>restricts</c-> <c- n>all</c-> <c- n>system</c-><c- p>:</c-><c- n>transfersIn</c-> <c- n>to</c-> <c- nc>Sound</c->
  <c- p>]</c->

  <c- n>concept</c-> <c- nc>Junction5</c-> <c- o>&lt;</c-> <c- n>system</c-><c- p>:</c-><c- nc>Junction</c-> <c- p>[</c->
    <c- n>restricts</c-> <c- n>system</c-><c- p>:</c-><c- n>joins</c-> <c- n>to</c-> <c- n>exactly</c-> <c- mi>1</c-> <c- nc>I9</c->
    <c- n>restricts</c-> <c- n>system</c-><c- p>:</c-><c- n>joins</c-> <c- n>to</c-> <c- n>exactly</c-> <c- mi>1</c-> <c- nc>I10</c->
    <c- n>restricts</c-> <c- n>all</c-> <c- n>system</c-><c- p>:</c-><c- n>isTraversedBy</c-> <c- n>to</c-> <c- nc>Sound</c-> 
  <c- p>]</c->

  <c- n>concept</c-> <c- nc>Sound</c-> <c- o>&lt;</c-> <c- n>system</c-><c- p>:</c-><c- nc>Message</c->
      
<c- p>}</c->
</pre>
    </ol>
    <blockquote>
     <p>The above vocabulary describes <code>AlarmSystem</code> as a concrete specialization of the abstract <code>AlarmSystem</code> concept. Notice how the concrete system present concrete interfaces that specialize the corresponding three interfaces of the abstract <code>Sensor</code>. In addition, it adds an additional interface I9 that transfers Sound out as an alarm. That interface can be joined to a Speaker component they provide too.</p>
    </blockquote>
    <p class="note" role="note"><span class="marker">Note:</span> that vocabulary was created using the built-in vocabulary editor seen in <a href="#tutorial5-create-oml-vocabulary">Tutorial 5</a>.</p>
    <p><img src="assets/tutorial6/Safe-Alarms.png" width="100%"></p>
    <blockquote>
     <p>We will now add the prototype to the project’s vocabulary bundle.</p>
    </blockquote>
    <ol start="11">
     <li data-md>
      <p>In Project Explorer, open the file <code>SafeAlarms/src/oml/example.com/safe/bundle.oml</code> and replace content by the following then save the editor.</p>
<pre class="language-scala highlight"><c- n>vocabulary</c-> <c- n>bundle</c-> <c- o>&lt;</c-><c- n>http</c-><c- p>:</c-><c- c1>//example.com/safe/bundle#> as ^bundle {</c->
  
  <c- k>extends</c-> <c- o>&lt;</c-><c- n>http</c-><c- p>:</c-><c- c1>//example.com/homesecurity/v-bundle#></c->
  
  <c- n>includes</c-> <c- o>&lt;</c-><c- n>http</c-><c- p>:</c-><c- c1>//example.com/safe/alarms#></c->
<c- p>}</c->
</pre>
    </ol>
    <blockquote>
     <p>Let us now verify the bundle is good by building it.</p>
    </blockquote>
    <ol start="12">
     <li data-md>
      <p>In the <a data-link-type="dfn" href="#gradle-tasks-view" id="ref-for-gradle-tasks-view③⑤">Gradle Tasks view</a>, run the task <code>homesecurity-models/SafeAlarms/build/build</code>. The task should run successfully.</p>
    </ol>
    <p><strong>Supreme Monitors</strong></p>
    <p>This supplier builds a Monitoring System for a home security architecture. They provide an <code>monitors</code> vocabulary that describes how their system conforms to the architecture.</p>
    <blockquote>
     <p>Let us refresh the dependencies to get the latest copy of the architecture (and transitively the methodology).</p>
    </blockquote>
    <ol start="7">
     <li data-md>
      <p>In Project Explorer, right click on <code>homesecurity-models/SupermeMonitors</code> folder and choose Gradle -> Refresh Gradle Project.</p>
     <li data-md>
      <p>Navigate to the folder <code>SupermeMonitors/build/oml/example.com</code> and verify it has nested <code>homesecurity</code> and <code>methodology</code> folders.</p>
     <li data-md>
      <p>Right click on the folder <code>SupermeMonitors/src/oml/example.com/supreme</code> and choose New -> OML Model. Specify the following:</p>
<pre>Ontology Kind: Vocabulary
Namespace: http://example.com/supreme/monitors#
Prefix: supreme
</pre>
     <li data-md>
      <p>In the open OML editor, replace the contents by the following code then save the editor.</p>
<pre class="language-scala highlight"><c- n>vocabulary</c-> <c- o>&lt;</c-><c- n>http</c-><c- p>:</c-><c- c1>//example.com/supreme/monitors#> as ^supreme {</c->
      
  <c- k>extends</c-> <c- o>&lt;</c-><c- n>http</c-><c- p>:</c-><c- c1>//example.com/homesecurity/architecture#> as hsa</c->

  <c- k>extends</c-> <c- o>&lt;</c-><c- n>http</c-><c- p>:</c-><c- c1>//example.com/methodology/system#> as system</c->

  <c- n>concept</c-> <c- nc>MonitoringSystem</c-> <c- o>&lt;</c-> <c- n>hsa</c-><c- p>:</c-><c- nc>MonitoringSystem</c-> <c- p>[</c->
    <c- n>restricts</c-> <c- n>system</c-><c- p>:</c-><c- n>presents</c-> <c- n>to</c-> <c- n>exactly</c-> <c- mi>1</c-> <c- nc>I7</c->
    <c- n>restricts</c-> <c- n>system</c-><c- p>:</c-><c- n>presents</c-> <c- n>to</c-> <c- n>exactly</c-> <c- mi>1</c-> <c- nc>I8</c->
  <c- p>]</c->
      
  <c- n>concept</c-> <c- nc>I7</c-> <c- o>&lt;</c-> <c- n>hsa</c-><c- p>:</c-><c- nc>I7</c->
      
  <c- n>concept</c-> <c- nc>I8</c-> <c- o>&lt;</c-> <c- n>hsa</c-><c- p>:</c-><c- nc>I8</c->
      
<c- p>}</c->
</pre>
    </ol>
    <blockquote>
     <p>The above vocabulary describes <code>MonitoringSystem</code> as a concrete specialization of the abstract <code>MonitoringSystem</code> concept. Notice how the concrete system present concrete interfaces that specialize the corresponding two interfaces of the abstract <code>MonitoringSystem</code>.</p>
    </blockquote>
    <p class="note" role="note"><span class="marker">Note:</span> that vocabulary was created using the built-in vocabulary editor seen in <a href="#tutorial5-create-oml-vocabulary">Tutorial 5</a>.</p>
    <p><img src="assets/tutorial6/Supreme-Monitors.png" width="50%"></p>
    <blockquote>
     <p>We will now add the prototype to the project’s vocabulary bundle.</p>
    </blockquote>
    <ol start="11">
     <li data-md>
      <p>In Project Explorer, open the file <code>SupremeMonitors/src/oml/example.com/supreme/bundle.oml</code> and replace content by the following then save the editor.</p>
<pre class="language-scala highlight"><c- n>vocabulary</c-> <c- n>bundle</c-> <c- o>&lt;</c-><c- n>http</c-><c- p>:</c-><c- c1>//example.com/supreme/bundle#> as ^bundle {</c->
  
  <c- k>extends</c-> <c- o>&lt;</c-><c- n>http</c-><c- p>:</c-><c- c1>//example.com/homesecurity/v-bundle#></c->
  
  <c- n>includes</c-> <c- o>&lt;</c-><c- n>http</c-><c- p>:</c-><c- c1>//example.com/supreme/monitors#></c->
<c- p>}</c->
</pre>
    </ol>
    <blockquote>
     <p>Let us now verify the bundle is good by building it.</p>
    </blockquote>
    <ol start="12">
     <li data-md>
      <p>In the <a data-link-type="dfn" href="#gradle-tasks-view" id="ref-for-gradle-tasks-view③⑥">Gradle Tasks view</a>, run the task <code>homesecurity-models/SupremeMonitors/build/build</code>. The task should run successfully.</p>
    </ol>
    <h3 class="heading settled" data-level="6.7" id="tutorial6-integrate-federated-components"><span class="secno">6.7. </span><span class="content">Integrate Federated Components</span><a class="self-link" href="#tutorial6-integrate-federated-components"></a></h3>
    <p>In this step, we will enable a system integrator (<code>SecureSystems</code>), who is also an EOM for Security Systems, to describe how it realizes the abstract home security architecture by integrating the realized components from the three suppliers above with its own top level security system to get a conforming realization architecture.</p>
    <p><strong>Secure Systems</strong></p>
    <blockquote>
     <p>Let us refresh the dependencies to get the latest copy of the realized components (and transitively the architecture and the methodology).</p>
    </blockquote>
    <ol>
     <li data-md>
      <p>In Project Explorer, right click on <code>homesecurity-models/SecureSystems</code> folder and choose Gradle -> Refresh Gradle Project.</p>
     <li data-md>
      <p>Navigate to the folder <code>SecureSystems/build/oml/example.com</code> and verify it has nested folders: <code>methodology</code>, <code>homesecurity</code>, <code>smart</code>, <code>safe</code>, and <code>supreme</code>.</p>
    </ol>
    <blockquote>
     <p>Now that the integrator has all the dependencies it needs, it can proceed to describe the realization architecture.</p>
    </blockquote>
    <ol start="3">
     <li data-md>
      <p>In Project Explorer, navigate to the folder <code>SecureSystems/src/oml/example.com/secure</code> and right click. Choose New -> OML Model. Specify the following:</p>
<pre>Ontology Kind: Vocabulary
Namespace: http://example.com/secure/architecture#
Prefix: secure
</pre>
     <li data-md>
      <p>In the open OML editor, replace the contents by the following code then save the editor.</p>
<pre class="language-scala highlight"><c- n>vocabulary</c-> <c- o>&lt;</c-><c- n>http</c-><c- p>:</c-><c- c1>//example.com/secure/architecture#> as secure {</c->

  <c- k>extends</c-> <c- o>&lt;</c-><c- n>http</c-><c- p>:</c-><c- c1>//example.com/methodology/system#> as system</c->

  <c- k>extends</c-> <c- o>&lt;</c-><c- n>http</c-><c- p>:</c-><c- c1>//example.com/homesecurity/architecture#> as hsa</c->

  <c- k>extends</c-> <c- o>&lt;</c-><c- n>http</c-><c- p>:</c-><c- c1>//example.com/smart/sensors#> as smart</c->

  <c- k>extends</c-> <c- o>&lt;</c-><c- n>http</c-><c- p>:</c-><c- c1>//example.com/safe/alarms#> as safe</c->

  <c- k>extends</c-> <c- o>&lt;</c-><c- n>http</c-><c- p>:</c-><c- c1>//example.com/supreme/monitors#> as supreme</c->

  <c- n>concept</c-> <c- nc>SecuritySystem</c-> <c- o>&lt;</c-> <c- n>hsa</c-><c- p>:</c-><c- nc>SecuritySystem</c-> <c- p>[</c->
    <c- n>restricts</c-> <c- n>system</c-><c- p>:</c-><c- n>presents</c-> <c- n>to</c-> <c- n>exactly</c-> <c- mi>1</c-> <c- nc>I1</c->
    <c- n>restricts</c-> <c- n>system</c-><c- p>:</c-><c- n>presents</c-> <c- n>to</c-> <c- n>exactly</c-> <c- mi>1</c-> <c- nc>I2</c->
    <c- n>restricts</c-> <c- n>system</c-><c- p>:</c-><c- n>contains</c-> <c- n>to</c-> <c- n>min</c-> <c- mi>2</c-> <c- n>smart</c-><c- p>:</c-><c- nc>SmokeSensor</c->
    <c- n>restricts</c-> <c- n>system</c-><c- p>:</c-><c- n>contains</c-> <c- n>to</c-> <c- n>min</c-> <c- mi>1</c-> <c- n>smart</c-><c- p>:</c-><c- nc>MotionSensor</c->
    <c- n>restricts</c-> <c- n>system</c-><c- p>:</c-><c- n>contains</c-> <c- n>to</c-> <c- n>exactly</c-> <c- mi>1</c-> <c- n>safe</c-><c- p>:</c-><c- nc>AlarmSystem</c->
    <c- n>restricts</c-> <c- n>system</c-><c- p>:</c-><c- n>contains</c-> <c- n>to</c-> <c- n>exactly</c-> <c- mi>1</c-> <c- n>supreme</c-><c- p>:</c-><c- nc>MonitoringSystem</c->
  <c- p>]</c->

  <c- n>concept</c-> <c- nc>I1</c-> <c- o>&lt;</c-> <c- n>hsa</c-><c- p>:</c-><c- nc>I1</c->

  <c- n>concept</c-> <c- nc>I2</c-> <c- o>&lt;</c-> <c- n>hsa</c-><c- p>:</c-><c- nc>I2</c->

  <c- c1>// Junction 1</c->
  <c- n>concept</c-> <c- nc>Junction1</c-> <c- o>&lt;</c-> <c- n>hsa</c-><c- p>:</c-><c- nc>Junction1</c-> <c- p>[</c->
    <c- n>restricts</c-> <c- n>system</c-><c- p>:</c-><c- n>joins</c-> <c- n>to</c-> <c- n>exactly</c-> <c- mi>1</c-> <c- nc>I1</c->
    <c- n>restricts</c-> <c- n>system</c-><c- p>:</c-><c- n>joins</c-> <c- n>to</c-> <c- n>exactly</c-> <c- mi>1</c-> <c- n>safe</c-><c- p>:</c-><c- nc>I5</c->
  <c- p>]</c->

  <c- c1>// Junction 2</c->
  <c- n>concept</c-> <c- nc>Junction2</c-> <c- o>&lt;</c-> <c- n>hsa</c-><c- p>:</c-><c- nc>Junction2</c-> <c- p>[</c->
    <c- n>restricts</c-> <c- n>system</c-><c- p>:</c-><c- n>joins</c-> <c- n>to</c-> <c- n>exactly</c-> <c- mi>1</c-> <c- n>supreme</c-><c- p>:</c-><c- nc>I8</c->
    <c- n>restricts</c-> <c- n>system</c-><c- p>:</c-><c- n>joins</c-> <c- n>to</c-> <c- n>exactly</c-> <c- mi>1</c-> <c- nc>I2</c->
  <c- p>]</c->

  <c- c1>// Junction 3</c->
  <c- n>concept</c-> <c- nc>Junction3</c-><c- p>.</c-><c- nc>S</c-> <c- o>&lt;</c-> <c- n>hsa</c-><c- p>:</c-><c- nc>Junction3</c-> <c- p>[</c->
    <c- n>restricts</c-> <c- n>system</c-><c- p>:</c-><c- n>joins</c-> <c- n>to</c-> <c- n>exactly</c-> <c- mi>1</c-> <c- n>smart</c-><c- p>:</c-><c- nc>I3</c-><c- p>.</c-><c- nc>S</c->
    <c- n>restricts</c-> <c- n>system</c-><c- p>:</c-><c- n>joins</c-> <c- n>to</c-> <c- n>exactly</c-> <c- mi>1</c-> <c- n>safe</c-><c- p>:</c-><c- nc>I4</c->
  <c- p>]</c->

  <c- n>concept</c-> <c- nc>Junction3</c-><c- p>.</c-><c- nc>M</c-> <c- o>&lt;</c-> <c- n>hsa</c-><c- p>:</c-><c- nc>Junction3</c-> <c- p>[</c->
    <c- n>restricts</c-> <c- n>system</c-><c- p>:</c-><c- n>joins</c-> <c- n>to</c-> <c- n>exactly</c-> <c- mi>1</c-> <c- n>smart</c-><c- p>:</c-><c- nc>I3</c-><c- p>.</c-><c- nc>M</c->
    <c- n>restricts</c-> <c- n>system</c-><c- p>:</c-><c- n>joins</c-> <c- n>to</c-> <c- n>exactly</c-> <c- mi>1</c-> <c- n>safe</c-><c- p>:</c-><c- nc>I4</c->
  <c- p>]</c->

  <c- c1>// Junction 4</c->
  <c- n>concept</c-> <c- nc>Junction4</c-> <c- o>&lt;</c-> <c- n>hsa</c-><c- p>:</c-><c- nc>Junction4</c-> <c- p>[</c->
    <c- n>restricts</c-> <c- n>system</c-><c- p>:</c-><c- n>joins</c-> <c- n>to</c-> <c- n>exactly</c-> <c- mi>1</c-> <c- n>safe</c-><c- p>:</c-><c- nc>I6</c->
    <c- n>restricts</c-> <c- n>system</c-><c- p>:</c-><c- n>joins</c-> <c- n>to</c-> <c- n>exactly</c-> <c- mi>1</c-> <c- n>supreme</c-><c- p>:</c-><c- nc>I7</c->
  <c- p>]</c->
<c- p>}</c->
</pre>
    </ol>
    <blockquote>
     <p>The above vocabulary describes a concrete realization architecture for the abstract <code>SecuritySystem</code>. That concrete system uses <code>Smart</code> sensors (a minimum of 2 smoke sensors and one motion sensor), <code>a Safe</code> alarm system, and a <code>Supreme</code> monitoring system. In addition, it provides its own realization of the two <code>SecuritySystem</code> interfaces and all the junctions that connect the various realized interfaces together based on the abstract architecture.</p>
    </blockquote>
    <p class="note" role="note"><span class="marker">Note:</span> that vocabulary was created using the built-in vocabulary editor seen in <a href="#tutorial5-create-oml-vocabulary">Tutorial 5</a>.</p>
    <p><img src="assets/tutorial6/Secure-Systems.png" width="100%"></p>
    <blockquote>
     <p>We will now create a vocabulary bundle and add the vocabulary to it.</p>
    </blockquote>
    <ol start="5">
     <li data-md>
      <p>In Project Explorer, right click on <code>SecureSystems/src/oml/example.com/secure</code> and choose New -> OML Model. Specify the following:</p>
<pre>Ontology Kind: Vocabulary Bundle
Namespace: http://example.com/secure/v-bundle#
Prefix: bundle
</pre>
     <li data-md>
      <p>Replace content of <code>v-bundle.oml</code> by the following then save the editor.</p>
<pre class="language-scala highlight"><c- n>vocabulary</c-> <c- n>bundle</c-> <c- o>&lt;</c-><c- n>http</c-><c- p>:</c-><c- c1>//example.com/secure/v-bundle#> as ^bundle {</c->

  <c- k>extends</c-> <c- o>&lt;</c-><c- n>http</c-><c- p>:</c-><c- c1>//example.com/smart/bundle#>  </c->
  <c- k>extends</c-> <c- o>&lt;</c-><c- n>http</c-><c- p>:</c-><c- c1>//example.com/safe/bundle#></c->
  <c- k>extends</c-> <c- o>&lt;</c-><c- n>http</c-><c- p>:</c-><c- c1>//example.com/supreme/bundle#></c->
      
  <c- n>includes</c-> <c- o>&lt;</c-><c- n>http</c-><c- p>:</c-><c- c1>//example.com/secure/architecture#></c->
<c- p>}</c->
</pre>
    </ol>
    <blockquote>
     <p>Again, it would be helpful to define a prototype description (or more) to analyze this specific realization architecture.</p>
    </blockquote>
    <ol start="7">
     <li data-md>
      <p>In Project Explorer, right click on <code>SecureSystems/src/oml/example.com/secure</code> and choose New -> OML Model. Specify the following:</p>
<pre>Ontology Kind: Description
Namespace: http://example.com/secure/prototype#
Prefix: prototype
</pre>
     <li data-md>
      <p>Replace content of <code>prototype.oml</code> by the following then save the editor.</p>
<pre class="language-scala highlight"><c- n>description</c-> <c- o>&lt;</c-><c- n>http</c-><c- p>:</c-><c- c1>//example.com/secure/prototype#> as prototype {</c->

  <c- n>uses</c-> <c- o>&lt;</c-><c- n>http</c-><c- p>:</c-><c- c1>//example.com/methodology/system#> as system</c->

  <c- n>uses</c-> <c- o>&lt;</c-><c- n>http</c-><c- p>:</c-><c- c1>//example.com/smart/sensors#> as smart</c->

  <c- n>uses</c-> <c- o>&lt;</c-><c- n>http</c-><c- p>:</c-><c- c1>//example.com/safe/alarms#> as safe</c->

  <c- n>uses</c-> <c- o>&lt;</c-><c- n>http</c-><c- p>:</c-><c- c1>//example.com/supreme/monitors#> as supreme</c->

  <c- n>uses</c-> <c- o>&lt;</c-><c- n>http</c-><c- p>:</c-><c- c1>//example.com/secure/architecture#> as secure</c->

  <c- c1>// Security System</c->
  <c- n>instance</c-> <c- nc>SecuritySystem</c-> <c- p>:</c-> <c- n>secure</c-><c- p>:</c-><c- nc>SecuritySystem</c-> <c- p>[</c->
    <c- n>system</c-><c- p>:</c-><c- n>hasIdentifier</c-> <c- s>"Secure-01"</c->
    <c- n>system</c-><c- p>:</c-><c- n>presents</c-> <c- nc>I1</c->
    <c- n>system</c-><c- p>:</c-><c- n>presents</c-> <c- nc>I2</c->
    <c- n>system</c-><c- p>:</c-><c- n>contains</c-> <c- nc>SmokeSensor1</c->
    <c- n>system</c-><c- p>:</c-><c- n>contains</c-> <c- nc>SmokeSensor2</c->
    <c- n>system</c-><c- p>:</c-><c- n>contains</c-> <c- nc>MotionSensor</c->
    <c- n>system</c-><c- p>:</c-><c- n>contains</c-> <c- nc>AlarmSystem</c->
    <c- n>system</c-><c- p>:</c-><c- n>contains</c-> <c- nc>MonitoringSystem</c->
  <c- p>]</c->

  <c- n>instance</c-> <c- nc>I1</c-> <c- p>:</c-> <c- n>secure</c-><c- p>:</c-><c- nc>I1</c-> <c- p>[</c->
    <c- n>system</c-><c- p>:</c-><c- n>hasIdentifier</c-> <c- s>"Secure-02"</c->
  <c- p>]</c->

  <c- n>instance</c-> <c- nc>I2</c-> <c- p>:</c-> <c- n>secure</c-><c- p>:</c-><c- nc>I2</c-> <c- p>[</c->
    <c- n>system</c-><c- p>:</c-><c- n>hasIdentifier</c-> <c- s>"Secure-03"</c->
  <c- p>]</c->

  <c- c1>// Smart Smoke Sensor</c->
  <c- n>instance</c-> <c- nc>SmokeSensor1</c-> <c- p>:</c-> <c- n>smart</c-><c- p>:</c-><c- nc>SmokeSensor</c-> <c- p>[</c->
    <c- n>system</c-><c- p>:</c-><c- n>hasIdentifier</c-> <c- s>"Smart-01"</c->
    <c- n>system</c-><c- p>:</c-><c- n>presents</c-> <c- nc>I3</c-><c- p>.</c-><c- nc>S1</c->
  <c- p>]</c->

  <c- n>instance</c-> <c- nc>I3</c-><c- p>.</c-><c- nc>S1</c-> <c- p>:</c-> <c- n>smart</c-><c- p>:</c-><c- nc>I3</c-><c- p>.</c-><c- nc>S</c-> <c- p>[</c->
    <c- n>system</c-><c- p>:</c-><c- n>hasIdentifier</c-> <c- s>"Smart-02"</c->
  <c- p>]</c->

  <c- n>instance</c-> <c- nc>SmokeSensor2</c-> <c- p>:</c-> <c- n>smart</c-><c- p>:</c-><c- nc>SmokeSensor</c-> <c- p>[</c->
    <c- n>system</c-><c- p>:</c-><c- n>hasIdentifier</c-> <c- s>"Smart-03"</c->
    <c- n>system</c-><c- p>:</c-><c- n>presents</c-> <c- nc>I3</c-><c- p>.</c-><c- nc>S2</c->
  <c- p>]</c->

  <c- n>instance</c-> <c- nc>I3</c-><c- p>.</c-><c- nc>S2</c-> <c- p>:</c-> <c- n>smart</c-><c- p>:</c-><c- nc>I3</c-><c- p>.</c-><c- nc>S</c-> <c- p>[</c->
    <c- n>system</c-><c- p>:</c-><c- n>hasIdentifier</c-> <c- s>"Smart-4"</c->
  <c- p>]</c->

  <c- c1>// Smart Motion Sensor</c->
  <c- n>instance</c-> <c- nc>MotionSensor</c-> <c- p>:</c-> <c- n>smart</c-><c- p>:</c-><c- nc>MotionSensor</c-> <c- p>[</c->
    <c- n>system</c-><c- p>:</c-><c- n>hasIdentifier</c-> <c- s>"Smart-05"</c->
    <c- n>system</c-><c- p>:</c-><c- n>presents</c-> <c- nc>I3</c-><c- p>.</c-><c- nc>M</c->
  <c- p>]</c->

  <c- n>instance</c-> <c- nc>I3</c-><c- p>.</c-><c- nc>M</c-> <c- p>:</c-> <c- n>smart</c-><c- p>:</c-><c- nc>I3</c-><c- p>.</c-><c- nc>M</c-> <c- p>[</c->
    <c- n>system</c-><c- p>:</c-><c- n>hasIdentifier</c-> <c- s>"Smart-06"</c->
  <c- p>]</c->

  <c- c1>// Safe Alarm System</c->
  <c- n>instance</c-> <c- nc>AlarmSystem</c-> <c- p>:</c-> <c- n>safe</c-><c- p>:</c-><c- nc>AlarmSystem</c-> <c- p>[</c->
    <c- n>system</c-><c- p>:</c-><c- n>hasIdentifier</c-> <c- s>"Safe-01"</c->
    <c- n>system</c-><c- p>:</c-><c- n>presents</c-> <c- nc>I4</c->
    <c- n>system</c-><c- p>:</c-><c- n>presents</c-> <c- nc>I5</c->
    <c- n>system</c-><c- p>:</c-><c- n>presents</c-> <c- nc>I6</c->
  <c- p>]</c->

  <c- n>instance</c-> <c- nc>I4</c-> <c- p>:</c-> <c- n>safe</c-><c- p>:</c-><c- nc>I4</c-> <c- p>[</c->
    <c- n>system</c-><c- p>:</c-><c- n>hasIdentifier</c-> <c- s>"Safe-02"</c->
  <c- p>]</c->

  <c- n>instance</c-> <c- nc>I5</c-> <c- p>:</c-> <c- n>safe</c-><c- p>:</c-><c- nc>I5</c-> <c- p>[</c->
    <c- n>system</c-><c- p>:</c-><c- n>hasIdentifier</c-> <c- s>"Safe-03"</c->
  <c- p>]</c->

  <c- n>instance</c-> <c- nc>I6</c-> <c- p>:</c-> <c- n>safe</c-><c- p>:</c-><c- nc>I6</c-> <c- p>[</c->
    <c- n>system</c-><c- p>:</c-><c- n>hasIdentifier</c-> <c- s>"Safe-04"</c->
  <c- p>]</c->

  <c- c1>// Secure Monitoring System</c->
  <c- n>instance</c-> <c- nc>MonitoringSystem</c-> <c- p>:</c-> <c- n>supreme</c-><c- p>:</c-><c- nc>MonitoringSystem</c-> <c- p>[</c->
    <c- n>system</c-><c- p>:</c-><c- n>hasIdentifier</c-> <c- s>"Supreme-01"</c->
    <c- n>system</c-><c- p>:</c-><c- n>presents</c-> <c- nc>I7</c->
    <c- n>system</c-><c- p>:</c-><c- n>presents</c-> <c- nc>I8</c->
  <c- p>]</c->

  <c- n>instance</c-> <c- nc>I7</c-> <c- p>:</c-> <c- n>supreme</c-><c- p>:</c-><c- nc>I7</c-> <c- p>[</c->
    <c- n>system</c-><c- p>:</c-><c- n>hasIdentifier</c-> <c- s>"Supreme-02"</c->
  <c- p>]</c->

  <c- n>instance</c-> <c- nc>I8</c-> <c- p>:</c-> <c- n>supreme</c-><c- p>:</c-><c- nc>I8</c-> <c- p>[</c->
    <c- n>system</c-><c- p>:</c-><c- n>hasIdentifier</c-> <c- s>"Supreme-03"</c->
  <c- p>]</c->

  <c- c1>// Junction 1</c->
  <c- n>instance</c-> <c- nc>Junction1</c-> <c- p>:</c-> <c- n>secure</c-><c- p>:</c-><c- nc>Junction1</c-> <c- p>[</c->
    <c- n>system</c-><c- p>:</c-><c- n>hasIdentifier</c-> <c- s>"Secure-04"</c->
    <c- n>system</c-><c- p>:</c-><c- n>joins</c-> <c- nc>I1</c->
    <c- n>system</c-><c- p>:</c-><c- n>joins</c-> <c- nc>I5</c->
  <c- p>]</c->

  <c- c1>// Junction 2</c->
  <c- n>instance</c-> <c- nc>Junction2</c-> <c- p>:</c-> <c- n>secure</c-><c- p>:</c-><c- nc>Junction2</c-> <c- p>[</c->
    <c- n>system</c-><c- p>:</c-><c- n>hasIdentifier</c-> <c- s>"Secure-05"</c->
    <c- n>system</c-><c- p>:</c-><c- n>joins</c-> <c- nc>I8</c->
    <c- n>system</c-><c- p>:</c-><c- n>joins</c-> <c- nc>I2</c->
  <c- p>]</c->

  <c- c1>// Junction 3</c->
  <c- n>instance</c-> <c- nc>Junction3</c-><c- p>.</c-><c- nc>S1</c-> <c- p>:</c-> <c- n>secure</c-><c- p>:</c-><c- nc>Junction3</c-><c- p>.</c-><c- nc>S</c-> <c- p>[</c->
    <c- n>system</c-><c- p>:</c-><c- n>hasIdentifier</c-> <c- s>"Secure-06"</c->
    <c- n>system</c-><c- p>:</c-><c- n>joins</c-> <c- nc>I3</c-><c- p>.</c-><c- nc>S1</c->
    <c- n>system</c-><c- p>:</c-><c- n>joins</c-> <c- nc>I4</c->
  <c- p>]</c->

  <c- n>instance</c-> <c- nc>Junction3</c-><c- p>.</c-><c- nc>S2</c-> <c- p>:</c-> <c- n>secure</c-><c- p>:</c-><c- nc>Junction3</c-><c- p>.</c-><c- nc>S</c-> <c- p>[</c->
    <c- n>system</c-><c- p>:</c-><c- n>hasIdentifier</c-> <c- s>"Secure-07"</c->
    <c- n>system</c-><c- p>:</c-><c- n>joins</c-> <c- nc>I3</c-><c- p>.</c-><c- nc>S2</c->
    <c- n>system</c-><c- p>:</c-><c- n>joins</c-> <c- nc>I4</c->
  <c- p>]</c->

  <c- n>instance</c-> <c- nc>Junction3</c-><c- p>.</c-><c- nc>M</c-> <c- p>:</c-> <c- n>secure</c-><c- p>:</c-><c- nc>Junction3</c-><c- p>.</c-><c- nc>M</c-> <c- p>[</c->
    <c- n>system</c-><c- p>:</c-><c- n>hasIdentifier</c-> <c- s>"Secure-08"</c->
    <c- n>system</c-><c- p>:</c-><c- n>joins</c-> <c- nc>I3</c-><c- p>.</c-><c- nc>M</c->
    <c- n>system</c-><c- p>:</c-><c- n>joins</c-> <c- nc>I4</c->
  <c- p>]</c->

  <c- c1>// Junction 4</c->
  <c- n>instance</c-> <c- nc>Junction4</c-> <c- p>:</c-> <c- n>secure</c-><c- p>:</c-><c- nc>Junction4</c-> <c- p>[</c->
    <c- n>system</c-><c- p>:</c-><c- n>hasIdentifier</c-> <c- s>"Secure-09"</c->
    <c- n>system</c-><c- p>:</c-><c- n>joins</c-> <c- nc>I6</c->
    <c- n>system</c-><c- p>:</c-><c- n>joins</c-> <c- nc>I7</c->
  <c- p>]</c->
<c- p>}</c->
</pre>
    </ol>
    <blockquote>
     <p>This prototype can be depicted as shown below. We used a custom viewpoint defined <a href="https://github.com/opencaesar/homesecurity-example/tree/master/homesecurity-viewpoint">here</a>.</p>
    </blockquote>
    <p><img src="assets/tutorial6/Secure-Prototype.png" width="100%"></p>
    <blockquote>
     <p>We will now add the prototype to the project’s description bundle.</p>
    </blockquote>
    <ol start="9">
     <li data-md>
      <p>In Project Explorer, navigate to the file <code>SecureSystems/src/oml/example.com/secure/bundle.oml</code> and double click to open it. Replace content by the following then save the editor.</p>
<pre class="language-scala highlight"><c- n>description</c-> <c- n>bundle</c-> <c- o>&lt;</c-><c- n>http</c-><c- p>:</c-><c- c1>//example.com/secure/bundle#> as ^bundle {</c->

  <c- n>uses</c-> <c- o>&lt;</c-><c- n>http</c-><c- p>:</c-><c- c1>//example.com/secure/v-bundle#>  </c->
      
  <c- n>includes</c-> <c- o>&lt;</c-><c- n>http</c-><c- p>:</c-><c- c1>//example.com/secure/prototype#></c->
<c- p>}</c->
</pre>
    </ol>
    <blockquote>
     <p>Let us now verify the bundle is good by building it.</p>
    </blockquote>
    <ol start="10">
     <li data-md>
      <p>In the <a data-link-type="dfn" href="#gradle-tasks-view" id="ref-for-gradle-tasks-view③⑦">Gradle Tasks view</a>, run the task <code>homesecurity-models/SecureSystems/build/build</code>. The task should run successfully.</p>
    </ol>
    <p class="note" role="note"><span class="marker">Note:</span> the reference <a href="https://github.com/opencaesar/homesecurity-example">repository</a> contains the state of the models up to this point only.</p>
    <h3 class="heading settled" data-level="6.8" id="tutorial6-perform-federated-analyses"><span class="secno">6.8. </span><span class="content">Run Federation Scenarios</span><a class="self-link" href="#tutorial6-perform-federated-analyses"></a></h3>
    <p>So far, we have seen the happy path for federation where upstream dependencies do not change and downstream dependencies always conform. Notice that change can always safely occur in any of the federated projects without impact as long as their downstream dependencies do not refresh their upstream dependencies. This is a great benefit of federation which allows projects to control the rate of update for their dependencies.</p>
    <p>In this step, we will run other common federation scenarios to see the ability of OML to handle them. We will always undo the changes at the end of each scenario.</p>
    <p><strong>Scenario 1: Non-Breaking Methodology Change</strong></p>
    <p>In this scenario, we make a non-breaking change to the <code>system</code> methodology vocabulary.</p>
    <ol>
     <li data-md>
      <p>Open the file <code>Methodology/src/oml/example.com/methodology/system.oml</code> and change the <code>contains</code> relation by removing the <code>irreflexive</code> flag (a non-breaking change). Thew new relation looks like this:</p>
<pre class="language-scala highlight"><c- n>relation</c-> <c- n>contains</c-> <c- p>[</c->
  <c- n>from</c-> <c- nc>Component</c->
  <c- n>to</c-> <c- nc>Component</c->
  <c- n>reverse</c-> <c- n>isContainedIn</c->
  <c- n>inverse</c-> <c- n>functional</c->
  <c- n>asymmetric</c->
<c- p>]</c->
</pre>
     <li data-md>
      <p>Right click on the project <code>homesecurity-models</code> and select Grade -> Refresh Grade Project. (Note the progress of this operation in the bottom-right corner of the IDE.)</p>
    </ol>
    <blockquote>
     <p>Since we ran the action on a parent project, it runs on every nested project recursively resulting in all projects refreshing their dependencies. Since we changed the <code>Methodology</code> project, which is the most upstream dependency, all the other projects should get an updated version of that <code>system</code> vocabulary.</p>
    </blockquote>
    <ol start="3">
     <li data-md>
      <p>Navigate to and open the read-only <code>SecureSystems/build/oml/example.com/methodology/system.oml</code>. Verify that the <code>contains</code> relation was modified.</p>
     <li data-md>
      <p>In <a data-link-type="dfn" href="#gradle-tasks-view" id="ref-for-gradle-tasks-view③⑧">Gradle Tasks view</a>, run <code>homesecurity-models/SecureSystems/build/build</code> and verify that it still builds correctly.</p>
     <li data-md>
      <p>Undo the change in <code>Methodology/src/oml/example.com/methodology/system.oml</code> and right click on <code>homesecurity-models</code> and select Gradle -> Refresh Gradle Project.</p>
    </ol>
    <p><strong>Scenario 2: Breaking Methodology Change</strong></p>
    <p>In this scenario, we make a breaking syntax change to the <code>system</code> methodology vocabulary.</p>
    <ol>
     <li data-md>
      <p>Open the file <code>Methodology/src/oml/example.com/methodology/system.oml</code> and rename the <code>contains</code> relation to <code>composes</code> flag (a breaking change). Thew new relation looks like this:</p>
<pre class="language-scala highlight"><c- n>relation</c-> <c- n>composes</c-> <c- p>[</c->
    <c- n>from</c-> <c- nc>Component</c->
    <c- n>to</c-> <c- nc>Component</c->
    <c- n>reverse</c-> <c- n>isContainedIn</c->
    <c- n>inverse</c-> <c- n>functional</c->
    <c- n>asymmetric</c->
    <c- n>irreflexive</c->
  <c- p>]</c->
</pre>
     <li data-md>
      <p>Right click on the project <code>homesecurity-models</code> and select Grade -> Refresh Grade Project.</p>
    </ol>
    <blockquote>
     <p>Verify that all the other projects show compile errors. Inspect the Problem view and should see many errors.</p>
    </blockquote>
    <ol start="3">
     <li data-md>
      <p>Undo the change in <code>Methodology/src/oml/example.com/methodology/system.oml</code> and right click on <code>homesecurity-models</code> and select Gradle -> Refresh Gradle Project.</p>
    </ol>
    <blockquote>
     <p>You should observe that the problems get resolved.</p>
    </blockquote>
    <p><strong>Scenario 3: Breaking Architectural Change</strong></p>
    <p>In this scenario, we make a breaking semantic change to the abstract <code>architecture</code> vocabulary.</p>
    <ol>
     <li data-md>
      <p>Open the file <code>HomeSecurity/src/oml/example.com/homesecurity/architecture.oml</code> and change the <code>SecuritySystem</code> concept to strenghten the restriction on the number of Sensors to be <code>exactly 1 Sensor</code> (a breaking change). Thew new concept looks like this:</p>
<pre class="language-scala highlight"><c- n>concept</c-> <c- nc>SecuritySystem</c-> <c- o>&lt;</c-> <c- n>system</c-><c- p>:</c-><c- nc>Component</c-> <c- p>[</c->
  <c- n>restricts</c-> <c- n>system</c-><c- p>:</c-><c- n>presents</c-> <c- n>to</c-> <c- n>exactly</c-> <c- mi>1</c-> <c- nc>I1</c->
  <c- n>restricts</c-> <c- n>system</c-><c- p>:</c-><c- n>presents</c-> <c- n>to</c-> <c- n>exactly</c-> <c- mi>1</c-> <c- nc>I2</c->
  <c- n>restricts</c-> <c- n>system</c-><c- p>:</c-><c- n>contains</c-> <c- n>to</c-> <c- n>exactly</c-> <c- mi>1</c-> <c- nc>Sensor</c->
  <c- n>restricts</c-> <c- n>system</c-><c- p>:</c-><c- n>contains</c-> <c- n>to</c-> <c- n>exactly</c-> <c- mi>1</c-> <c- nc>AlarmSystem</c->
  <c- n>restricts</c-> <c- n>system</c-><c- p>:</c-><c- n>contains</c-> <c- n>to</c-> <c- n>exactly</c-> <c- mi>1</c-> <c- nc>MonitoringSystem</c->
<c- p>]</c->
</pre>
     <li data-md>
      <p>Right click on the project <code>homesecurity-models</code> and select Grade -> Refresh Grade Project.</p>
     <li data-md>
      <p>In <a data-link-type="dfn" href="#gradle-tasks-view" id="ref-for-gradle-tasks-view③⑨">Gradle Tasks view</a>, run <code>homesecurity-models/SecureSystems/build/build</code> and verify that it gives an error.</p>
     <li data-md>
      <p>Double click to open the file <code>SecureSystems/build/reports/reasoning.xml</code>. You should see the following:</p>
      <p><img src="assets/tutorial6/Reasoning-Error-1.png" style="border:1px groove black;" width="100%"></p>
    </ol>
    <blockquote>
     <p>The error indicates that a max cardinality restriction is violated. This is nice because now the integrator <code>SecureSystems</code> gets alerted to the architectural change that calls for exactly 1 sensor, which is inconsistent with its realization architecture which calls for multiple sensors (see the code below).</p>
    </blockquote>
<pre class="language-scala highlight"><c- c1>// Realization SecuritySystem</c->
<c- n>concept</c-> <c- nc>SecuritySystem</c-> <c- o>&lt;</c-> <c- n>hsa</c-><c- p>:</c-><c- nc>SecuritySystem</c-> <c- p>[</c->
  <c- n>restricts</c-> <c- n>system</c-><c- p>:</c-><c- n>presents</c-> <c- n>to</c-> <c- n>exactly</c-> <c- mi>1</c-> <c- nc>I1</c->
  <c- n>restricts</c-> <c- n>system</c-><c- p>:</c-><c- n>presents</c-> <c- n>to</c-> <c- n>exactly</c-> <c- mi>1</c-> <c- nc>I2</c->
  <c- n>restricts</c-> <c- n>system</c-><c- p>:</c-><c- n>contains</c-> <c- n>to</c-> <c- n>min</c-> <c- mi>2</c-> <c- n>smart</c-><c- p>:</c-><c- nc>SmokeSensor</c->
  <c- n>restricts</c-> <c- n>system</c-><c- p>:</c-><c- n>contains</c-> <c- n>to</c-> <c- n>min</c-> <c- mi>1</c-> <c- n>smart</c-><c- p>:</c-><c- nc>MotionSensor</c->
  <c- n>restricts</c-> <c- n>system</c-><c- p>:</c-><c- n>contains</c-> <c- n>to</c-> <c- n>exactly</c-> <c- mi>1</c-> <c- n>safe</c-><c- p>:</c-><c- nc>AlarmSystem</c->
  <c- n>restricts</c-> <c- n>system</c-><c- p>:</c-><c- n>contains</c-> <c- n>to</c-> <c- n>exactly</c-> <c- mi>1</c-> <c- n>supreme</c-><c- p>:</c-><c- nc>MonitoringSystem</c->
<c- p>]</c->
</pre>
    <ol start="5">
     <li data-md>
      <p>Undo the change in <code>HomeSecurity/src/oml/example.com/homesecurity/architecture.oml</code> and right click on <code>homesecurity-models</code> and select Gradle -> Refresh Gradle Project.</p>
    </ol>
    <p><strong>Scenario 4: Breaking Component Realization</strong></p>
    <p>In this scenario, we make a breaking semantic change in one of the realization components that gets detected at the integrated level.</p>
    <ol>
     <li data-md>
      <p>Open the file <code>SafeAlarms/src/oml/example.com/safe/alarms.oml</code> and change the <code>AlarmSystem</code> concept by changing the restriction on the I9 interface (for sound) to <code>exactly 1</code>. Thew new concept looks like this:</p>
<pre class="language-scala highlight"><c- n>concept</c-> <c- nc>AlarmSystem</c-> <c- o>&lt;</c-> <c- n>hsa</c-><c- p>:</c-><c- nc>AlarmSystem</c-> <c- p>[</c->
  <c- n>restricts</c-> <c- n>system</c-><c- p>:</c-><c- n>presents</c-> <c- n>to</c-> <c- n>exactly</c-> <c- mi>1</c-> <c- nc>I4</c->
  <c- n>restricts</c-> <c- n>system</c-><c- p>:</c-><c- n>presents</c-> <c- n>to</c-> <c- n>exactly</c-> <c- mi>1</c-> <c- nc>I5</c->
  <c- n>restricts</c-> <c- n>system</c-><c- p>:</c-><c- n>presents</c-> <c- n>to</c-> <c- n>exactly</c-> <c- mi>1</c-> <c- nc>I6</c->
  <c- n>restricts</c-> <c- n>system</c-><c- p>:</c-><c- n>presents</c-> <c- n>to</c-> <c- n>exactly</c-> <c- mi>1</c-> <c- nc>I9</c->
<c- p>]</c->
</pre>
     <li data-md>
      <p>Right click on the project <code>homesecurity-models</code> and select Grade -> Refresh Grade Project.</p>
     <li data-md>
      <p>In <a data-link-type="dfn" href="#gradle-tasks-view" id="ref-for-gradle-tasks-view④⓪">Gradle Tasks view</a>, run <code>homesecurity-models/SecureSystems/build/build</code> and verify that it gives an error.</p>
     <li data-md>
      <p>Double click to open the file <code>SecureSystems/build/reports/reasoning.xml</code>. You should see the following:</p>
      <p><img src="assets/tutorial6/Reasoning-Error-1.png" style="border:1px groove black;" width="100%"></p>
    </ol>
    <blockquote>
     <p>The inconsistency in this case is a result of the prototype not incorporating the required sound interface. Note that such requirement is not called for in the abstract architecture but comes from the realization. This would be an opportunity for a conversation between all parties: the architect, the supplier, and the acquirer (the integrator).</p>
    </blockquote>
    <ol start="5">
     <li data-md>
      <p>Undo the change in <code>SafeAlarms/src/oml/example.com/safe/alarms.oml</code> and right click on <code>homesecurity-models</code> and select Gradle -> Refresh Gradle Project.</p>
    </ol>
    <h3 class="heading settled" data-level="6.9" id="tutorial6-publish-with-semantic-versions"><span class="secno">6.9. </span><span class="content">Publish with Semantic Versions</span><a class="self-link" href="#tutorial6-publish-with-semantic-versions"></a></h3>
    <p>We hope that the previous section convinced you that having proper support for federation is paramount. This is especially true in change scenarios. Controlling when to adopt a breaking change in your upstream dependencies gives you time to plan for the impact (the needed changes). But how can you tell if the change is breaking or not. The software industry has developed a very smart convention for this problem called semantic versions (for software libraries), where a major revision for indicates large breaking change, a minor revision indicates large non-breaking changes, and a patch revision indicates minor changes and/or bug fixes. In openCAESAR, we adopt the same approach of publishing OML models with semantic versions. This works really nice with the way OML projects declare their dependencies as <a href="https://maven.apache.org/guides/introduction/introduction-to-dependency-mechanism.html">Maven</a> dependencies.</p>
    <p>In this step, we will first publish all the projects to Maven Local (on the local machine). Then, we will convert one of the direct dependencies we declared before into a Maven-based one with a semantic version. This will be the dependency of the <code>SecureSystems</code> project on the <code>SafeAlarm</code> project.</p>
    <blockquote>
     <p>Maven Local is a convenient playground for publishing Maven dependencies since it is only visible on that machine. Once a version is good and needs to be published more widely, it could be pushed to a remote accessible Maven repository (like Maven Central or an enterprise Maven repository).</p>
    </blockquote>
    <ol>
     <li data-md>
      <p>In <a data-link-type="dfn" href="#gradle-tasks-view" id="ref-for-gradle-tasks-view④①">Gradle Tasks view</a>, run <code>homesecurity-models/publishing/publishToMavenLocal</code> and verify that it runs successfully.</p>
    </ol>
    <blockquote>
     <p>Now, all the projects have published their OML models to Maven Local using the default 1.0.0 version.</p>
    </blockquote>
    <ol start="2">
     <li data-md>
      <p>On your computer, navigate to your <a href="https://www.baeldung.com/maven-local-repository">local Maven repository</a> typically named <code>.m2</code>. Expand the nested path <code>repository/com/example</code> and you should see all the 1.0.0 project artifacts published there.</p>
      <p><img src="assets/tutorial6/Maven-Local.png" style="border:1px groove black;" width="25%"></p>
     <li data-md>
      <p>Back in Rosetta, open the file <code>SecureSystems/build.gradle</code> and navigate to the dependencies section and change it as follows:</p>
<pre>/*
* The OML dependencies
*/
dependencies {
    oml project(':SmartSensors')
    //oml project(':SafeAlarms')
    oml "com.example:SafeAlarms:1.0.0"
    oml project(':SupremeMonitors')
}
</pre>
    </ol>
    <blockquote>
     <p>This pins the version of <code>SafeAlarms</code> that the integrator <code>SecureSystems</code> downloads to exactly 1.0.0. This means any future version of <code>SafeAlarms</code> will not be downloaded. Let’s test this.</p>
    </blockquote>
    <ol start="4">
     <li data-md>
      <p>Open the file <code>SafeAlarms/src/oml/example.com/safe/alarms.oml</code>, find the concept <code>AlarmSystem</code> and change the I9 restriction to <code>max 2 I9</code>, which is a non-breaking change.</p>
    </ol>
    <blockquote>
     <p>Since it created a non-breaking small change, <code>SafeAlarm</code> decided to change its version to <code>1.0.1</code> i.e, create a patch revision.</p>
    </blockquote>
    <ol start="5">
     <li data-md>
      <p>Open the file <code>SafeAlarms/build.gradle</code> and change the version at the top from <code>1.0.0</code> to <code>1.0.1</code>. Save the editor.</p>
    </ol>
    <blockquote>
     <p>Now we need to publish the new revision to Maven Local again.</p>
    </blockquote>
    <ol start="6">
     <li data-md>
      <p>In <a data-link-type="dfn" href="#gradle-tasks-view" id="ref-for-gradle-tasks-view④②">Gradle Tasks view</a>, run <code>homesecurity-models/publishing/publishToMavenLocal</code> and verify that it runs successfully.</p>
    </ol>
    <blockquote>
     <p>Inspect the new version in your Maven Local folder just to double check.</p>
    </blockquote>
    <p><img src="assets/tutorial6/Maven-Local-2.png" style="border:1px groove black;" width="25%"></p>
    <ol start="5">
     <li data-md>
      <p>Right click on the project <code>homesecurity-models</code> and select Grade -> Refresh Grade Project.</p>
    </ol>
    <blockquote>
     <p>Since <code>SecureSystems</code> pinned the version of its dependency to <code>1.0.0</code> it will not get this revision.</p>
    </blockquote>
    <ol start="6">
     <li data-md>
      <p>Open the file <code>SecureSystems/build/oml/example.com/safe/alarms.oml</code> and verify that the I9 restriction is still <code>max 1 I9</code>.</p>
    </ol>
    <blockquote>
     <p>This is unfortunate since <code>SecureSystems</code> should really get those patch revisions regularly because they may contain important bug fixes from <code>SafeAlarm</code>. Let’s relax their semantic version dependency to <code>1.0.+</code> instead. Note that <code>+</code> is a dynamic version that means the latest. So this will still pin the major.minor versions to <code>1.0</code> but will get the latest patch version.</p>
    </blockquote>
    <ol start="7">
     <li data-md>
      <p>Oen the file <code>SecureSystems/build.gradle</code> and change the version of <code>SafeAlarms</code> to <code>1.0.+</code>.</p>
     <li data-md>
      <p>Right click on the project <code>homesecurity-models</code> and select Grade -> Refresh Grade Project.</p>
     <li data-md>
      <p>Open the file <code>SecureSystems/build/oml/example.com/safe/alarms.oml</code> again and verify that the I9 restriction is now <code>max 2 I9</code>. Yay!</p>
    </ol>
    <blockquote>
     <p>In fact, <code>SecureSystems</code> may want to pin the version to <code>1.+</code> instead, i.e. fix the major revision but adopt the latest minor/patch revisions. This may be reasonable to protect against breaking changes but still allow non-breaking changes to be retrieved. Let’s test that.</p>
    </blockquote>
    <ol start="10">
     <li data-md>
      <p>Open the file <code>SecureSystems/build.gradle</code> and change the version of <code>SafeAlarms</code> to <code>1.+</code>.</p>
     <li data-md>
      <p>Open the file <code>SafeAlarms/src/oml/example.com/safe/alarms.oml</code>, find the concept <code>AlarmSystem</code> and change the I9 restriction to <code>min 2 I9</code>, which is a breaking change.</p>
    </ol>
    <blockquote>
     <p>Since it created a breaking change, <code>SafeAlarm</code> changes its version to <code>2.0.0</code> i.e, create a major revision.</p>
    </blockquote>
    <ol start="12">
     <li data-md>
      <p>Open the file <code>SafeAlarms/build.gradle</code> and change the version at the top from <code>1.0.0</code> to <code>2.0.0</code>. Save the editor.</p>
    </ol>
    <blockquote>
     <p>Now we need to publish the new revision to Maven Local again.</p>
    </blockquote>
    <ol start="13">
     <li data-md>
      <p>In <a data-link-type="dfn" href="#gradle-tasks-view" id="ref-for-gradle-tasks-view④③">Gradle Tasks view</a>, run <code>homesecurity-models/publishing/publishToMavenLocal</code> and verify that it runs successfully.</p>
     <li data-md>
      <p>Right click on the project <code>homesecurity-models</code> and select Grade -> Refresh Grade Project.</p>
     <li data-md>
      <p>Open the file <code>SecureSystems/build/oml/example.com/safe/alarms.oml</code> and verify that the I9 restriction is still <code>max 2 I9</code>.</p>
    </ol>
    <blockquote>
     <p>It is great that <code>SecureSystems</code> did not get the new <code>2.0.0</code> revision of <code>SafeAlarm</code> as this would have broken their architecture possibly at an inconvenient time. Later, when they have more time in their schedule to deal with this major revision, they can explicitly specify that in their dependencies. Let’s test that.</p>
    </blockquote>
    <ol start="16">
     <li data-md>
      <p>Open the file <code>SecureSystems/build.gradle</code> and change the version of <code>SafeAlarms</code> dependency to <code>2.+</code>.</p>
     <li data-md>
      <p>Right click on the project <code>homesecurity-models</code> and select Grade -> Refresh Grade Project.</p>
     <li data-md>
      <p>Open the file <code>SecureSystems/build/oml/example.com/safe/alarms.oml</code> and verify that the I9 restriction is now <code>min 2 I9</code> (the breaking change). Awesome!</p>
    </ol>
    <p>In conclusion, the discussion above showed how semantic versions can be a powerful tool to enable more control over change propagation in a federation scenario. This is especially important when the two sub projects are not working closely together. When projects collaborate closely (federation style 1), they can simply use the version-less sub project dependencies, which will always retrieve the latest. If they decide go with any other federation style but still like to synchronize closely, they can specify a semantic version of <code>+</code> which literally means the latest.</p>
    <h3 class="heading settled" data-level="6.10" id="tutorial6-summary"><span class="secno">6.10. </span><span class="content">Summary</span><a class="self-link" href="#tutorial6-summary"></a></h3>
    <p>This tutorial comprehensively introduced and showcased the robust federation support provided by openCAESAR for OML models. It not only introduced the concept but also delved into various federation styles that are supported. Furthermore, it provided a step-by-step walkthrough on configuring a federation of OML models across different projects.</p>
    <p>To illustrate the power of this federation support, the tutorial utilized a motivating example, depicting an abstract home security system architecture. This abstraction allows multiple suppliers to contribute to its realization. Subsequently, an integrator (acquirer) assembles this realized architecture from various components and conducts a comprehensive compliance analysis against the original abstract architecture.</p>
    <p>Additionally, the tutorial highlighted several common scenarios where federation proves invaluable, showcasing how the openCAESAR platform adeptly caters to these requirements. Notably, it demonstrated the control mechanism for change propagation within a federation using semantic versions. It’s important to note that this control relies on sub-projects within the federation correctly classifying their revisions. This level of precision empowers downstream dependencies to determine when to adopt various types of upstream changes.</p>
    <p>With openCAESAR’s robust support for OML federation, modeling becomes a truly scalable enterprise-level endeavor, fostering collaboration and efficiency in complex projects.</p>
   </div>
  </main>
<script>
(function() {
  "use strict";
  var collapseSidebarText = '<span aria-hidden="true">←</span> '
                          + '<span>Collapse Sidebar</span>';
  var expandSidebarText   = '<span aria-hidden="true">→</span> '
                          + '<span>Pop Out Sidebar</span>';
  var tocJumpText         = '<span aria-hidden="true">↑</span> '
                          + '<span>Jump to Table of Contents</span>';

  var sidebarMedia = window.matchMedia('screen and (min-width: 78em)');
  var autoToggle   = function(e){ toggleSidebar(e.matches) };
  if(sidebarMedia.addListener) {
    sidebarMedia.addListener(autoToggle);
  }

  function toggleSidebar(on) {
    if (on == undefined) {
      on = !document.body.classList.contains('toc-sidebar');
    }

    /* Don't scroll to compensate for the ToC if we're above it already. */
    var headY = 0;
    var head = document.querySelector('.head');
    if (head) {
      // terrible approx of "top of ToC"
      headY += head.offsetTop + head.offsetHeight;
    }
    var skipScroll = window.scrollY < headY;

    var toggle = document.getElementById('toc-toggle');
    var tocNav = document.getElementById('toc');
    if (on) {
      var tocHeight = tocNav.offsetHeight;
      document.body.classList.add('toc-sidebar');
      document.body.classList.remove('toc-inline');
      toggle.innerHTML = collapseSidebarText;
      if (!skipScroll) {
        window.scrollBy(0, 0 - tocHeight);
      }
      tocNav.focus();
      sidebarMedia.addListener(autoToggle); // auto-collapse when out of room
    }
    else {
      document.body.classList.add('toc-inline');
      document.body.classList.remove('toc-sidebar');
      toggle.innerHTML = expandSidebarText;
      if (!skipScroll) {
        window.scrollBy(0, tocNav.offsetHeight);
      }
      if (toggle.matches(':hover')) {
        /* Unfocus button when not using keyboard navigation,
           because I don't know where else to send the focus. */
        toggle.blur();
      }
    }
  }

  function createSidebarToggle() {
    /* Create the sidebar toggle in JS; it shouldn't exist when JS is off. */
    var toggle = document.createElement('a');
      /* This should probably be a button, but appearance isn't standards-track.*/
    toggle.id = 'toc-toggle';
    toggle.class = 'toc-toggle';
    toggle.href = '#toc';
    toggle.innerHTML = collapseSidebarText;

    sidebarMedia.addListener(autoToggle);
    var toggler = function(e) {
      e.preventDefault();
      sidebarMedia.removeListener(autoToggle); // persist explicit off states
      toggleSidebar();
      return false;
    }
    toggle.addEventListener('click', toggler, false);


    /* Get <nav id=toc-nav>, or make it if we don't have one. */
    var tocNav = document.getElementById('toc-nav');
    if (!tocNav) {
      tocNav = document.createElement('p');
      tocNav.id = 'toc-nav';
      /* Prepend for better keyboard navigation */
      document.body.insertBefore(tocNav, document.body.firstChild);
    }
    /* While we're at it, make sure we have a Jump to Toc link. */
    var tocJump = document.getElementById('toc-jump');
    if (!tocJump) {
      tocJump = document.createElement('a');
      tocJump.id = 'toc-jump';
      tocJump.href = '#toc';
      tocJump.innerHTML = tocJumpText;
      tocNav.appendChild(tocJump);
    }

    tocNav.appendChild(toggle);
  }

  var toc = document.getElementById('toc');
  if (toc) {
    createSidebarToggle();
    toggleSidebar(sidebarMedia.matches);

    /* If the sidebar has been manually opened and is currently overlaying the text
       (window too small for the MQ to add the margin to body),
       then auto-close the sidebar once you click on something in there. */
    toc.addEventListener('click', function(e) {
      if(e.target.tagName.toLowerCase() == "a" && document.body.classList.contains('toc-sidebar') && !sidebarMedia.matches) {
        toggleSidebar(false);
      }
    }, false);
  }
  else {
    console.warn("Can't find Table of Contents. Please use <nav id='toc'> around the ToC.");
  }

  /* Wrap tables in case they overflow */
  var tables = document.querySelectorAll(':not(.overlarge) > table.data, :not(.overlarge) > table.index');
  var numTables = tables.length;
  for (var i = 0; i < numTables; i++) {
    var table = tables[i];
    var wrapper = document.createElement('div');
    wrapper.className = 'overlarge';
    table.parentNode.insertBefore(wrapper, table);
    wrapper.appendChild(table);
  }

})();
</script>
  <h2 class="no-num no-ref heading settled" id="index"><span class="content">Index</span><a class="self-link" href="#index"></a></h2>
  <h3 class="no-num no-ref heading settled" id="index-defined-here"><span class="content">Terms defined by this specification</span><a class="self-link" href="#index-defined-here"></a></h3>
  <ul class="index">
   <li><a href="#console-view">Console view</a><span>, in § Unnumbered section</span>
   <li><a href="#editors">Editors</a><span>, in § Unnumbered section</span>
   <li><a href="#gradle-executions-view">Gradle Executions view</a><span>, in § Unnumbered section</span>
   <li><a href="#gradle-tasks-view">Gradle Tasks view</a><span>, in § Unnumbered section</span>
   <li><a href="#model-explorer-view">Model Explorer view</a><span>, in § Unnumbered section</span>
   <li><a href="#outline-view">Outline view</a><span>, in § Unnumbered section</span>
   <li><a href="#problems-view">Problems view</a><span>, in § Unnumbered section</span>
   <li><a href="#properties-view">Properties view</a><span>, in § Unnumbered section</span>
  </ul>
<script>/* Boilerplate: script-dom-helper */
"use strict";
function query(sel) { return document.querySelector(sel); }

function queryAll(sel) { return [...document.querySelectorAll(sel)]; }

function iter(obj) {
	if(!obj) return [];
	var it = obj[Symbol.iterator];
	if(it) return it;
	return Object.entries(obj);
}

function mk(tagname, attrs, ...children) {
	const el = document.createElement(tagname);
	for(const [k,v] of iter(attrs)) {
		if(k.slice(0,3) == "_on") {
			const eventName = k.slice(3);
			el.addEventListener(eventName, v);
		} else if(k[0] == "_") {
			// property, not attribute
			el[k.slice(1)] = v;
		} else {
			if(v === false || v == null) {
        continue;
      } else if(v === true) {
        el.setAttribute(k, "");
        continue;
      } else {
  			el.setAttribute(k, v);
      }
		}
	}
	append(el, children);
	return el;
}

/* Create shortcuts for every known HTML element */
[
  "a",
  "abbr",
  "acronym",
  "address",
  "applet",
  "area",
  "article",
  "aside",
  "audio",
  "b",
  "base",
  "basefont",
  "bdo",
  "big",
  "blockquote",
  "body",
  "br",
  "button",
  "canvas",
  "caption",
  "center",
  "cite",
  "code",
  "col",
  "colgroup",
  "datalist",
  "dd",
  "del",
  "details",
  "dfn",
  "dialog",
  "div",
  "dl",
  "dt",
  "em",
  "embed",
  "fieldset",
  "figcaption",
  "figure",
  "font",
  "footer",
  "form",
  "frame",
  "frameset",
  "head",
  "header",
  "h1",
  "h2",
  "h3",
  "h4",
  "h5",
  "h6",
  "hr",
  "html",
  "i",
  "iframe",
  "img",
  "input",
  "ins",
  "kbd",
  "label",
  "legend",
  "li",
  "link",
  "main",
  "map",
  "mark",
  "meta",
  "meter",
  "nav",
  "nobr",
  "noscript",
  "object",
  "ol",
  "optgroup",
  "option",
  "output",
  "p",
  "param",
  "pre",
  "progress",
  "q",
  "s",
  "samp",
  "script",
  "section",
  "select",
  "small",
  "source",
  "span",
  "strike",
  "strong",
  "style",
  "sub",
  "summary",
  "sup",
  "table",
  "tbody",
  "td",
  "template",
  "textarea",
  "tfoot",
  "th",
  "thead",
  "time",
  "title",
  "tr",
  "u",
  "ul",
  "var",
  "video",
  "wbr",
  "xmp",
].forEach(tagname=>{
	mk[tagname] = (...args) => mk(tagname, ...args);
});

function* nodesFromChildList(children) {
	for(const child of children.flat(Infinity)) {
		if(child instanceof Node) {
			yield child;
		} else {
			yield new Text(child);
		}
	}
}
function append(el, ...children) {
	for(const child of nodesFromChildList(children)) {
		if(el instanceof Node) el.appendChild(child);
		else el.push(child);
	}
	return el;
}

function insertAfter(el, ...children) {
	for(const child of nodesFromChildList(children)) {
		el.parentNode.insertBefore(child, el.nextSibling);
	}
	return el;
}

function clearContents(el) {
	el.innerHTML = "";
	return el;
}

function parseHTML(markup) {
	if(markup.toLowerCase().trim().indexOf('<!doctype') === 0) {
		const doc = document.implementation.createHTMLDocument("");
		doc.documentElement.innerHTML = markup;
		return doc;
	} else {
		const el = mk.template({});
		el.innerHTML = markup;
		return el.content;
	}
}</script>
<script>/* Boilerplate: script-dfn-panel */
"use strict";
{
let dfnPanelData = {
"console-view": {"dfnID":"console-view","dfnText":"Console view","external":false,"refSections":[],"url":"#console-view"},
"editors": {"dfnID":"editors","dfnText":"Editors","external":false,"refSections":[],"url":"#editors"},
"gradle-executions-view": {"dfnID":"gradle-executions-view","dfnText":"Gradle Executions view","external":false,"refSections":[{"refs":[{"id":"ref-for-gradle-executions-view"},{"id":"ref-for-gradle-executions-view\u2460"}],"title":"1.7. Run Build Task"},{"refs":[{"id":"ref-for-gradle-executions-view\u2461"},{"id":"ref-for-gradle-executions-view\u2462"},{"id":"ref-for-gradle-executions-view\u2463"},{"id":"ref-for-gradle-executions-view\u2464"}],"title":"1.8. Fix Logical Inconsistency"},{"refs":[{"id":"ref-for-gradle-executions-view\u2465"},{"id":"ref-for-gradle-executions-view\u2466"},{"id":"ref-for-gradle-executions-view\u2467"}],"title":"1.9. Run Query Task"},{"refs":[{"id":"ref-for-gradle-executions-view\u2468"}],"title":"2.2. Create OML Project"},{"refs":[{"id":"ref-for-gradle-executions-view\u2460\u24ea"},{"id":"ref-for-gradle-executions-view\u2460\u2460"},{"id":"ref-for-gradle-executions-view\u2460\u2461"}],"title":"2.3. P1: Objective aggregates Objective"},{"refs":[{"id":"ref-for-gradle-executions-view\u2460\u2462"},{"id":"ref-for-gradle-executions-view\u2460\u2463"},{"id":"ref-for-gradle-executions-view\u2460\u2464"}],"title":"2.4. P2: Mission pursues Objective"},{"refs":[{"id":"ref-for-gradle-executions-view\u2460\u2465"},{"id":"ref-for-gradle-executions-view\u2460\u2466"}],"title":"2.5. P3: Mission deploys Component"},{"refs":[{"id":"ref-for-gradle-executions-view\u2460\u2467"},{"id":"ref-for-gradle-executions-view\u2460\u2468"}],"title":"2.6. P4: Component contains Component"},{"refs":[{"id":"ref-for-gradle-executions-view\u2461\u24ea"},{"id":"ref-for-gradle-executions-view\u2461\u2460"},{"id":"ref-for-gradle-executions-view\u2461\u2461"}],"title":"2.7. P5: Mass characterizes Component"},{"refs":[{"id":"ref-for-gradle-executions-view\u2461\u2462"},{"id":"ref-for-gradle-executions-view\u2461\u2463"}],"title":"2.8. P6: Component presents Interface"},{"refs":[{"id":"ref-for-gradle-executions-view\u2461\u2464"},{"id":"ref-for-gradle-executions-view\u2461\u2465"},{"id":"ref-for-gradle-executions-view\u2461\u2466"}],"title":"2.9. P7: Requirement specifies Presents"},{"refs":[{"id":"ref-for-gradle-executions-view\u2461\u2467"},{"id":"ref-for-gradle-executions-view\u2461\u2468"},{"id":"ref-for-gradle-executions-view\u2462\u24ea"}],"title":"2.10. P8: Interface joins Interface"},{"refs":[{"id":"ref-for-gradle-executions-view\u2462\u2460"},{"id":"ref-for-gradle-executions-view\u2462\u2461"},{"id":"ref-for-gradle-executions-view\u2462\u2462"}],"title":"5.8. Create SPARQL Queries"}],"url":"#gradle-executions-view"},
"gradle-tasks-view": {"dfnID":"gradle-tasks-view","dfnText":"Gradle Tasks view","external":false,"refSections":[{"refs":[{"id":"ref-for-gradle-tasks-view"}],"title":"1.7. Run Build Task"},{"refs":[{"id":"ref-for-gradle-tasks-view\u2460"},{"id":"ref-for-gradle-tasks-view\u2461"}],"title":"1.8. Fix Logical Inconsistency"},{"refs":[{"id":"ref-for-gradle-tasks-view\u2462"},{"id":"ref-for-gradle-tasks-view\u2463"},{"id":"ref-for-gradle-tasks-view\u2464"}],"title":"1.9. Run Query Task"},{"refs":[{"id":"ref-for-gradle-tasks-view\u2465"}],"title":"2.2. Create OML Project"},{"refs":[{"id":"ref-for-gradle-tasks-view\u2466"},{"id":"ref-for-gradle-tasks-view\u2467"},{"id":"ref-for-gradle-tasks-view\u2468"}],"title":"2.3. P1: Objective aggregates Objective"},{"refs":[{"id":"ref-for-gradle-tasks-view\u2460\u24ea"},{"id":"ref-for-gradle-tasks-view\u2460\u2460"},{"id":"ref-for-gradle-tasks-view\u2460\u2461"}],"title":"2.4. P2: Mission pursues Objective"},{"refs":[{"id":"ref-for-gradle-tasks-view\u2460\u2462"},{"id":"ref-for-gradle-tasks-view\u2460\u2463"}],"title":"2.5. P3: Mission deploys Component"},{"refs":[{"id":"ref-for-gradle-tasks-view\u2460\u2464"},{"id":"ref-for-gradle-tasks-view\u2460\u2465"}],"title":"2.6. P4: Component contains Component"},{"refs":[{"id":"ref-for-gradle-tasks-view\u2460\u2466"},{"id":"ref-for-gradle-tasks-view\u2460\u2467"},{"id":"ref-for-gradle-tasks-view\u2460\u2468"}],"title":"2.7. P5: Mass characterizes Component"},{"refs":[{"id":"ref-for-gradle-tasks-view\u2461\u24ea"},{"id":"ref-for-gradle-tasks-view\u2461\u2460"}],"title":"2.8. P6: Component presents Interface"},{"refs":[{"id":"ref-for-gradle-tasks-view\u2461\u2461"},{"id":"ref-for-gradle-tasks-view\u2461\u2462"},{"id":"ref-for-gradle-tasks-view\u2461\u2463"}],"title":"2.9. P7: Requirement specifies Presents"},{"refs":[{"id":"ref-for-gradle-tasks-view\u2461\u2464"},{"id":"ref-for-gradle-tasks-view\u2461\u2465"},{"id":"ref-for-gradle-tasks-view\u2461\u2466"}],"title":"2.10. P8: Interface joins Interface"},{"refs":[{"id":"ref-for-gradle-tasks-view\u2461\u2467"},{"id":"ref-for-gradle-tasks-view\u2461\u2468"},{"id":"ref-for-gradle-tasks-view\u2462\u24ea"}],"title":"5.8. Create SPARQL Queries"},{"refs":[{"id":"ref-for-gradle-tasks-view\u2462\u2460"}],"title":"6.4. Define Modeling Methodology"},{"refs":[{"id":"ref-for-gradle-tasks-view\u2462\u2461"},{"id":"ref-for-gradle-tasks-view\u2462\u2462"}],"title":"6.5. Define System Architecture"},{"refs":[{"id":"ref-for-gradle-tasks-view\u2462\u2463"},{"id":"ref-for-gradle-tasks-view\u2462\u2464"},{"id":"ref-for-gradle-tasks-view\u2462\u2465"}],"title":"6.6. Federate Component Realization"},{"refs":[{"id":"ref-for-gradle-tasks-view\u2462\u2466"}],"title":"6.7. Integrate Federated Components"},{"refs":[{"id":"ref-for-gradle-tasks-view\u2462\u2467"},{"id":"ref-for-gradle-tasks-view\u2462\u2468"},{"id":"ref-for-gradle-tasks-view\u2463\u24ea"}],"title":"6.8. Run Federation Scenarios"},{"refs":[{"id":"ref-for-gradle-tasks-view\u2463\u2460"},{"id":"ref-for-gradle-tasks-view\u2463\u2461"},{"id":"ref-for-gradle-tasks-view\u2463\u2462"}],"title":"6.9. Publish with Semantic Versions"}],"url":"#gradle-tasks-view"},
"model-explorer-view": {"dfnID":"model-explorer-view","dfnText":"Model Explorer view","external":false,"refSections":[{"refs":[{"id":"ref-for-model-explorer-view"},{"id":"ref-for-model-explorer-view\u2460"},{"id":"ref-for-model-explorer-view\u2461"}],"title":"1.2. Create OML Project"},{"refs":[{"id":"ref-for-model-explorer-view\u2462"}],"title":"1.3. Create OML Vocabulary"},{"refs":[{"id":"ref-for-model-explorer-view\u2463"}],"title":"1.4. Create OML Vocabulary Bundle"},{"refs":[{"id":"ref-for-model-explorer-view\u2464"}],"title":"1.5. Create OML Description"},{"refs":[{"id":"ref-for-model-explorer-view\u2465"}],"title":"1.6. Edit OML Description Bundle"},{"refs":[{"id":"ref-for-model-explorer-view\u2466"}],"title":"1.8. Fix Logical Inconsistency"},{"refs":[{"id":"ref-for-model-explorer-view\u2467"},{"id":"ref-for-model-explorer-view\u2468"},{"id":"ref-for-model-explorer-view\u2460\u24ea"},{"id":"ref-for-model-explorer-view\u2460\u2460"},{"id":"ref-for-model-explorer-view\u2460\u2461"},{"id":"ref-for-model-explorer-view\u2460\u2462"},{"id":"ref-for-model-explorer-view\u2460\u2463"},{"id":"ref-for-model-explorer-view\u2460\u2464"},{"id":"ref-for-model-explorer-view\u2460\u2465"}],"title":"1.9. Run Query Task"},{"refs":[{"id":"ref-for-model-explorer-view\u2460\u2466"},{"id":"ref-for-model-explorer-view\u2460\u2467"},{"id":"ref-for-model-explorer-view\u2460\u2468"}],"title":"2.2. Create OML Project"},{"refs":[{"id":"ref-for-model-explorer-view\u2461\u24ea"}],"title":"2.3. P1: Objective aggregates Objective"},{"refs":[{"id":"ref-for-model-explorer-view\u2461\u2460"}],"title":"2.4. P2: Mission pursues Objective"},{"refs":[{"id":"ref-for-model-explorer-view\u2461\u2461"}],"title":"2.7. P5: Mass characterizes Component"},{"refs":[{"id":"ref-for-model-explorer-view\u2461\u2462"}],"title":"2.9. P7: Requirement specifies Presents"},{"refs":[{"id":"ref-for-model-explorer-view\u2461\u2463"}],"title":"2.10. P8: Interface joins Interface"},{"refs":[{"id":"ref-for-model-explorer-view\u2461\u2464"},{"id":"ref-for-model-explorer-view\u2461\u2465"},{"id":"ref-for-model-explorer-view\u2461\u2466"}],"title":"5.2. Create OML Model Project"},{"refs":[{"id":"ref-for-model-explorer-view\u2461\u2467"},{"id":"ref-for-model-explorer-view\u2461\u2468"},{"id":"ref-for-model-explorer-view\u2462\u24ea"},{"id":"ref-for-model-explorer-view\u2462\u2460"},{"id":"ref-for-model-explorer-view\u2462\u2461"}],"title":"5.3. Create OML Vocabulary"},{"refs":[{"id":"ref-for-model-explorer-view\u2462\u2462"},{"id":"ref-for-model-explorer-view\u2462\u2463"},{"id":"ref-for-model-explorer-view\u2462\u2464"},{"id":"ref-for-model-explorer-view\u2462\u2465"}],"title":"5.4. Create OML Description"},{"refs":[{"id":"ref-for-model-explorer-view\u2462\u2466"},{"id":"ref-for-model-explorer-view\u2462\u2467"},{"id":"ref-for-model-explorer-view\u2462\u2468"},{"id":"ref-for-model-explorer-view\u2463\u24ea"}],"title":"5.5. Create Sirius Viewpoint Project"},{"refs":[{"id":"ref-for-model-explorer-view\u2463\u2460"}],"title":"5.6. Create Diagram Editor"},{"refs":[{"id":"ref-for-model-explorer-view\u2463\u2461"}],"title":"5.7. Create Table Editor"},{"refs":[{"id":"ref-for-model-explorer-view\u2463\u2462"},{"id":"ref-for-model-explorer-view\u2463\u2463"},{"id":"ref-for-model-explorer-view\u2463\u2464"},{"id":"ref-for-model-explorer-view\u2463\u2465"},{"id":"ref-for-model-explorer-view\u2463\u2466"},{"id":"ref-for-model-explorer-view\u2463\u2467"},{"id":"ref-for-model-explorer-view\u2463\u2468"}],"title":"5.8. Create SPARQL Queries"},{"refs":[{"id":"ref-for-model-explorer-view\u2464\u24ea"}],"title":"6.3. Create Federated Projects"}],"url":"#model-explorer-view"},
"outline-view": {"dfnID":"outline-view","dfnText":"Outline view","external":false,"refSections":[],"url":"#outline-view"},
"problems-view": {"dfnID":"problems-view","dfnText":"Problems view","external":false,"refSections":[],"url":"#problems-view"},
"properties-view": {"dfnID":"properties-view","dfnText":"Properties view","external":false,"refSections":[],"url":"#properties-view"},
};

document.addEventListener("DOMContentLoaded", ()=>{
    genAllDfnPanels();

    document.body.addEventListener("click", (e) => {
        // If not handled already, just hide all dfn panels.
        hideAllDfnPanels();
    });
});

window.addEventListener("resize", () => {
    // Pin any visible dfn panel
    queryAll(".dfn-panel.on, .dfn-panel.activated").forEach(el=>positionDfnPanel(el));
});

function genAllDfnPanels() {
    for(const panelData of Object.values(dfnPanelData)) {
        const dfnID = panelData.dfnID;
        const dfn = document.getElementById(dfnID);
        if(!dfn) {
            console.log(`Can't find dfn#${dfnID}.`, panelData);
            continue;
        }
        dfn.panelData = panelData;
        insertDfnPopupAction(dfn);
    }
}

function genDfnPanel(dfn, { dfnID, url, dfnText, refSections, external }) {
    const dfnPanel = mk.aside({
        class: "dfn-panel on",
        id: `infopanel-for-${dfnID}`,
        "data-for": dfnID,
        "aria-labelled-by":`infopaneltitle-for-${dfnID}`,
        },
        mk.span({id:`infopaneltitle-for-${dfnID}`, style:"display:none"},
            `Info about the '${dfnText}' ${external?"external":""} reference.`),
        mk.a({href:url, class:"dfn-link"}, url),
        refSections.length == 0 ? [] :
            mk.b({}, "Referenced in:"),
            mk.ul({},
                ...refSections.map(section=>
                    mk.li({},
                        ...section.refs.map((ref, refI)=>
                            [
                                mk.a({ href: `#${ref.id}` },
                                    (refI == 0) ? section.title : `(${refI + 1})`
                                ),
                                " ",
                            ]
                        ),
                    ),
                ),
            ),
        genLinkingSyntaxes(dfn),
    );

    dfnPanel.addEventListener('click', (event) => {
        if (event.target.nodeName == 'A') {
            scrollToTargetAndHighlight(event);
            pinDfnPanel(dfnPanel);
        }
        event.stopPropagation();
        refocusOnTarget(event);
    });
    dfnPanel.addEventListener('keydown', (event) => {
        if(event.keyCode == 27) { // Escape key
            hideDfnPanel({dfnPanel});
            event.stopPropagation();
            event.preventDefault();
        }
    });

    dfnPanel.dfn = dfn;
    dfn.dfnPanel = dfnPanel;
    return dfnPanel;
}



function hideAllDfnPanels() {
    // Delete the currently-active dfn panel.
    queryAll(".dfn-panel").forEach(dfnPanel=>hideDfnPanel({dfnPanel}));
}

function showDfnPanel(dfn) {
    hideAllDfnPanels(); // Only display one at a time.

    dfn.setAttribute("aria-expanded", "true");

    const dfnPanel = genDfnPanel(dfn, dfn.panelData);

    // Give the dfn a unique tabindex, and then
    // give all the tabbable panel bits successive indexes.
    let tabIndex = 100;
    dfn.tabIndex = tabIndex++;
    const tabbable = dfnPanel.querySelectorAll(":is(a, button)");
    for (const el of tabbable) {
        el.tabIndex = tabIndex++;
    }

    append(document.body, dfnPanel);
    positionDfnPanel(dfnPanel);
}

function positionDfnPanel(dfnPanel) {
    const dfn = dfnPanel.dfn;
    const dfnPos = getBounds(dfn);
    dfnPanel.style.top = dfnPos.bottom + "px";
    dfnPanel.style.left = dfnPos.left + "px";

    const panelPos = dfnPanel.getBoundingClientRect();
    const panelMargin = 8;
    const maxRight = document.body.parentNode.clientWidth - panelMargin;
    if (panelPos.right > maxRight) {
        const overflowAmount = panelPos.right - maxRight;
        const newLeft = Math.max(panelMargin, dfnPos.left - overflowAmount);
        dfnPanel.style.left = newLeft + "px";
    }
}

function pinDfnPanel(dfnPanel) {
    // Switch it to "activated" state, which pins it.
    dfnPanel.classList.add("activated");
    dfnPanel.style.position = "fixed";
    dfnPanel.style.left = null;
    dfnPanel.style.top = null;
}

function hideDfnPanel({dfn, dfnPanel}) {
    if(!dfnPanel) dfnPanel = dfn.dfnPanel;
    if(!dfn) dfn = dfnPanel.dfn;
    dfn.dfnPanel = undefined;
    dfnPanel.dfn = undefined;
    dfn.setAttribute("aria-expanded", "false");
    dfn.tabIndex = undefined;
    dfnPanel.remove()
}

function toggleDfnPanel(dfn) {
    if(dfn.dfnPanel) {
        hideDfnPanel(dfn);
    } else {
        showDfnPanel(dfn);
    }
}

function insertDfnPopupAction(dfn) {
    dfn.setAttribute('role', 'button');
    dfn.setAttribute('aria-expanded', 'false')
    dfn.tabIndex = 0;
    dfn.classList.add('has-dfn-panel');
    dfn.addEventListener('click', (event) => {
        toggleDfnPanel(dfn);
        event.stopPropagation();
    });
    dfn.addEventListener('keypress', (event) => {
        const kc = event.keyCode;
        // 32->Space, 13->Enter
        if(kc == 32 || kc == 13) {
            toggleDfnPanel(dfn);
            event.stopPropagation();
            event.preventDefault();
        }
    });
}

function refocusOnTarget(event) {
    const target = event.target;
    setTimeout(() => {
        // Refocus on the event.target element.
        // This is needed after browser scrolls to the destination.
        target.focus();
    });
}

// TODO: shared util
// Returns the root-level absolute position {left and top} of element.
function getBounds(el, relativeTo=document.body) {
    const relativeRect = relativeTo.getBoundingClientRect();
    const elRect = el.getBoundingClientRect();
    const top = elRect.top - relativeRect.top;
    const left = elRect.left - relativeRect.left;
    return {
        top,
        left,
        bottom: top + elRect.height,
        right: left + elRect.width,
    }
}

function scrollToTargetAndHighlight(event) {
    let hash = event.target.hash;
    if (hash) {
        hash = decodeURIComponent(hash.substring(1));
        const dest = document.getElementById(hash);
        if (dest) {
            dest.classList.add('highlighted');
            setTimeout(() => dest.classList.remove('highlighted'), 1000);
        }
    }
}

// Functions, divided by link type, that wrap an autolink's
// contents with the appropriate outer syntax.
// Alternately, a string naming another type they format
// the same as.
function needsFor(type) {
    switch(type) {
        case "descriptor":
        case "value":
        case "element-attr":
        case "attr-value":
        case "element-state":
        case "method":
        case "constructor":
        case "argument":
        case "attribute":
        case "const":
        case "dict-member":
        case "event":
        case "enum-value":
        case "stringifier":
        case "serializer":
        case "iterator":
        case "maplike":
        case "setlike":
        case "state":
        case "mode":
        case "context":
        case "facet": return true;

        default: return false;
    }
}
function refusesFor(type) {
    switch(type) {
        case "property":
        case "element":
        case "interface":
        case "namespace":
        case "callback":
        case "dictionary":
        case "enum":
        case "exception":
        case "typedef":
        case "http-header":
        case "permission": return true;

        default: return false;
    }
}
function linkFormatterFromType(type) {
    switch(type) {
        case 'scheme':
        case 'permission':
        case 'dfn': return (text) => `[=${text}=]`;

        case 'abstract-op': return (text) => `[\$${text}\$]`;

        case 'function':
        case 'at-rule':
        case 'selector':
        case 'value': return (text) => `''${text}''`;

        case 'http-header': return (text) => `[:${text}:]`;

        case 'interface':
        case 'constructor':
        case 'method':
        case 'argument':
        case 'attribute':
        case 'callback':
        case 'dictionary':
        case 'dict-member':
        case 'enum':
        case 'enum-value':
        case 'exception':
        case 'const':
        case 'typedef':
        case 'stringifier':
        case 'serializer':
        case 'iterator':
        case 'maplike':
        case 'setlike':
        case 'extended-attribute':
        case 'event':
        case 'idl': return (text) => `{{${text}}}`;

        case 'element-state':
        case 'element-attr':
        case 'attr-value':
        case 'element': return (element) => `<{${element}}>`;

        case 'grammar': return (text) => `${text} (within a <pre class=prod>)`;

        case 'type': return (text)=> `<<${text}>>`;

        case 'descriptor':
        case 'property': return (text) => `'${text}'`;

        default: return;
    };
};

function genLinkingSyntaxes(dfn) {
    if(dfn.tagName != "DFN") return;

    const type = dfn.getAttribute('data-dfn-type');
    if(!type) {
        console.log(`<dfn> doesn't have a data-dfn-type:`, dfn);
        return [];
    }

    // Return a function that wraps link text based on the type
    const linkFormatter = linkFormatterFromType(type);
    if(!linkFormatter) {
        console.log(`<dfn> has an unknown data-dfn-type:`, dfn);
        return [];
    }

    let ltAlts;
    if(dfn.hasAttribute('data-lt')) {
        ltAlts = dfn.getAttribute('data-lt')
            .split("|")
            .map(x=>x.trim());
    } else {
        ltAlts = [dfn.textContent.trim()];
    }
    if(type == "type") {
        // lt of "<foo>", but "foo" is the interior;
        // <<foo/bar>> is how you write it with a for,
        // not <foo/<bar>> or whatever.
        for(var i = 0; i < ltAlts.length; i++) {
            const lt = ltAlts[i];
            const match = /<(.*)>/.exec(lt);
            if(match) { ltAlts[i] = match[1]; }
        }
    }

    let forAlts;
    if(dfn.hasAttribute('data-dfn-for')) {
        forAlts = dfn.getAttribute('data-dfn-for')
            .split(",")
            .map(x=>x.trim());
    } else {
        forAlts = [''];
    }

    let linkingSyntaxes = [];
    if(!needsFor(type)) {
        for(const lt of ltAlts) {
            linkingSyntaxes.push(linkFormatter(lt));
        }
    }
    if(!refusesFor(type)) {
        for(const f of forAlts) {
            linkingSyntaxes.push(linkFormatter(`${f}/${ltAlts[0]}`))
        }
    }
    return [
        mk.b({}, 'Possible linking syntaxes:'),
        mk.ul({},
            ...linkingSyntaxes.map(link => {
                const copyLink = async () =>
                    await navigator.clipboard.writeText(link);
                return mk.li({},
                    mk.div({ class: 'link-item' },
                        mk.button({
                            class: 'copy-icon', title: 'Copy',
                            type: 'button',
                            _onclick: copyLink,
                            tabindex: 0,
                        }, mk.span({ class: 'icon' }) ),
                        mk.span({}, link)
                    )
                );
            })
        )
    ];
}
}
</script>
<script>/* Boilerplate: script-ref-hints */
"use strict";
{
let refsData = {
"#gradle-executions-view": {"displayText":"gradle executions view","export":true,"for_":[],"level":"1","normative":true,"shortname":"index","spec":"index-1","status":"local","text":"gradle executions view","type":"dfn","url":"#gradle-executions-view"},
"#gradle-tasks-view": {"displayText":"gradle tasks view","export":true,"for_":[],"level":"1","normative":true,"shortname":"index","spec":"index-1","status":"local","text":"gradle tasks view","type":"dfn","url":"#gradle-tasks-view"},
"#model-explorer-view": {"displayText":"model explorer view","export":true,"for_":[],"level":"1","normative":true,"shortname":"index","spec":"index-1","status":"local","text":"model explorer view","type":"dfn","url":"#model-explorer-view"},
};

function mkRefHint(link, ref) {
    const linkText = link.textContent;
    let dfnTextElements = '';
    if (ref.displayText.toLowerCase() != linkText.toLowerCase()) {
        // Give the original term if it's being displayed in a different way.
        // But allow casing differences, they're insignificant.
        dfnTextElements =
            mk.li({},
                mk.b({}, "Term: "),
                mk.span({}, ref.displayText)
            );
    }
    const forList = ref.for_;
    let forListElements;
    if(forList.length == 0) {
        forListElements = [];
    } else if(forList.length == 1) {
        forListElements = mk.li({},
            mk.b({}, "For: "),
            mk.span({}, forList[0]),
        );
    } else {
        forListElements = mk.li({},
            mk.b({}, "For: "),
            mk.ul({},
                ...forList.map(forItem =>
                    mk.li({},
                        mk.span({}, forItem)
                    ),
                ),
            ),
        );
    }
    const url = ref.url;
    const safeUrl = encodeURIComponent(url);
    const hintPanel = mk.aside({
        class: "ref-hint",
        id: `ref-hint-for-${safeUrl}`,
        "data-for": url,
        "aria-labelled-by": `ref-hint-for-${safeUrl}`,
    },
        mk.ul({},
            dfnTextElements,
            mk.li({},
                mk.b({}, "URL: "),
                mk.a({ href: url, class: "ref" }, url),
            ),
            mk.li({},
                mk.b({}, "Type: "),
                mk.span({}, `${ref.type}`),
            ),
            mk.li({},
                mk.b({}, "Spec: "),
                mk.span({}, `${ref.spec ? ref.spec : ''}`),
            ),
            forListElements
        ),
    );
    hintPanel.forLink = link;
    setupRefHintEventListeners(link, hintPanel);
    return hintPanel;
}

function hideAllRefHints() {
    queryAll(".ref-hint").forEach(el=>hideRefHint(el));
}

function hideRefHint(refHint) {
    const link = refHint.forLink;
    link.setAttribute("aria-expanded", "false");
    if(refHint.teardownEventListeners) {
        refHint.teardownEventListeners();
    }
    refHint.remove();
}

function showRefHint(link) {
    if(link.classList.contains("dfn-link")) return;
    const url = link.getAttribute("href");
    const ref = refsData[url];
    if(!ref) return;

    hideAllRefHints(); // Only display one at this time.

    const refHint = mkRefHint(link, ref);
    append(document.body, refHint);
    link.setAttribute("aria-expanded", "true");
    positionRefHint(refHint);
}

function setupRefHintEventListeners(link, refHint) {
    if (refHint.teardownEventListeners) return;
    // Add event handlers to hide the refHint after the user moves away
    // from both the link and refHint, if not hovering either within one second.
    let timeout = null;
    const startHidingRefHint = (event) => {
        if (timeout) {
            clearTimeout(timeout);
        }
        timeout = setTimeout(() => {
            hideRefHint(refHint);
        }, 1000);
    }
    const resetHidingRefHint = (event) => {
        if (timeout) clearTimeout(timeout);
        timeout = null;
    };
    link.addEventListener("mouseleave", startHidingRefHint);
    link.addEventListener("mouseenter", resetHidingRefHint);
    link.addEventListener("blur", startHidingRefHint);
    link.addEventListener("focus", resetHidingRefHint);
    refHint.addEventListener("mouseleave", startHidingRefHint);
    refHint.addEventListener("mouseenter", resetHidingRefHint);
    refHint.addEventListener("blur", startHidingRefHint);
    refHint.addEventListener("focus", resetHidingRefHint);

    refHint.teardownEventListeners = () => {
        // remove event listeners
        resetHidingRefHint();
        link.removeEventListener("mouseleave", startHidingRefHint);
        link.removeEventListener("mouseenter", resetHidingRefHint);
        link.removeEventListener("blur", startHidingRefHint);
        link.removeEventListener("focus", resetHidingRefHint);
        refHint.removeEventListener("mouseleave", startHidingRefHint);
        refHint.removeEventListener("mouseenter", resetHidingRefHint);
        refHint.removeEventListener("blur", startHidingRefHint);
        refHint.removeEventListener("focus", resetHidingRefHint);
    };
}

function positionRefHint(refHint) {
    const link = refHint.forLink;
    const linkPos = getBounds(link);
    refHint.style.top = linkPos.bottom + "px";
    refHint.style.left = linkPos.left + "px";

    const panelPos = refHint.getBoundingClientRect();
    const panelMargin = 8;
    const maxRight = document.body.parentNode.clientWidth - panelMargin;
    if (panelPos.right > maxRight) {
        const overflowAmount = panelPos.right - maxRight;
        const newLeft = Math.max(panelMargin, linkPos.left - overflowAmount);
        refHint.style.left = newLeft + "px";
    }
}

// TODO: shared util
// Returns the root-level absolute position {left and top} of element.
function getBounds(el, relativeTo=document.body) {
    const relativeRect = relativeTo.getBoundingClientRect();
    const elRect = el.getBoundingClientRect();
    const top = elRect.top - relativeRect.top;
    const left = elRect.left - relativeRect.left;
    return {
        top,
        left,
        bottom: top + elRect.height,
        right: left + elRect.width,
    }
}

function showRefHintListener(e) {
    // If the target isn't in a link (or is a link),
    // just ignore it.
    let link = e.target.closest("a");
    if(!link) return;

    // If the target is in a ref-hint panel
    // (aka a link in the already-open one),
    // also just ignore it.
    if(link.closest(".ref-hint")) return;

    // Otherwise, show the panel for the link.
    showRefHint(link);
}

function hideAllHintsListener(e) {
    // If the click is inside a ref-hint panel, ignore it.
    if(e.target.closest(".ref-hint")) return;
    // Otherwise, close all the current panels.
    hideAllRefHints();
}

document.addEventListener("DOMContentLoaded", () => {
    document.body.addEventListener("mousedown", showRefHintListener);
    document.body.addEventListener("focus", showRefHintListener);

    document.body.addEventListener("click", hideAllHintsListener);
});

window.addEventListener("resize", () => {
    // Hide any open ref hint.
    hideAllRefHints();
});
}
</script>